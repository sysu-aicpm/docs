{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":"\u4e2d\u822a\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf\u6587\u6863 AICPM: AI Care for Property Management"},{"location":"#_1","title":"\u9879\u76ee\u4ecb\u7ecd","text":"<p>AICPM\u662f\u4e00\u5957\u9762\u5411\u667a\u80fd\u5bb6\u5c45\u7684\u5168\u5c4b\u8bbe\u5907\u667a\u80fd\u7ba1\u7406\u7cfb\u7edf\uff0c\u81f4\u529b\u4e8e\u89e3\u51b3\u5f53\u524d\u667a\u80fd\u5bb6\u5c45\u9886\u57df\u591a\u7528\u6237\u6743\u9650\u7ba1\u7406\u6df7\u4e71\u7684\u95ee\u9898\u3002\u7cfb\u7edf\u6838\u5fc3\u7279\u70b9\u5305\u62ec\uff1a\u5b8c\u5584\u7684\u591a\u7528\u6237\u6388\u6743\u673a\u5236\uff0c\u786e\u4fdd\u5bb6\u5ead\u6210\u5458\u8eab\u4efd\u771f\u5b9e\u6027\uff1b\u8bbe\u5907\u6743\u9650\u7684\u7ec6\u7c92\u5ea6\u63a7\u5236\u548c\u7ba1\u7406\uff0c\u6839\u636e\u7528\u6237\u9700\u6c42\u8fdb\u884c\u4e2a\u6027\u5316\u6743\u9650\u5206\u914d\uff1b\u5168\u9762\u7684\u8bbe\u5907\u4f7f\u7528\u8bb0\u5f55\u548c\u65e5\u5fd7\u7cfb\u7edf\uff0c\u4fdd\u969c\u6570\u636e\u5b89\u5168\u53ef\u9760\u3002\u540c\u65f6\uff0c\u7cfb\u7edf\u521b\u65b0\u6027\u5730\u96c6\u6210\u4e86MCP\u6280\u672f\u6846\u67b6\u4e0b\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff0c\u5728\u4e25\u683c\u7684\"\u96f6\u4fe1\u4efb\"\u5b89\u5168\u673a\u5236\u4e0b\uff0c\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u5bf9\u8bdd\u65b9\u5f0f\u4fbf\u6377\u5730\u67e5\u770b\u548c\u63a7\u5236\u5bb6\u5ead\u8bbe\u5907\uff0c\u63d0\u5347\u4e86\u667a\u80fd\u5bb6\u5c45\u7684\u6613\u7528\u6027\u548c\u667a\u80fd\u5316\u6c34\u5e73\u3002</p>"},{"location":"#demo","title":"\u89c6\u9891demo","text":""},{"location":"#_2","title":"\u5f00\u6e90\u4fe1\u606f","text":"<p>AICPM\u5b8c\u5168\u5f00\u6e90\uff0c\u6b22\u8fce\u793e\u533a\u8d21\u732e\uff1a</p> <ul> <li> <p>\u4ee3\u7801\u4ed3\u5e93\uff1ahttps://github.com/sysu-aicpm</p> </li> <li> <p>\u9879\u76ee\u6587\u6863\uff1a</p> <ul> <li>https://sysu-aicpm.github.io/docs/</li> <li>\u98de\u4e66\u6587\u6863</li> </ul> </li> </ul> <p>\u6211\u4eec\u9f13\u52b1\u5f00\u53d1\u8005\u548c\u7814\u7a76\u4eba\u5458\u53c2\u4e0e\u9879\u76ee\uff0c\u5171\u540c\u63a8\u52a8\u667a\u80fd\u5bb6\u5c45\u6280\u672f\u7684\u53d1\u5c55\u4e0e\u521b\u65b0\u3002\u65e0\u8bba\u662f\u63d0\u4ea4\u4ee3\u7801\u3001\u62a5\u544a\u95ee\u9898\u8fd8\u662f\u63d0\u51fa\u65b0\u7684\u529f\u80fd\u5efa\u8bae\uff0c\u60a8\u7684\u53c2\u4e0e\u90fd\u5c06\u5e2e\u52a9\u6211\u4eec\u6253\u9020\u66f4\u5b89\u5168\u3001\u66f4\u667a\u80fd\u7684\u5bb6\u5c45\u7cfb\u7edf\u3002</p>"},{"location":"background/","title":"\u80cc\u666f\u4ecb\u7ecd","text":""},{"location":"background/#_2","title":"\u5168\u5c4b\u667a\u80fd\u7cfb\u7edf\u6982\u8ff0","text":"<p>\u5168\u5c4b\u667a\u80fd\u662f\u901a\u8fc7\u7269\u8054\u7f51\u3001\u4eba\u5de5\u667a\u80fd\u3001\u5927\u6570\u636e\u7b49\u5148\u8fdb\u6280\u672f\uff0c\u5c06\u5bb6\u5ead\u4e2d\u5404\u79cd\u8bbe\u5907\u4e0e\u7cfb\u7edf\u8fdb\u884c\u6df1\u5ea6\u96c6\u6210\u4e0e\u4e92\u8054\u4e92\u901a\uff0c\u5b9e\u73b0\u5bb6\u5c45\u73af\u5883\u7684\u667a\u80fd\u5316\u7ba1\u7406\u4e0e\u63a7\u5236\u3002\u968f\u7740\u667a\u80fd\u5bb6\u5c45\u8bbe\u5907\u7684\u666e\u53ca\uff0c\u5355\u6237\u5bb6\u5ead\u4e2d\u5f80\u5f80\u62e5\u6709\u591a\u4e2a\u7528\u6237\uff0c\u4e0d\u540c\u7528\u6237\u5bf9\u4e0d\u540c\u8bbe\u5907\u7684\u4f7f\u7528\u9700\u6c42\u548c\u6743\u9650\u9700\u8981\u6709\u6240\u533a\u5206\u3002\u76ee\u524d\u5e02\u573a\u4e0a\u7684\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf\u666e\u904d\u7f3a\u4e4f\u7cbe\u7ec6\u5316\u7684\u591a\u7528\u6237\u6743\u9650\u7ba1\u7406\u673a\u5236\uff0c\u5bfc\u81f4\u5b89\u5168\u6027\u548c\u9690\u79c1\u6027\u95ee\u9898\u51f8\u663e\u3002\u672c\u7cfb\u7edf\u8fd8\u96c6\u6210\u4e86\u5148\u8fdb\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff0c\u4f7f\u5927\u6a21\u578b\u80fd\u591f\u5b89\u5168\u5730\u8c03\u7528\u5de5\u5177API\u83b7\u53d6\u8bbe\u5907\u4fe1\u606f\u5e76\u6267\u884c\u64cd\u4f5c\u6307\u4ee4\uff0c\u8ba9\u7528\u6237\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u5bf9\u8bdd\u65b9\u5f0f\u8f7b\u677e\u67e5\u770b\u548c\u63a7\u5236\u5bb6\u5ead\u8bbe\u5907\uff0c\u5927\u5927\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u6613\u7528\u6027\u548c\u667a\u80fd\u5316\u6c34\u5e73\u3002</p> <p></p>"},{"location":"background/#_3","title":"\u884c\u4e1a\u73b0\u72b6\u4e0e\u8d8b\u52bf","text":"<p>\u5f53\u524d\u667a\u80fd\u5bb6\u5c45\u5e02\u573a\u5448\u73b0\u5feb\u901f\u589e\u957f\u6001\u52bf\u3002\u7136\u800c\uff0c\u591a\u6570\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf\u4ecd\u91c7\u7528\u5355\u4e00\u8d26\u6237\u7ba1\u7406\u6a21\u5f0f\uff0c\u65e0\u6cd5\u6ee1\u8db3\u5bb6\u5ead\u6210\u5458\u5dee\u5f02\u5316\u7684\u8bbe\u5907\u4f7f\u7528\u9700\u6c42\u3002\u968f\u7740\u7528\u6237\u5bf9\u9690\u79c1\u548c\u5b89\u5168\u610f\u8bc6\u7684\u589e\u5f3a\uff0c\u7cbe\u7ec6\u5316\u7684\u8bbe\u5907\u6743\u9650\u7ba1\u7406\u6210\u4e3a\u667a\u80fd\u5bb6\u5c45\u53d1\u5c55\u7684\u5fc5\u7136\u8d8b\u52bf\u3002\u540c\u65f6\uff0c\u5927\u8bed\u8a00\u6a21\u578b\u6280\u672f\u7684\u5feb\u901f\u53d1\u5c55\u4e3a\u667a\u80fd\u5bb6\u5c45\u5e26\u6765\u4e86\u65b0\u7684\u4ea4\u4e92\u8303\u5f0f\uff0c\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u548c\u5bf9\u8bdd\u5f0f\u4ea4\u4e92\uff0c\u4f7f\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf\u66f4\u52a0\u76f4\u89c2\u548c\u4eba\u6027\u5316\u3002</p> <p></p>"},{"location":"background/#_4","title":"\u9879\u76ee\u610f\u4e49","text":"<p>\u672c\u9879\u76ee\u65e8\u5728\u5f00\u53d1\u4e00\u4e2a\u5168\u5c4b\u667a\u80fd\u8bbe\u5907\u6743\u9650\u7ba1\u7406\u4e0e\u591a\u7528\u6237\u5171\u4eab\u7cfb\u7edf\uff0c\u901a\u8fc7\u5efa\u7acb\u5b8c\u5584\u7684\u8eab\u4efd\u8ba4\u8bc1\u673a\u5236\u3001\u7ec6\u7c92\u5ea6\u6743\u9650\u63a7\u5236\u548c\u5168\u9762\u7684\u8bbe\u5907\u4f7f\u7528\u8bb0\u5f55\u529f\u80fd\uff0c\u89e3\u51b3\u5f53\u524d\u667a\u80fd\u5bb6\u5c45\u4f7f\u7528\u4e2d\u7684\u6743\u9650\u6df7\u4e71\u3001\u9690\u79c1\u6cc4\u9732\u548c\u5b89\u5168\u9690\u60a3\u7b49\u95ee\u9898\u3002\u8be5\u7cfb\u7edf\u5c06\u5927\u5e45\u63d0\u5347\u667a\u80fd\u5bb6\u5c45\u7684\u4f7f\u7528\u4f53\u9a8c\u548c\u5b89\u5168\u6027\uff0c\u4e3a\u4e0d\u540c\u5bb6\u5ead\u6210\u5458\u63d0\u4f9b\u4e2a\u6027\u5316\u7684\u667a\u80fd\u5bb6\u5c45\u670d\u52a1\uff0c\u63a8\u52a8\u667a\u80fd\u5bb6\u5c45\u6280\u672f\u5411\u66f4\u52a0\u4eba\u6027\u5316\u3001\u5b89\u5168\u5316\u7684\u65b9\u5411\u53d1\u5c55\u3002\u901a\u8fc7\u5f15\u5165\u57fa\u4e8eMCP\u6280\u672f\u7684\u5927\u8bed\u8a00\u6a21\u578b\u96c6\u6210\u65b9\u6848\uff0c\u7cfb\u7edf\u80fd\u591f\u5728\u4e25\u683c\u7684\u6743\u9650\u63a7\u5236\u6846\u67b6\u4e0b\u7406\u89e3\u7528\u6237\u7684\u81ea\u7136\u8bed\u8a00\u6307\u4ee4\uff0c\u5b9e\u73b0\u66f4\u667a\u80fd\u3001\u66f4\u4fbf\u6377\u4e14\u66f4\u5b89\u5168\u7684\u8bbe\u5907\u63a7\u5236\u548c\u72b6\u6001\u67e5\u8be2\uff0c\u8ba9\u667a\u80fd\u5bb6\u5c45\u771f\u6b63\u8d70\u5165\u666e\u901a\u5bb6\u5ead\u7684\u65e5\u5e38\u751f\u6d3b\u3002</p>"},{"location":"background/#_5","title":"\u6280\u672f\u6311\u6218","text":"<p>\u591a\u7528\u6237\u8eab\u4efd\u8ba4\u8bc1\u548c\u6388\u6743\u673a\u5236\u7684\u8bbe\u8ba1\u662f\u672c\u9879\u76ee\u7684\u5173\u952e\u6280\u672f\u96be\u70b9\u4e4b\u4e00\uff0c\u9700\u8981\u786e\u4fdd\u7528\u6237\u8eab\u4efd\u7684\u771f\u5b9e\u6027\u548c\u5408\u6cd5\u6027\u3002\u8bbe\u5907\u6743\u9650\u7684\u7ec6\u7c92\u5ea6\u63a7\u5236\u548c\u7ba1\u7406\u4e5f\u662f\u91cd\u5927\u6311\u6218\uff0c\u7cfb\u7edf\u9700\u8981\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u548c\u4e60\u60ef\u8fdb\u884c\u4e2a\u6027\u5316\u6743\u9650\u5206\u914d\u3002\u540c\u65f6\uff0c\u8bbe\u5907\u4f7f\u7528\u8bb0\u5f55\u548c\u65e5\u5fd7\u7684\u5b89\u5168\u6027\u548c\u53ef\u9760\u6027\u4e5f\u662f\u9879\u76ee\u6210\u529f\u7684\u91cd\u8981\u4fdd\u969c\u3002</p> <p>MCP\u6280\u672f\u5141\u8bb8\u5927\u6a21\u578b\u901a\u8fc7\u9884\u5b9a\u4e49\u7684API\u63a5\u53e3\u8c03\u7528\u5404\u79cd\u5de5\u5177\u529f\u80fd\uff0c\u5b9e\u73b0\u5bf9\u5bb6\u5ead\u8bbe\u5907\u7684\u4fe1\u606f\u83b7\u53d6\u548c\u64cd\u4f5c\u63a7\u5236\u3002\u4e0e\u4f20\u7edf\u7684AI\u96c6\u6210\u65b9\u6848\u4e0d\u540c\uff0cMCP\u6846\u67b6\u7279\u522b\u5f3a\u8c03\u5b89\u5168\u6027\uff0c\u901a\u8fc7\u6743\u9650\u9a8c\u8bc1\u673a\u5236\uff0c\u4e25\u683c\u9650\u5236\u5927\u6a21\u578b\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u786e\u4fdd\u5373\u4f7f\u5728\u5927\u6a21\u578b\u51fa\u73b0\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u81f4\u672a\u6388\u6743\u7684\u8bbe\u5907\u64cd\u4f5c\u3002\u8fd9\u79cd\"\u96f6\u4fe1\u4efb\"\u7684\u5b89\u5168\u8bbe\u8ba1\u7406\u5ff5\uff0c\u4e3a\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf\u4e2d\u7684AI\u5e94\u7528\u63d0\u4f9b\u4e86\u575a\u5b9e\u7684\u5b89\u5168\u4fdd\u969c\u3002</p>"},{"location":"management/","title":"\u9879\u76ee\u7ba1\u7406\u8fc7\u7a0b\u4e0e\u5206\u5de5\u60c5\u51b5","text":""},{"location":"management/#_2","title":"\u804c\u8d23\u5212\u5206","text":"<ul> <li>\u5de5\u4f5c\u7edf\u7b79: \u9648\u955c\u9716</li> <li>\u539f\u578b\u8bbe\u8ba1: \u6768\u5353\u6f8e, \u674e\u4e16\u6e90</li> <li>\u524d\u7aef\u5f00\u53d1: \u949f\u9e23\u6d0b, \u674e\u4e16\u6e90</li> <li>\u6587\u6863\u548c PPT: \u738b\u4e00\u5eb7</li> <li>\u540e\u7aef\u5f00\u53d1: \u90d1\u5bb6\u8000, \u5c39\u4ed5\u7a0b, \u738b\u5b87, \u9648\u955c\u9716</li> <li>\u6570\u636e\u5e93\u5f00\u53d1: \u5c39\u51ef\u65cb</li> <li>\u6d4b\u8bd5: \u97e6\u767e\u5f3a,</li> <li>\u90e8\u7f72\u8fd0\u7ef4: \u6768\u5353\u6f8e, \u674e\u4e16\u6e90</li> </ul>"},{"location":"management/#_3","title":"\u65f6\u95f4\u7ebf","text":""},{"location":"management/#week-1-58-512","title":"Week 1: \u9879\u76ee\u542f\u52a8\u9636\u6bb5 (5.8 ~ 5.12)","text":"<ul> <li> <p>\u4f1a\u8bae\u4e0e\u89c4\u5212:</p> </li> <li> <p><code>\u542f\u52a8\u4f1a\u8bae</code>: \u9648\u955c\u9716</p> </li> <li><code>\u9879\u76ee\u5206\u5de5</code>: \u9648\u955c\u9716</li> <li> <p>\u8bbe\u8ba1\u4e0e\u9009\u578b:</p> </li> <li> <p><code>\u6838\u5fc3\u9700\u6c42\u51fa\u521d\u7a3f</code>: \u6768\u5353\u6f8e</p> </li> <li><code>\u6280\u672f\u6808\u8c03\u7814\u9009\u578b</code>: \u6768\u5353\u6f8e</li> <li><code>\u786e\u5b9a\u524d\u540e\u7aef\u5f00\u53d1\u6846\u67b6</code>: \u949f\u9e23\u6d0b</li> <li><code>\u786e\u5b9a\u540e\u7aef\u5f00\u53d1\u6846\u67b6</code>: \u90d1\u5bb6\u8000</li> </ul>"},{"location":"management/#week-2-513-519","title":"Week 2: \u8bbe\u8ba1\u9636\u6bb5 (5.13 ~ 5.19)","text":"<ul> <li> <p>\u8bbe\u8ba1\u4e0e\u6587\u6863:</p> </li> <li> <p><code>UI\u4e3b\u754c\u9762\u8bbe\u8ba1</code>: \u674e\u4e16\u6e90</p> </li> <li><code>\u63d0\u4ea4\u5b8c\u6574\u9700\u6c42\u6587\u6863</code>: \u6768\u5353\u6f8e, \u674e\u4e16\u6e90</li> <li><code>\u7cfb\u7edf\u67b6\u6784\u51fa\u521d\u7a3f</code>: \u6768\u5353\u6f8e</li> <li> <p>\u5f00\u53d1\u51c6\u5907:</p> </li> <li> <p><code>\u51c6\u5907\u673a\u5668</code>: \u9648\u955c\u9716</p> </li> <li><code>\u524d\u540e\u7aef\u63a5\u53e3\u534f\u5b9a</code>: \u949f\u9e23\u6d0b, \u90d1\u5bb6\u8000</li> <li><code>\u6570\u636e\u5e93\u9009\u578b</code>: \u5c39\u51ef\u65cb</li> </ul>"},{"location":"management/#week-3-520-526","title":"Week 3: \u8bbe\u8ba1\u8f6c\u5f00\u53d1 (5.20 ~ 5.26)","text":"<ul> <li> <p>\u67b6\u6784\u4e0e\u914d\u7f6e:</p> </li> <li> <p><code>\u7cfb\u7edf\u67b6\u6784\u51fa\u6b63\u5f0f\u7a3f</code>: \u6768\u5353\u6f8e</p> </li> <li><code>\u524d\u7aef\u5f00\u53d1\u73af\u5883\u914d\u7f6e</code>: \u949f\u9e23\u6d0b</li> <li><code>\u540e\u7aef\u5f00\u53d1\u73af\u5883\u914d\u7f6e</code>: \u90d1\u5bb6\u8000</li> <li><code>\u670d\u52a1\u5668\u51c6\u5907</code>: \u9648\u955c\u9716</li> <li> <p>\u540e\u7aef\u4e0e\u6570\u636e\u5e93:</p> </li> <li> <p><code>\u8bbe\u8ba1\u540e\u7aef\u6a21\u5757</code>: \u90d1\u5bb6\u8000</p> </li> <li><code>\u6570\u636e\u5e93\u8bbe\u8ba1\u4e0e\u5b9e\u73b0</code>: \u5c39\u51ef\u65cb</li> </ul>"},{"location":"management/#week-4-527-62","title":"Week 4: \u6838\u5fc3\u529f\u80fd\u5f00\u53d1 (5.27 ~ 6.2)","text":"<ul> <li> <p>UI \u4e0e\u754c\u9762:</p> </li> <li> <p><code>\u63d0\u4ea4\u5b8c\u6574UI\u8bbe\u8ba1</code>: \u674e\u4e16\u6e90</p> </li> <li><code>\u4e3b\u754c\u9762\u5f00\u53d1</code>: \u674e\u4e16\u6e90, \u949f\u9e23\u6d0b, \u738b\u4e00\u5eb7</li> <li> <p>\u6838\u5fc3\u6a21\u5757\u5f00\u53d1:</p> </li> <li> <p><code>\u7528\u6237\u7ba1\u7406\u6a21\u5757\u5f00\u53d1</code>: \u90d1\u5bb6\u8000</p> </li> <li><code>\u8bbe\u5907\u7ba1\u7406\u6a21\u5757\u5f00\u53d1</code>: \u5c39\u4ed5\u7a0b</li> <li><code>\u6743\u9650\u7ba1\u7406\u6a21\u5757\u5f00\u53d1</code>: \u738b\u5b87</li> <li> <p>\u6570\u636e\u4e0e\u6d4b\u8bd5:</p> </li> <li> <p><code>\u51c6\u5907\u6d4b\u8bd5\u6570\u636e</code>: \u5c39\u51ef\u65cb</p> </li> <li><code>\u6570\u636e\u5e93\u63a8\u9001\u5230\u670d\u52a1\u5668</code>: \u97e6\u767e\u5f3a</li> <li><code>\u5355\u5143\u6d4b\u8bd5</code>: \u97e6\u767e\u5f3a</li> </ul>"},{"location":"management/#week-4-5-63-69","title":"Week 4 &amp; 5: \u529f\u80fd\u5b8c\u5584\u4e0e\u6d4b\u8bd5 (6.3 ~ 6.9)","text":"<ul> <li> <p>\u5b8c\u5584\u4e0e\u4fee\u590d:</p> </li> <li> <p><code>\u754c\u9762\u5b8c\u5584</code>: \u949f\u9e23\u6d0b, \u674e\u4e16\u6e90</p> </li> <li><code>\u7a0b\u5e8f\u6d4b\u8bd5\u4e0e\u529f\u80fd\u8865\u5145</code>: \u738b\u5b87, \u5c39\u4ed5\u7a0b</li> <li><code>Bug\u4fee\u590d</code>: \u90d1\u5bb6\u8000, \u5c39\u4ed5\u7a0b, \u738b\u5b87</li> <li> <p>\u6587\u6863\u4e0e\u89c4\u8303:</p> </li> <li> <p><code>\u6587\u6863\u5b8c\u5584\u548c\u89c4\u8303\u5316</code>: \u9648\u955c\u9716</p> </li> </ul>"},{"location":"management/#week-5-610-616","title":"Week 5: \u51c6\u5907\u6f14\u793a (6.10 ~ 6.16)","text":"<ul> <li> <p>\u6f14\u793a\u51c6\u5907:</p> </li> <li> <p><code>\u51c6\u5907\u5c55\u793aPPT</code>: \u738b\u4e00\u5eb7</p> </li> <li><code>MCP\u670d\u52a1\u5668\u5f00\u53d1</code>: \u9648\u955c\u9716</li> <li> <p>\u6d4b\u8bd5\u4e0e\u90e8\u7f72:</p> </li> <li> <p><code>Bug\u4fee\u590d</code>: \u90d1\u5bb6\u8000, \u5c39\u4ed5\u7a0b, \u738b\u5b87</p> </li> <li><code>\u6253\u5305\u90e8\u7f72</code>: \u6768\u5353\u6f8e, \u674e\u4e16\u6e90</li> <li><code>\u96c6\u6210\u6d4b\u8bd5</code>: \u97e6\u767e\u5f3a</li> </ul>"},{"location":"management/#week-6-617","title":"Week 6: \u9879\u76ee\u6536\u5c3e (6.17 ~ )","text":"<ul> <li> <p>\u603b\u7ed3\u4e0e\u62a5\u544a:</p> </li> <li> <p><code>\u6536\u96c6\u5fc3\u5f97</code>: \u5168\u4f53\u6210\u5458</p> </li> <li><code>\u64b0\u5199\u62a5\u544a</code>: \u9648\u955c\u9716</li> <li> <p>\u53cd\u9988\u4e0e\u8fed\u4ee3:</p> </li> <li> <p><code>\u7ed3\u5408\u53cd\u9988\u8c03\u6574\u8bbe\u8ba1</code>: \u6768\u5353\u6f8e, \u674e\u4e16\u6e90</p> </li> <li><code>\u7ed3\u5408\u53cd\u9988\u8c03\u6574\u4ee3\u7801</code>: \u674e\u4e16\u6e90, \u90d1\u5bb6\u8000</li> <li><code>\u7ed3\u5408\u53cd\u9988\u8c03\u6574\u6570\u636e\u5e93</code>: \u5c39\u51ef\u65cb</li> <li> <p>\u6700\u7ec8\u6d4b\u8bd5:</p> </li> <li> <p><code>\u4e0a\u7ebf\u6d4b\u8bd5</code>: \u97e6\u767e\u5f3a</p> </li> </ul>"},{"location":"management/#_4","title":"\u98ce\u9669\u7ba1\u7406","text":"<p>\u5728\u9879\u76ee\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u8bc6\u522b\u4e86\u4ee5\u4e0b\u4e3b\u8981\u98ce\u9669\u5e76\u5236\u5b9a\u4e86\u76f8\u5e94\u7684\u5e94\u5bf9\u7b56\u7565\uff1a</p> \u98ce\u9669\u63cf\u8ff0\u53ef\u80fd\u6027\u5f71\u54cd\u7a0b\u5ea6\u5e94\u5bf9\u7b56\u7565 \u9700\u6c42\u7406\u89e3\u504f\u5dee\u4e2d\u9ad81. \u5b9a\u671f\u786e\u8ba4\u9700\u6c42\u7406\u89e32. \u7f16\u5199\u8be6\u7ec6\u7684\u9700\u6c42\u6587\u6863\u5e76\u83b7\u5f97\u786e\u8ba43. \u4f7f\u7528\u539f\u578b\u5feb\u901f\u9a8c\u8bc1\u9700\u6c42\u7406\u89e3 \u6280\u672f\u96be\u70b9\u7a81\u7834\u9ad8\u9ad81. \u63d0\u524d\u8fdb\u884c\u6280\u672f\u8c03\u7814\u4e0e\u53ef\u884c\u6027\u5206\u67902. \u5236\u5b9a\u6280\u672f\u5907\u9009\u65b9\u68483. \u9002\u65f6\u5bfb\u6c42\u6280\u672f\u6307\u5bfc \u8fdb\u5ea6\u5ef6\u8bef\u4e2d\u4e2d1. \u5408\u7406\u89c4\u5212\u4efb\u52a1\u4e0e\u65f6\u95f4\u7f13\u51b22. \u6bcf\u5468\u8fdb\u884c\u8fdb\u5ea6\u5ba1\u68383. \u5fc5\u8981\u65f6\u8c03\u6574\u4efb\u52a1\u4f18\u5148\u7ea7 \u56e2\u961f\u6210\u5458\u914d\u5408\u4e0d\u7545\u4f4e\u4e2d1. \u5efa\u7acb\u6709\u6548\u7684\u6c9f\u901a\u673a\u52362. \u660e\u786e\u8d23\u4efb\u5206\u5de53. \u5b9a\u671f\u56e2\u961f\u5efa\u8bbe\u6d3b\u52a8 \u7cfb\u7edf\u6027\u80fd\u95ee\u9898\u4e2d\u9ad81. \u524d\u671f\u67b6\u6784\u8bbe\u8ba1\u91cd\u89c6\u6027\u80fd\u56e0\u7d202. \u5b9a\u671f\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd53. \u9884\u7559\u6027\u80fd\u4f18\u5316\u65f6\u95f4"},{"location":"management/#_5","title":"\u8d28\u91cf\u4fdd\u969c\u63aa\u65bd","text":"<p>\u4e3a\u786e\u4fdd\u9879\u76ee\u8d28\u91cf\uff0c\u6211\u4eec\u91c7\u53d6\u4e86\u4ee5\u4e0b\u63aa\u65bd\uff1a</p> <ol> <li> <p>\u4ee3\u7801\u8d28\u91cf\u7ba1\u7406</p> </li> <li> <p>\u5236\u5b9a\u5e76\u9075\u5faa\u7f16\u7801\u89c4\u8303</p> </li> <li>\u5b9e\u65bd\u4ee3\u7801\u5ba1\u67e5\u673a\u5236</li> <li> <p>\u6d4b\u8bd5\u7b56\u7565</p> </li> <li> <p>\u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u6838\u5fc3\u529f\u80fd</p> </li> <li>\u7cfb\u7edf\u6d4b\u8bd5\u786e\u4fdd\u6574\u4f53\u529f\u80fd\u6b63\u5e38</li> <li>\u7528\u6237\u9a8c\u6536\u6d4b\u8bd5\u786e\u4fdd\u6ee1\u8db3\u9700\u6c42</li> <li> <p>\u7248\u672c\u63a7\u5236</p> </li> <li> <p>\u4f7f\u7528 Git \u7ba1\u7406\u6e90\u4ee3\u7801</p> </li> <li>\u89c4\u8303\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f</li> <li> <p>\u6587\u6863\u7ba1\u7406</p> </li> <li> <p>\u5efa\u7acb\u7edf\u4e00\u7684\u6587\u6863\u6a21\u677f</p> </li> <li>\u5b9a\u671f\u66f4\u65b0\u9879\u76ee\u6587\u6863</li> </ol>"},{"location":"management/#_6","title":"\u8fdb\u5ea6\u76d1\u63a7\u4e0e\u62a5\u544a","text":"<p>\u9879\u76ee\u91c7\u7528\u4ee5\u4e0b\u673a\u5236\u8fdb\u884c\u8fdb\u5ea6\u76d1\u63a7\u4e0e\u62a5\u544a\uff1a</p> <ol> <li> <p>\u65e5\u5e38\u8fdb\u5ea6\u8ddf\u8e2a</p> </li> <li> <p>\u501f\u52a9\u5fae\u4fe1\u3001\u98de\u4e66\u7b49\u5e73\u53f0\uff0c\u968f\u65f6\u6c47\u62a5\u8fdb\u5ea6\u4e0e\u95ee\u9898</p> </li> <li>\u4f7f\u7528\u4efb\u52a1\u770b\u677f\u53ef\u89c6\u5316\u5c55\u793a\u4efb\u52a1\u72b6\u6001</li> <li> <p>\u5468\u8fdb\u5ea6\u8bc4\u5ba1</p> </li> <li> <p>\u6bcf\u5468\u65e5\u4e0b\u5348\u8fdb\u884c\u5468\u8fdb\u5ea6\u603b\u7ed3\u4f1a\u8bae</p> </li> <li>\u56de\u987e\u672c\u5468\u5b8c\u6210\u60c5\u51b5\uff0c\u8ba1\u5212\u4e0b\u5468\u4efb\u52a1</li> <li>\u66f4\u65b0\u9879\u76ee\u71c3\u5c3d\u56fe</li> <li> <p>\u91cc\u7a0b\u7891\u68c0\u67e5\u70b9</p> </li> <li> <p>\u6bcf\u4e2a\u9636\u6bb5\u7ed3\u675f\u8fdb\u884c\u91cc\u7a0b\u7891\u68c0\u67e5</p> </li> <li>\u786e\u8ba4\u4ea4\u4ed8\u7269\u8d28\u91cf\u4e0e\u5b8c\u6574\u6027</li> <li>\u5fc5\u8981\u65f6\u8c03\u6574\u540e\u7eed\u8ba1\u5212</li> </ol>"},{"location":"management/#_7","title":"\u9879\u76ee\u53d8\u66f4\u7ba1\u7406","text":"<p>\u5bf9\u4e8e\u9879\u76ee\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u9700\u6c42\u53d8\u66f4\u6216\u8303\u56f4\u8c03\u6574\uff0c\u6211\u4eec\u5236\u5b9a\u4e86\u4ee5\u4e0b\u6d41\u7a0b\uff1a</p> <ol> <li>\u63d0\u4ea4\u53d8\u66f4\u7533\u8bf7\uff0c\u8bf4\u660e\u53d8\u66f4\u5185\u5bb9\u3001\u539f\u56e0\u53ca\u5f71\u54cd</li> <li>\u9879\u76ee\u7ecf\u7406\u8bc4\u4f30\u53d8\u66f4\u5f71\u54cd\uff08\u65f6\u95f4\u3001\u8d44\u6e90\u3001\u8d28\u91cf\uff09</li> <li>\u56e2\u961f\u8ba8\u8bba\u53d8\u66f4\u53ef\u884c\u6027\u4e0e\u5b9e\u65bd\u65b9\u6848</li> <li>\u53d8\u66f4\u65b9\u6848\u786e\u8ba4\u540e\u66f4\u65b0\u9879\u76ee\u8ba1\u5212</li> <li>\u6267\u884c\u53d8\u66f4\u5e76\u8ffd\u8e2a\u6548\u679c</li> </ol>"},{"location":"management/#_8","title":"\u56e2\u961f\u534f\u4f5c\u4e0e\u6c9f\u901a","text":""},{"location":"management/#_9","title":"\u534f\u4f5c\u5de5\u5177","text":"<ul> <li>\u4ee3\u7801\u7ba1\u7406\uff1aGitHub</li> <li>\u6587\u6863\u534f\u4f5c\uff1a\u98de\u4e66\u6587\u6863</li> <li>\u4efb\u52a1\u7ba1\u7406\uff1a\u98de\u4e66\u591a\u7ef4\u8868\u683c</li> <li>\u6c9f\u901a\u5de5\u5177\uff1a\u5fae\u4fe1\u7fa4\u3001\u98de\u4e66\u4f1a\u8bae</li> </ul>"},{"location":"management/#_10","title":"\u4f1a\u8bae\u673a\u5236","text":"<ul> <li>\u5468\u603b\u7ed3\u4f1a: \u6bcf\u5468\u65e5\u665a\u4e0a\uff0c\u7528\u4e8e\u603b\u7ed3\u672c\u5468\u5de5\u4f5c\u3001\u540c\u6b65\u6574\u4f53\u8fdb\u5ea6\u548c\u89c4\u5212\u4e0b\u5468\u4efb\u52a1\u3002</li> <li>\u7ebf\u4e0b\u4efb\u52a1\u5bf9\u63a5: \u6bcf\u5468\u4e00\u3001\u5468\u4e09\u7684\u8f6f\u4ef6\u5de5\u7a0b\u8bfe\u4e0a\uff0c\u8fdb\u884c\u9762\u5bf9\u9762\u7684\u4efb\u52a1\u6c9f\u901a\u548c\u5177\u4f53\u5de5\u4f5c\u5b89\u6392\u3002</li> <li>\u6280\u672f\u8ba8\u8bba\u4f1a: \u6839\u636e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u5b9e\u9645\u9700\u8981\u968f\u65f6\u7ec4\u7ec7\uff0c\u89e3\u51b3\u5177\u4f53\u6280\u672f\u96be\u9898\u3002</li> </ul>"},{"location":"management/#_11","title":"\u8bc4\u8bba\u673a\u5236","text":"<ul> <li>\u4e3a\u4e86\u65b9\u4fbf\u8fdb\u5ea6\u76d1\u63a7\u4ee5\u53ca\u529f\u80fd\u7ef4\u62a4\uff0c\u6211\u4eec\u901a\u8fc7\u98de\u4e66\u6587\u6863\u63d0\u4f9b\u7684\u8bc4\u8bba\u529f\u80fd\u53ca\u65f6\u4ea4\u6d41</li> <li>\u5728\u63d0\u4ea4\u9700\u6c42\u65f6\uff0c\u6dfb\u52a0\u8bc4\u8bba\uff0c\u63d0\u9192\u5f00\u53d1\u4eba\u5458</li> <li>\u5728\u53d1\u73b0 bug \u65f6\uff0c\u6dfb\u52a0\u8bc4\u8bba\uff0c\u65b9\u4fbf\u53ca\u65f6\u7ef4\u62a4</li> <li>\u89e3\u51b3\u95ee\u9898\u6216\u8005\u5b8c\u6210\u4efb\u52a1\u540e\uff0c\u6807\u8bb0\u8bc4\u8bba\u4e3a done\uff0c\u65b9\u4fbf\u76d1\u63a7\u6574\u4f53\u9879\u76ee\u8fdb\u5ea6</li> </ul> <p>\u98de\u4e66\u6587\u6863\u4e3a\u56e2\u961f\u534f\u4f5c\u63d0\u4f9b\u4e86\u975e\u5e38\u5927\u7684\u5e2e\u52a9\uff0c\u6210\u5458\u53ef\u4ee5\u968f\u65f6\u5728\u6587\u6863\u4e2d\u5708\u70b9\u6dfb\u52a0\u8bc4\u8bba\uff0c\u63d0\u51fa\u95ee\u9898\uff1a</p> <p></p>"},{"location":"management/#_12","title":"\u9879\u76ee\u6210\u679c\u4e0e\u7ecf\u9a8c\u603b\u7ed3","text":""},{"location":"management/#_13","title":"\u9879\u76ee\u4ea4\u4ed8\u7269","text":"<ul> <li>\u5b8c\u6574\u7684\u6e90\u4ee3\u7801\u4e0e\u53ef\u6267\u884c\u7a0b\u5e8f</li> <li>\u7cfb\u7edf\u90e8\u7f72\u6587\u6863\u4e0e\u7528\u6237\u624b\u518c</li> <li>\u8bbe\u8ba1\u6587\u6863\u4e0e\u6280\u672f\u8bf4\u660e</li> <li>\u6d4b\u8bd5\u62a5\u544a\u4e0e\u95ee\u9898\u6e05\u5355</li> </ul>"},{"location":"management/#_14","title":"\u7ecf\u9a8c\u603b\u7ed3","text":"<ul> <li>\u6280\u672f\u9009\u578b\u5e94\u8003\u8651\u56e2\u961f\u719f\u6089\u5ea6\u4e0e\u5b66\u4e60\u66f2\u7ebf</li> <li>\u654f\u6377\u5f00\u53d1\u65b9\u6cd5\u5728\u5b66\u751f\u9879\u76ee\u4e2d\u7684\u5e94\u7528\u6548\u679c\u826f\u597d</li> <li>\u6301\u7eed\u96c6\u6210\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\u4e0e\u8d28\u91cf</li> <li>\u524d\u671f\u9700\u6c42\u5206\u6790\u4e0e\u8bbe\u8ba1\u7684\u91cd\u8981\u6027</li> <li>\u591a\u6a21\u5757\u534f\u540c\u5f00\u53d1\u4e2d\u7684\u63a5\u53e3\u89c4\u8303\u95ee\u9898</li> </ul>"},{"location":"requirements/","title":"\u9700\u6c42\u5206\u6790\u4e0e\u529f\u80fd\u70b9","text":""},{"location":"requirements/#_1","title":"\u529f\u80fd\u9700\u6c42\u5217\u8868","text":""},{"location":"requirements/#_2","title":"\u7528\u6237","text":""},{"location":"requirements/#_3","title":"\u65b0\u7528\u6237\u6ce8\u518c","text":"<ul> <li> \u901a\u8fc7\u8d26\u6237\u548c\u5bc6\u7801\u6ce8\u518c</li> </ul>"},{"location":"requirements/#_4","title":"\u7528\u6237\u767b\u5f55","text":"<ul> <li> \u901a\u8fc7\u8d26\u6237\u548c\u5bc6\u7801\u767b\u5f55</li> </ul>"},{"location":"requirements/#_5","title":"\u7ba1\u7406\u5458\u8d26\u6237","text":"<ul> <li> \u7cfb\u7edf\u4f1a\u5185\u7f6e\u7ba1\u7406\u5458\u8d26\u6237</li> <li> \u7ba1\u7406\u5458\u8d26\u6237\u62e5\u6709\u6240\u6709\u8bbe\u5907\u7684\u6700\u9ad8\u6743\u9650</li> <li> \u7ba1\u7406\u5458\u53ef\u4ee5\u5c06\u666e\u901a\u7528\u6237\u8f6c\u5316\u4e3a\u7ba1\u7406\u5458</li> </ul>"},{"location":"requirements/#_6","title":"\u7528\u6237\u5c5e\u6027","text":"<ul> <li> \u7528\u6237\u62e5\u6709\u3010\u90ae\u7bb1\u3011\u3001\u3010\u5462\u79f0\u3011\u3001\u3010\u8d26\u6237\u3011\u3001\u3010\u5bc6\u7801\u3011\u7b49\u4fe1\u606f</li> <li> \u4e0a\u8ff0\u4fe1\u606f\u53ef\u4ee5\u88ab\u67e5\u770b\u548c\u4fee\u6539</li> </ul>"},{"location":"requirements/#_7","title":"\u6743\u9650","text":"<p>\u6743\u9650\u5206\u4e3a 6 \u7ea7\uff0c\u9ad8\u7ea7\u522b\u7684\u6743\u9650\u53ef\u4ee5\u4f7f\u7528\u4f4e\u7ea7\u522b\u7684\u6240\u6709\u529f\u80fd</p> <ul> <li> <p>\u3010\u4e0d\u53ef\u89c1\u3011</p> </li> <li> <p>\u6700\u4f4e\u7684\u6743\u9650\uff0c\u8bbe\u5907\u5217\u8868\u4e2d\u770b\u4e0d\u5230\u8be5\u8bbe\u5907</p> </li> <li>\u4e0d\u80fd\u5bf9\u8bbe\u5907\u505a\u4efb\u4f55\u64cd\u4f5c</li> <li>\u4e0d\u4f1a\u6536\u5230\u8be5\u8bbe\u5907\u7684\u4efb\u4f55\u6d88\u606f</li> <li> <p>\u3010\u53ef\u89c1\u3011</p> </li> <li> <p>\u53ef\u4ee5\u67e5\u770b\u8bbe\u5907\u6982\u89c8</p> </li> <li>\u4e0d\u80fd\u4f7f\u7528\u8bbe\u5907</li> <li>\u63a5\u6536\u8bbe\u5907\u7684\u6dfb\u52a0\u3001\u79fb\u9664\u3001\u6545\u969c\u6d88\u606f</li> <li> <p>\u3010\u53ef\u4f7f\u7528\u3011</p> </li> <li> <p>\u53ef\u4ee5\u7b80\u5355\u4f7f\u7528\u8bbe\u5907</p> </li> <li>\u4e0d\u80fd\u6267\u884c\u654f\u611f\u64cd\u4f5c\uff08\u6bd4\u5982\u8c03\u6574\u8def\u7531\u5668\u7f51\u7edc\u914d\u7f6e\uff0c\u6253\u5f00\u5bb6\u7528\u4fdd\u9669\u7bb1\u3001\u4f7f\u7528\u8fd0\u884c\u4e2d\u7684\u6d17\u8863\u673a\uff09</li> <li>\u5173\u4e8e\u654f\u611f\u6307\u4ee4\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u89e3\u51b3</li> <li> <p>\u3010\u53ef\u914d\u7f6e\u3011</p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u6240\u6709\u529f\u80fd</p> </li> <li> <p>\u3010\u53ef\u76d1\u89c6\u3011</p> </li> <li> <p>\u53ef\u4ee5\u67e5\u770b\u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u4f7f\u7528\u8bb0\u5f55\uff0c\u8bbe\u5907\u8fd0\u884c\u65e5\u5fd7\u7b49</p> </li> <li> <p>\u3010\u53ef\u7ba1\u7406\u3011</p> </li> <li> <p>\u6700\u9ad8\u6743\u9650</p> </li> <li>\u7ba1\u7406\u5458\u9ed8\u8ba4\u6301\u6709</li> <li>\u62e5\u6709\u8be5\u6743\u9650\u5141\u8bb8\u66f4\u6539\u5176\u4ed6\u7528\u6237\u5bf9\u4e8e\u8be5\u8bbe\u5907\u7684\u6743\u9650</li> </ul>"},{"location":"requirements/#_8","title":"\u6743\u9650\u5206\u7ea7","text":"<ul> <li> \u7528\u6237\u5bf9\u4e8e\u8bbe\u5907\u6743\u9650\u5e94\u8be5\u5206\u7ea7\uff0c\u6bd4\u5982\u5206\u4e3a\u3010\u4e0d\u53ef\u89c1\u3011\u3001\u3010\u53ef\u89c1\u3011\u3001\u3010\u53ef\u4f7f\u7528\u3011\u3001\u3010\u53ef\u914d\u7f6e\u3011\u3001\u3010\u53ef\u76d1\u89c6\u3011\u3001\u3010\u53ef\u7ba1\u7406\u3011\u7b49</li> <li> \u4e0d\u540c\u7528\u6237\u5bf9\u4e8e\u540c\u4e00\u8bbe\u5907\u7684\u6743\u9650\u6709\u533a\u5206\uff0c\u540c\u4e00\u7528\u6237\u5bf9\u4e8e\u4e0d\u540c\u8bbe\u5907\u7684\u6743\u9650\u6709\u533a\u5206</li> <li> \u7ba1\u7406\u5458\u5bf9\u4e8e\u4efb\u4f55\u8bbe\u5907\u7684\u6743\u9650\u90fd\u662f\u3010\u53ef\u7ba1\u7406\u3011\uff0c\u4e0d\u53ef\u88ab\u4fee\u6539</li> </ul>"},{"location":"requirements/#_9","title":"\u5206\u7ec4","text":"<ul> <li> \u8be5\u529f\u80fd\u53ea\u9762\u5411\u7ba1\u7406\u5458</li> <li> \u53ef\u4ee5\u521b\u5efa\u7528\u6237\u7ec4\u548c\u8bbe\u5907\u7ec4</li> <li> \u53ef\u4ee5\u4e3a\u7528\u6237\u7ec4\u79fb\u5165\u79fb\u51fa\u7528\u6237\uff0c\u53ef\u4ee5\u4e3a\u8bbe\u5907\u7ec4\u79fb\u5165\u79fb\u51fa\u8bbe\u5907</li> <li> \u7528\u6237\u7ec4\u548c\u8bbe\u5907\u7ec4\u540c\u6837\u63d0\u4f9b\u6743\u9650\u5206\u7ea7\uff0c\u652f\u6301\u6743\u9650\u7684\u67e5\u770b\u4e0e\u4fee\u6539</li> </ul>"},{"location":"requirements/#_10","title":"\u8bbe\u5907","text":""},{"location":"requirements/#_11","title":"\u8bbe\u5907\u5c5e\u6027","text":"<ul> <li> \u62e5\u6709\u3010ip+ \u7aef\u53e3\u3011\u3001\u3010\u540d\u79f0\u3011\u3001\u3010\u54c1\u724c\u578b\u53f7\u3011\u3001\u3010\u4f7f\u7528\u5e74\u9650\u3011\u3001\u3010\u8bbe\u5907\u7c7b\u578b\u3011\u7b49\u57fa\u672c\u4fe1\u606f\uff0c\u5141\u8bb8\u4fee\u6539</li> <li> \u62e5\u6709\u3010\u8fd0\u884c\u65f6\u957f\u3011\u3001\u3010\u529f\u8017\u3011\u3001\u3010\u72b6\u6001\u3011\u7b49\u8fd0\u884c\u4fe1\u606f\uff0c\u8fd9\u4f9d\u6258\u4e8e\u4e0d\u540c\u8bbe\u5907\uff0c\u6bd4\u5982\u7a7a\u8c03\u9700\u8981\u6709\u6e29\u5ea6\u4fe1\u606f</li> <li> \u62e5\u6709\u3010\u65e5\u5fd7\u3011\u3001\u3010\u4f7f\u7528\u8bb0\u5f55\u3011\u7b49\u957f\u8bb0\u5f55\u4fe1\u606f</li> </ul>"},{"location":"requirements/#_12","title":"\u6dfb\u52a0\u5220\u9664\u8bbe\u5907","text":"<ul> <li> \u7ba1\u7406\u5458\u53ef\u4ee5\u6dfb\u52a0\u8bbe\u5907</li> <li> \u53ef\u4ee5\u901a\u8fc7 ip+ \u7aef\u53e3\u6dfb\u52a0\u8bbe\u5907</li> <li> \u53ef\u4ee5\u901a\u8fc7\u5c40\u57df\u7f51\u53d1\u73b0\u5e76\u6dfb\u52a0\u8bbe\u5907</li> <li> \u7ba1\u7406\u5458\u53ef\u4ee5\u5220\u9664\u8bbe\u5907</li> </ul>"},{"location":"requirements/#_13","title":"\u8bbe\u5907\u4f7f\u7528","text":"<ul> <li> \u8981\u6c42\u62e5\u6709\u5408\u9002\u6743\u9650</li> <li> \u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u64cd\u4f5c\u8bbe\u5907\uff0c\u4f8b\u5982\u51b0\u7bb1\u901a\u7535\u3001\u65ad\u7535\uff0c\u8c03\u6574\u7a7a\u8c03\u6e29\u5ea6</li> <li> \u53ef\u4ee5\u67e5\u770b\u8bbe\u5907\u5c5e\u6027</li> </ul>"},{"location":"requirements/#_14","title":"\u8bbe\u5907\u76d1\u63a7","text":"<ul> <li> \u8bb0\u5f55\u8bbe\u5907\u7684\u65e5\u5fd7</li> <li> \u6536\u96c6\u8bbe\u5907\u4fe1\u606f\uff0c\u4f8b\u5982\u529f\u8017\uff0c\u662f\u5426\u5728\u7ebf\uff0c\u72b6\u6001\uff0c\u4f7f\u7528\u8bb0\u5f55\u7b49</li> </ul>"},{"location":"requirements/#_15","title":"\u667a\u80fd\u52a9\u624b","text":"<ul> <li> \u4f7f\u7528 MCP \u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u667a\u80fd\u66f4\u4fbf\u6377\u7684\u4ea4\u4e92\u4f53\u9a8c</li> <li> \u53ef\u4ee5\u901a\u8fc7\u804a\u5929\u7684\u65b9\u5f0f\u4ea4\u4e92</li> <li> \u7528\u6237\u65e0\u6cd5\u901a\u8fc7\u667a\u80fd\u52a9\u624b\u6267\u884c\u8d8a\u6743\u884c\u4e3a</li> </ul>"},{"location":"requirements/#_16","title":"\u975e\u529f\u80fd\u9700\u6c42\u5217\u8868","text":""},{"location":"requirements/#_17","title":"\u517c\u5bb9\u6027","text":""},{"location":"requirements/#_18","title":"\u90e8\u7f72\u65b9\u5f0f","text":"<ul> <li> \u652f\u6301 windows</li> <li> \u652f\u6301 ubuntu\uff08\u6216\u8005\u4efb\u610f linux \u7cfb\u7edf\uff09\uff08\u4e0d\u4f7f\u7528\u4efb\u4f55\u5bb9\u5668\uff09</li> <li> \u652f\u6301 docker</li> </ul>"},{"location":"requirements/#_19","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ul> <li> \u652f\u6301\u5b89\u5353</li> <li> \u652f\u6301\u82f9\u679c</li> <li> \u652f\u6301 windows</li> <li> \u652f\u6301\u6d4f\u89c8\u5668\u7f51\u9875</li> <li> \u652f\u6301 linux</li> </ul>"},{"location":"requirements/#_20","title":"\u53ef\u9760\u6027","text":"<ul> <li> \u91cd\u8981\u6570\u636e\u6709\u5907\u4efd\uff0c\u53ef\u6062\u590d</li> <li> \u65ad\u7535\u7b49\u73af\u5883\u539f\u56e0\u7cfb\u7edf\u505c\u6b62\u5de5\u4f5c\u65f6\uff0c\u73af\u5883\u6062\u590d\u540e\u9700\u81ea\u52a8\u6062\u590d\u670d\u52a1</li> <li> \u6570\u636e\u5168\u9762\u672c\u5730\u5316\uff0c\u4fdd\u62a4\u9690\u79c1</li> </ul>"},{"location":"requirements/#_21","title":"\u6613\u7528\u6027","text":"<ul> <li> \u5ba2\u6237\u7aef\u754c\u9762\u9700\u8981\u8db3\u591f\u6613\u7528</li> <li> \u9879\u76ee\u672c\u5730\u5316\u90e8\u7f72\u8db3\u591f\u7b80\u5355\uff0c\u63d0\u4f9b\u811a\u672c</li> </ul>"},{"location":"requirements/#_22","title":"\u5e2e\u52a9","text":"<ul> <li> \u4e3a\u7528\u6237\u63d0\u4f9b\u7cfb\u7edf\u4f7f\u7528\u8bf4\u660e</li> </ul>"},{"location":"design/","title":"\u8bbe\u8ba1\u6982\u89c8","text":""},{"location":"design/#_1","title":"\u8f6f\u4ef6\u8bbe\u8ba1","text":"<p>\u8fc7\u7a0b\u3001\u5173\u952e\u6280\u672f\u3001\u793a\u4f8b\u56fe\u8868\u3001\u6570\u636e\u4e0e\u529f\u80fd\u8bbe\u8ba1\u3001\u754c\u9762\u4e0e\u4ee3\u7801\u7b49</p>"},{"location":"design/#_2","title":"\u7cfb\u7edf\u603b\u4f53\u67b6\u6784","text":"<p>\u7cfb\u7edf\u7684\u603b\u4f53\u67b6\u6784 UML \u5982\u4e0a\uff0c\u603b\u4f53\u56db\u4e2a\u533a\u57df\uff1a</p> <p></p>"},{"location":"design/#_3","title":"\u7528\u6237","text":"<ul> <li>\u4e0d\u540c\u7528\u6237\u62e5\u6709\u4e0d\u540c\u8eab\u4efd\uff08\u7ba1\u7406\u5458\u4e0e\u666e\u901a\u7528\u6237\uff09\u3001\u4e0d\u540c\u7684\u6743\u9650</li> <li>\u4e0d\u540c\u7c7b\u522b\u7684\u7528\u6237\u4f7f\u7528\u540c\u4e00\u5957\u524d\u7aef</li> </ul> <p>\u8fd9\u4e2a\u90e8\u5206\u4e25\u683c\u6765\u8bb2\u4e0d\u5c5e\u4e8e\u7cfb\u7edf\u67b6\u6784\u90e8\u5206\uff0c\u53ea\u662f\u4e3a\u4e86\u4f7f\u5f97\u56fe\u8868\u5173\u7cfb\u66f4\u8fde\u8d2f\u6dfb\u52a0\uff0c\u4e0d\u8fc7\u591a\u8d58\u8ff0</p>"},{"location":"design/#_4","title":"\u524d\u7aef\u670d\u52a1","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u4f7f\u7528\u4e86\u4e24\u79cd\u6280\u672f\u8fdb\u884c\u5f00\u53d1\uff0c\u524d\u7aef\u7684 UI \u662f\u4f7f\u7528 Figma \u8bbe\u8ba1</p>"},{"location":"design/#flutter","title":"Flutter \u6846\u67b6","text":"<p>Flutter \u91c7\u7528 BLoC \u54cd\u5e94\u5f0f\u67b6\u6784\uff0c\u5177\u6709\u4ee5\u4e0b\u4f18\u52bf\uff1a</p> <ul> <li>\u5355\u5411\u6570\u636e\u6d41\uff1aEvent \u2192 BLoC \u2192 State \u2192 UI</li> <li>\u9ad8\u53ef\u6d4b\u8bd5\u6027\uff1a\u4e1a\u52a1\u903b\u8f91\u72ec\u7acb\u4e8e UI \u5c42</li> <li>\u4ee3\u7801\u590d\u7528\uff1a\u4e1a\u52a1\u903b\u8f91\u53ef\u88ab\u591a\u4e2a UI \u7ec4\u4ef6\u590d\u7528</li> <li>\u72b6\u6001\u53ef\u9884\u6d4b\uff1a\u6e05\u6670\u7684\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b</li> </ul> <p>\u603b\u4e4b\uff0c\u4f7f\u7528 Flutter \u6846\u67b6\u5f00\u53d1\u4f7f\u5f97\u6211\u4eec\u7684\u5e94\u7528\u5177\u6709\u5929\u7136\u7684\u4f18\u70b9</p> <ul> <li>\u5f3a\u5927\u7684\u8de8\u5e73\u53f0\u80fd\u529b\uff0c\u517c\u5bb9 Web\u3001\u79fb\u52a8\u8bbe\u5907\u3001\u684c\u9762\u8bbe\u5907\u3001\u5d4c\u5165\u5f0f\u8bbe\u5907</li> <li>\u4e0d\u540c\u7684\u8bbf\u95ee\u65b9\u5f0f\u4f7f\u7528\u4e00\u81f4\u7684 UI\uff0c\u63d0\u4f9b\u4e00\u81f4\u7684\u4f7f\u7528\u4f53\u9a8c\uff0c\u964d\u4f4e\u5b66\u4e60\u6210\u672c</li> </ul>"},{"location":"design/#mcp","title":"MCP \u670d\u52a1","text":"<p>\u4e25\u683c\u6765\u8bb2\uff0c\u8fd9\u5e76\u4e0d\u5c5e\u4e8e\u524d\u7aef\u6280\u672f\uff0c\u4e0d\u8fc7\u6211\u4eec\u65e8\u5728\u901a\u8fc7\u8fd9\u4e00\u6280\u672f\u91cd\u6784\u4ea4\u4e92\u65b9\u5f0f\uff0c\u6240\u4ee5\u6682\u4e14\u653e\u5728\u524d\u7aef\u90e8\u5206\u4ecb\u7ecd\u4e86</p> <p>MCP\uff08Model Context Protocol\uff0c\u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae\uff09\u662f\u4e00\u79cd\u4e13\u4e3a\u5927\u578b\u4eba\u5de5\u667a\u80fd\u6a21\u578b\u8bbe\u8ba1\u7684\u901a\u4fe1\u4e0e\u534f\u4f5c\u534f\u8bae\uff0c\u65e8\u5728\u89c4\u8303\u548c\u4f18\u5316\u591a\u4e2a\u6a21\u578b\u4e4b\u95f4\u5728\u590d\u6742\u4efb\u52a1\u5904\u7406\u4e2d\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u4ea4\u6362\u3002\u8be5\u534f\u8bae\u901a\u8fc7\u5b9a\u4e49\u7edf\u4e00\u7684\u6570\u636e\u7ed3\u6784\u3001\u4ea4\u4e92\u6d41\u7a0b\u548c\u4e0a\u4e0b\u6587\u7ba1\u7406\u673a\u5236\uff0c\u4f7f\u4e0d\u540c\u6a21\u578b\u80fd\u591f\u5728\u591a\u6b65\u9aa4\u63a8\u7406\u3001\u534f\u540c\u751f\u6210\u7b49\u573a\u666f\u4e2d\u4fdd\u6301\u4e00\u81f4\u7684\u7406\u89e3\u4e0e\u8fde\u8d2f\u6027\u3002MCP \u4e0d\u4ec5\u63d0\u5347\u4e86\u6a21\u578b\u95f4\u7684\u4e92\u64cd\u4f5c\u6027\uff0c\u8fd8\u589e\u5f3a\u4e86\u7cfb\u7edf\u6574\u4f53\u7684\u53ef\u89e3\u91ca\u6027\u548c\u53ef\u63a7\u6027\uff0c\u9002\u7528\u4e8e\u5206\u5e03\u5f0f AI \u7cfb\u7edf\u3001\u6a21\u578b\u7f16\u6392\u5e73\u53f0\u4ee5\u53ca\u8de8\u6a21\u6001\u4efb\u52a1\u96c6\u6210\u7b49\u524d\u6cbf\u5e94\u7528\u573a\u666f\u3002</p> <p>\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7ed3\u5408\u5927\u8bed\u8a00\u6280\u672f\u91cd\u6784 UI\uff0c\u901a\u8fc7\u804a\u5929\u63a7\u5236\u7ba1\u7406\u8bbe\u5907\uff0c\u964d\u4f4e\u5b66\u4e60\u6210\u672c\uff0c\u52a0\u901f\u7528\u6237\u4ea4\u4e92</p>"},{"location":"design/#ui","title":"UI \u8bbe\u8ba1","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 Fimga \u8fdb\u884c UI \u8bbe\u8ba1\uff0c\u65b9\u4fbf\u534f\u540c\u5de5\u4f5c</p> <p></p>"},{"location":"design/#_5","title":"\u540e\u7aef\u670d\u52a1","text":"<p>\u5206\u4e3a\u7528\u6237\u7ba1\u7406\u6a21\u5757\u3001\u6743\u9650\u7ba1\u7406\u6a21\u5757\u3001\u8bbe\u5907\u7ba1\u7406\u6a21\u5757\u7b49\uff0c\u8fd9\u4e9b\u6a21\u5757\u90fd\u57fa\u4e8e\u6570\u636e\u5e93\u5de5\u4f5c\uff0c\u5e76\u901a\u8fc7\u6d88\u606f\u4e2d\u95f4\u4ef6\u548c\u524d\u7aef\u3001\u8bbe\u5907\u901a\u4fe1\u3002\u6574\u4e2a\u9879\u76ee\u4f7f\u7528 Django \u6846\u67b6\u5f00\u53d1\u3002</p>"},{"location":"design/#django","title":"\u6280\u672f\u6846\u67b6\uff08Django\uff09","text":"<p>Django \u662f\u4e00\u4e2a\u9ad8\u7ea7\u7684 Python Web \u5f00\u53d1\u6846\u67b6\uff0c\u65e8\u5728\u5feb\u901f\u6784\u5efa\u9ad8\u6548\u3001\u53ef\u7ef4\u62a4\u7684\u7f51\u7ad9\u3002\u5b83\u91c7\u7528\u4e86 MTV\uff08\u6a21\u578b-\u6a21\u677f-\u89c6\u56fe\uff09\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5185\u7f6e\u4e86 ORM\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177\u3001\u8868\u5355\u5904\u7406\u3001\u8ba4\u8bc1\u7cfb\u7edf\u7b49\u529f\u80fd\u3002Django \u5f3a\u8c03 DRY\uff08Don't Repeat Yourself\uff09\u539f\u5219\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7ba1\u7406\u540e\u53f0\u751f\u6210\u5de5\u5177\u548c\u4e30\u5bcc\u7684\u7b2c\u4e09\u65b9\u5e94\u7528\u652f\u6301\uff0c\u9002\u7528\u4e8e\u4ece\u7b80\u5355\u5230\u590d\u6742\u7684\u5404\u7c7b Web \u9879\u76ee\u5f00\u53d1\u3002</p>"},{"location":"design/#_6","title":"\u7528\u6237\u7ba1\u7406\u6a21\u5757","text":"<p>\u6bd4\u8f83\u7b80\u5355\uff0c\u8fd9\u91cc\u53ea\u7b80\u5355\u4ecb\u7ecd</p> <ul> <li>\u5b9e\u73b0\u7528\u6237\u7684\u8eab\u4efd\u7684\u5224\u5b9a\u3001\u767b\u5f55\u3001\u6ce8\u518c\u7b49\u670d\u52a1</li> <li>\u533a\u5206\u7ba1\u7406\u5458\u4e0e\u666e\u901a\u7528\u6237</li> </ul> <pre><code>## --- \u8d26\u6237 (Auth) ---\nclass RegisterView(generics.CreateAPIView):\n    queryset = User.objects.all()\n    permission_classes = [AllowAny]  ## \u6ce8\u518c\u5141\u8bb8\u4efb\u4f55\u4eba\n    serializer_class = RegisterSerializer\n    ......\n</code></pre>"},{"location":"design/#_7","title":"\u6743\u9650\u63a7\u5236\u6a21\u5757","text":"<p>\u8fd9\u51e0\u4e4e\u662f\u6574\u4e2a\u9879\u76ee\u7684\u6838\u5fc3\u4e86\uff0c\u6211\u4eec\u5148\u4ece\u5e0c\u671b\u7684\u529f\u80fd\u70b9\u5f00\u59cb\u8bb2\u8d77\uff08\u5177\u4f53\u8be6\u60c5\u5728\u9700\u6c42\u6587\u6863\uff09</p> <ul> <li>\u533a\u5206\u540c\u4e00\u7528\u6237\u5bf9\u4e0d\u540c\u8bbe\u5907\u7684\u6743\u9650</li> <li>\u533a\u5206\u4e0d\u540c\u7528\u6237\u5bf9\u540c\u4e00\u8bbe\u5907\u7684\u6743\u9650</li> <li>\u4e3a\u4e86\u5b9e\u73b0\u7ec6\u7c92\u5ea6\u7684\u6743\u9650\u63a7\u5236\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5c06\u6743\u9650\u5206\u7ea7\uff0c\u4f8b\u5982\u5bf9\u8bbe\u5907\u53ef\u89c1\uff0c\u53ef\u4ee5\u4f7f\u7528\u8bbe\u5907\u7b49</li> <li>\u54ea\u6015\u662f\u5bf9\u540c\u4e00\u8bbe\u5907\uff0c\u884c\u4e3a\u4e5f\u9700\u8981\u6709\u654f\u611f\u4e0e\u975e\u654f\u611f\u533a\u5206</li> <li>\u5bf9\u7528\u6237\u4e0e\u8bbe\u5907\u5206\u7ec4</li> </ul> <p>\u4e3a\u4e86\u5b9e\u73b0\u4e0a\u9762\u7684\u76ee\u6807\uff0c\u6211\u4eec\u9700\u8981\u501f\u52a9\u6570\u636e\u5e93\uff0c\u5c3d\u7ba1\u5404\u4e2a\u6a21\u5757\u90fd\u9700\u8981\u6570\u636e\u5e93\u63d0\u4f9b\u670d\u52a1\uff0c\u4f46\u8fd9\u4e2a\u6a21\u5757\u7684\u4efb\u52a1\u51e0\u4e4e\u662f\u5b8c\u5168\u57fa\u4e8e\u6570\u636e\u5e93\u7684\uff0c\u800c\u4e14\u6570\u636e\u5e93\u7684\u5927\u90e8\u5206\u8868\u4e5f\u662f\u4e3a\u4e86\u8fd9\u4e00\u6a21\u5757\u670d\u52a1\u3002</p> <p></p>"},{"location":"design/#_8","title":"\u8bbe\u5907\u7ba1\u7406\u6a21\u5757","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u4e3b\u8981\u8d1f\u8d23\u8bbe\u5907\u7684\u7ba1\u7406\u4e0e\u63a7\u5236\uff0c\u5177\u4f53\u5982\u4e0b</p> <ul> <li>\u76f4\u63a5\u7ba1\u7406\u8bbe\u5907\uff0c\u5411\u8bbe\u5907\u53d1\u9001\u63a7\u5236\u6307\u4ee4</li> <li>\u6536\u96c6\u8bbe\u5907\u4fe1\u606f\u3001\u9700\u8981\u5bf9\u4e0d\u540c\u8bbe\u5907\u7c7b\u578b\u3001\u5382\u5bb6\u63d0\u4f9b\u7684\u63a7\u5236\u63a5\u53e3\u505a\u8db3\u591f\u7684\u5c01\u88c5</li> <li>\u8bb0\u5f55\u8bbe\u5907\u4f7f\u7528\u65e5\u5fd7\uff0c\u65b9\u4fbf\u7528\u6237\u5206\u6790\u4f7f\u7528\u60c5\u51b5</li> <li>\u53ef\u4ee5 SSDP\uff0cmDNS \u7b49\u6280\u672f\uff0c\u53d1\u73b0\u5bb6\u5ead\u5185\u7684\u8bbe\u5907</li> </ul>"},{"location":"design/#_9","title":"\u8bbe\u5907\u7fa4","text":"<p>\u8bbe\u5907\u901a\u8fc7\u5c40\u57df\u7f51\u3001\u84dd\u7259\u7b49\u65b9\u5f0f\uff0c\u88ab\u540e\u7aef\u670d\u52a1\u8bbf\u95ee\u3001\u63a7\u5236\u3002\u8fd9\u90e8\u5206\u670d\u52a1\u7531\u5404\u4e2a\u4e0d\u540c\u7684\u8bbe\u5907\u4ea7\u5546\u63d0\u4f9b\uff08\u5728\u672c\u6b21\u4f5c\u4e1a\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u8fdb\u7a0b\u6a21\u62df\u5404\u4e2a\u8bbe\u5907\uff09\uff0c\u7cfb\u7edf\u901a\u8fc7\u540e\u7aef\u670d\u52a1\uff0c\u96c6\u6210\u8bbe\u5907\u3001\u7edf\u4e00\u7ba1\u7406</p> <p></p>"},{"location":"design/#_10","title":"\u90e8\u7f72\u4f7f\u7528\u89c6\u89d2","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u666e\u901a\u7684\u5bb6\u5ead\u6765\u8bf4\uff0c\u5f53\u51b3\u5b9a\u4f7f\u7528\u6211\u4eec\u7684\u7cfb\u7edf\u65f6\uff0c\u770b\u5230\u7684\u5c06\u4f1a\u662f\u4e0a\u9762\u8fd9\u6837</p> <p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5e2e\u52a9\uff0c\u65b9\u4fbf\u7528\u6237\u90e8\u7f72\u4f7f\u7528\uff0c\u66f4\u52a0\u5207\u5408\u5bb6\u5ead\u7684\u5b9e\u9645\u573a\u666f\uff0c\u8ba9\u9879\u76ee\u53ef\u4ee5\u88ab\u771f\u5b9e\u5730\u4f7f\u7528\uff0c\u800c\u4e0d\u662f\u505c\u7559\u5728\u4ee3\u7801</p> <ul> <li>\u4e00\u952e\u5f0f\u90e8\u7f72\u811a\u672c</li> </ul> <p></p> <ul> <li>\u670d\u52a1\u7aef\u4f7f\u7528 docker \u955c\u50cf\u5c01\u88c5\uff0c\u514d\u9664\u73af\u5883\u914d\u7f6e\u7684\u56f0\u6270</li> </ul> <p></p> <ul> <li>\u7ec8\u7aef\u5e94\u7528\u6253\u5305\u6210 app\uff0c\u63d0\u4f9b\u5404\u4e2a\u5e73\u53f0\u7684\u5b89\u88c5\u5305</li> </ul> <p></p> <ul> <li>\u6b64\u5916\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u8db3\u591f\u7684\u6587\u6863\uff0c\u65b9\u4fbf\u4f7f\u7528\u4e0e\u8fdb\u4e00\u6b65\u5f00\u53d1</li> </ul> <p></p>"},{"location":"design/#_11","title":"\u5176\u4ed6","text":"<p>\u5728\u7cfb\u7edf\u8bbe\u8ba1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u8fd8\u5c06\u5de5\u4f5c\u505a\u4e86\u7ec6\u5316\u4e0e\u5206\u79bb\uff0c\u5305\u62ec\u63a5\u53e3\u8bbe\u8ba1\uff0c\u6570\u636e\u5e93\u8bbe\u8ba1\uff0c\u6743\u9650\u8bbe\u8ba1\u7b49\uff0c\u653e\u5728\u4e0b\u5c5e\u6587\u6863\u3002\u4e3a\u4e86\u907f\u514d\u7d2f\u8d58\uff0c\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd</p>"},{"location":"design/backend/","title":"\u540e\u7aef\u63a5\u53e3","text":"<p>\u8fd9\u4e2a\u6587\u6863\u7528\u4e8e\u534f\u5b9a\u524d\u540e\u7aef\u7684\u4ea4\u4e92\u63a5\u53e3\uff0c\u524d\u540e\u7aef\u4f7f\u7528 http \u8bf7\u6c42\u4ea4\u4e92\uff0c\u4e0b\u9762\u662f\u4e2a\u7b80\u5355\u7684\u8349\u7a3f\uff0c\u524d\u540e\u7aef\u7684\u540c\u5b66\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u4efb\u610f\u4fee\u6539\u3002\u6570\u636e\u4f20\u8f93\u4f7f\u7528 json \u683c\u5f0f\u3002</p>"},{"location":"design/backend/#_1","title":"\u901a\u7528","text":""},{"location":"design/backend/#url","title":"\u57fa\u7840 URL\uff1a","text":"<p><code>http://localhost:****/api/v1</code></p>"},{"location":"design/backend/#bearer","title":"\u8bf7\u6c42\u5934(\u5e26 Bearer \u9a8c\u8bc1\u4fe1\u606f)\uff1a","text":"<pre><code>{\n  \"Content-Type\": \"application/json\",\n  \"Authorization\": \"Bearer &lt;token&gt;\"  // \u9700\u8981\u8ba4\u8bc1\u7684\u63a5\u53e3\n}\n</code></pre>"},{"location":"design/backend/#_2","title":"\u54cd\u5e94\u683c\u5f0f","text":""},{"location":"design/backend/#_3","title":"\u6210\u529f\u54cd\u5e94","text":"<pre><code>{\n  \"success\": true,\n  \"message\": \"\u64cd\u4f5c\u6210\u529f\",\n  \"data\": {\n    // \u5177\u4f53\u6570\u636e\u5185\u5bb9\n  }\n}\n</code></pre> <p>\u540e\u9762\u82e5\u7ed9\u51fa\u4e86\u6210\u529f\u54cd\u5e94\uff0c\u90fd\u662f\u53ea\u5305\u542b <code>data</code> \u6570\u636e\u9879\u7684\u5185\u5bb9\u3002\u82e5\u6ca1\u7ed9\u51fa\uff0c\u5219\u4ee3\u8868\u8be5\u63a5\u53e3\u6210\u529f\u54cd\u5e94\u6ca1\u6709 <code>data</code> \u6570\u636e\u9879\u3002</p>"},{"location":"design/backend/#_4","title":"\u9519\u8bef\u54cd\u5e94","text":"<pre><code>{\n  \"success\": false,\n  \"message\": \"\u9519\u8bef\u63cf\u8ff0\",\n  \"error_code\": \"ERROR_CODE\",\n  \"details\": {\n    // \u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\uff08\u53ef\u9009\uff09\n  }\n}\n</code></pre>"},{"location":"design/backend/#_5","title":"\u6743\u9650\u7ea7\u522b\u5b9a\u4e49\uff08\u6682\u65f6\uff09","text":"<ul> <li><code>none</code> - \u4e0d\u53ef\u89c1</li> <li><code>visible</code> - \u53ef\u89c1</li> <li><code>usable</code> - \u53ef\u4f7f\u7528</li> <li><code>configurable</code> - \u53ef\u914d\u7f6e</li> <li><code>monitorable</code> - \u53ef\u76d1\u89c6</li> <li><code>manageable</code> - \u53ef\u7ba1\u7406</li> </ul>"},{"location":"design/backend/#_6","title":"\u8d26\u6237","text":""},{"location":"design/backend/#_7","title":"\u767b\u5f55 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a <code>POST /auth/login</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aemail\u3001password</li> <li>\u8f93\u51fa\u53c2\u6570\uff1atoken</li> <li>\u6ce8\u91ca\uff1a\u4f20\u5165\u53c2\u6570\u8d26\u6237\u548c\u5bc6\u7801\u4e4b\u540e\u83b7\u5f97 token\uff0c\u7528\u4f5c\u901a\u884c\u8bc1\uff0c\u540e\u7eed\u8bf7\u6c42\u65f6\u9700\u9644\u4e0a token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"refresh\": \"......\",  // refresh_token\n  \"access\": \"......\"\n}\n</code></pre>"},{"location":"design/backend/#_8","title":"\u6ce8\u518c \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/register</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aemail\u3001password</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u6ce8\u518c\u4e4b\u540e\uff0c\u540e\u7aef\u9700\u8981\u8fd4\u56de\u6807\u8bc6\uff0c\u6307\u793a\u662f\u5426\u6ce8\u518c\u6210\u529f\uff1b\u6b64\u5916\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u9644\u5e26\u5931\u8d25\u539f\u56e0\uff0c\u4f8b\u5982\u8d26\u6237\u5df2\u88ab\u6ce8\u518c\u3001email \u65e0\u6548\u7b49</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"email\": \"test_user_001@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"design/backend/#_9","title":"\u66f4\u6539\uff08\u6682\u672a\u5b9e\u73b0\uff09","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo_dict</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u66f4\u6539\u4e2a\u4eba\u4fe1\u606f\uff0c\u8f93\u5165\u4e00\u4e2a\u5b57\u5178\uff0c\u5b57\u5178\u7684 key \u5bf9\u5e94\u9700\u8981\u4fee\u6539\u7684\u5bf9\u8c61\uff0c\u4f8b\u5982\u5462\u79f0\u3001\u90ae\u7bb1\u3001\u5bc6\u7801\u7b49\uff0cvalue \u5bf9\u5e94\u65b0\u7684\u503c</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8bf7\u6c42\u4f53</li> </ul> <pre><code>{\n}\n</code></pre>"},{"location":"design/backend/#_10","title":"\u5237\u65b0\u4ee4\u724c \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/``re``fresh</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1arefresh_token</li> </ul>"},{"location":"design/backend/#_11","title":"\u83b7\u53d6\u5168\u90e8\u7528\u6237 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /auth/all</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\u83b7\u53d6\u5168\u90e8\u7528\u6237\u4fe1\u606f</li> </ul>"},{"location":"design/backend/#_12","title":"\u9a8c\u8bc1\u4ee4\u724c\u6709\u6548 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/verify</code></li> <li>\u8f93\u5165\u53c2\u6570 user_token</li> <li>\u6ce8\u91ca\uff1a\u8fd9\u4e2a token \u4e0d\u662f\u653e\u5728 Authorization \u5934\u4e2d\uff0c\u800c\u662f\u5728\u8bf7\u6c42\u4f53\u4e2d\u4ee5 JSON \u683c\u5f0f\u53d1\u9001</li> </ul> <pre><code>{\n    \"token\":\"&lt;user token&gt;\"\n}\n</code></pre>"},{"location":"design/backend/#_13","title":"\u6743\u9650","text":""},{"location":"design/backend/#_14","title":"\u5bf9\u8bbe\u5907","text":""},{"location":"design/backend/#_15","title":"\u67e5\u770b\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\uff1a\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>[\n  {\n    \"id\":6,\n    \"type\":\"device\",  // \u8bbe\u5907\u90fd\u662f\u56fa\u5b9a\u503c\n    \"name\":\"\u5ba2\u5385\u7a7a\u8c03\",\n    \"permission\":\"configurable\"\n  },\n  ......\n]\n</code></pre>"},{"location":"design/backend/#_16","title":"\u4fee\u6539\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre>"},{"location":"design/backend/#_17","title":"\u67e5\u770b\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions/user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u7ec4\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>{}\n</code></pre>"},{"location":"design/backend/#_18","title":"\u4fee\u6539\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions/user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{}\n</code></pre>"},{"location":"design/backend/#_19","title":"\u5bf9\u8bbe\u5907\u7ec4","text":""},{"location":"design/backend/#_20","title":"\u67e5\u770b\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions``/device-``group``s``/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\uff1a\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>[\n  {\n    \"id\":6,\n    \"type\":\"device_type\",  // \u8bbe\u5907\u7ec4\u90fd\u662f\u56fa\u5b9a\u503c\n    \"name\":\"\u5ba2\u5385\u7a7a\u8c03\",\n    \"permission\":\"configurable\"\n  },\n  ......\n]\n</code></pre>"},{"location":"design/backend/#_21","title":"\u4fee\u6539\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions``/device-``group``s``/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_group_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_group_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre>"},{"location":"design/backend/#_22","title":"\u67e5\u770b\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions``/device-``group``s``/``user-``group``s``/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u7ec4\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>{}\n</code></pre>"},{"location":"design/backend/#_23","title":"\u4fee\u6539\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions``/device-``group``s``/``user-``group``s``/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_group_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_group_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{}\n</code></pre>"},{"location":"design/backend/#_24","title":"\u7528\u6237\u7ec4","text":""},{"location":"design/backend/#_25","title":"\u521b\u5efa\u7528\u6237\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /user-groups</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u521b\u5efa\u7ec4\uff0c\u8fd4\u56de\u521b\u5efa\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u65b0\u7528\u6237\u7ec4\",\n  \"description\": \"\u7528\u6237\u7ec4\u63cf\u8ff0\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{}\n</code></pre>"},{"location":"design/backend/#_26","title":"\u5220\u9664\u7528\u6237\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u5220\u9664\u7528\u6237\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e\u3002</p> </li> <li>\u9700\u8981\u5220\u9664\u4e0e\u4e4b\u76f8\u5173\u7684\u6240\u6709\u7528\u6237\u4ee5\u53ca\u4e0e\u4e4b\u76f8\u5173\u7684\u8bbe\u5907\u7ec4\u624d\u80fd\u6b63\u5e38\u6267\u884c\uff0c\u5426\u5219\u5931\u8d25\u3002</li> <li>\uff08\u53ef\u9009\u9700\u6c42\uff0c\u672a\u5b9e\u73b0\uff09\u4e0d\u5141\u8bb8\u5220\u9664\u7279\u5b9a\u7528\u6237\u7ec4</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a\uff08\u7a7a\uff09</li> </ul> <pre><code>{}\n</code></pre> <ul> <li>\u8fd4\u56de\u72b6\u6001\u7801 200</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u7528\u6237\u7ec4 0611 \u5df2\u6210\u529f\u5220\u9664\"\n}\n</code></pre>"},{"location":"design/backend/#_27","title":"\u4fee\u6539\u7528\u6237\u7ec4\u540d \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001new_group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u4fee\u6539\u7528\u6237\u7ec4\u540d</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u65b0\u7528\u6237\u7ec4\u540d\",\n  \"description\": \"\u65b0\u7684\u7528\u6237\u7ec4\u63cf\u8ff0\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_28","title":"\u52a0\u5165\u7528\u6237\u5230\u5176\u4ed6\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /user-groups/{group_id}/members</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u7528\u6237\u52a0\u5165\u5230\u6307\u5b9a\u7ec4\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"user_id\": 2\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_29","title":"\u4ece\u7ec4\u4e2d\u79fb\u9664\u7528\u6237 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /user``-``groups/{group_id}/members/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u7528\u6237\u79fb\u51fa\u6307\u5b9a\u7ec4\uff1b\u5982\u679c\u7528\u6237\u4ece public \u7ec4\u4e2d\u79fb\u9664\uff0c\u5220\u9664\u7528\u6237\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u7528\u6237 test1@test.com \u5df2\u4ece\u7528\u6237\u7ec4 0611 \u79fb\u9664\"\n}\n</code></pre>"},{"location":"design/backend/#_30","title":"\u8bbe\u5907\u7ec4","text":""},{"location":"design/backend/#_31","title":"\u521b\u5efa\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /device-groups</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u521b\u5efa\u7ec4\uff0c\u8fd4\u56de\u521b\u5efa\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u5ba2\u5385\u8bbe\u5907\u7ec4\",   // \u5fc5\u586b\n  \"description\": \"\u5ba2\u5385\u6240\u6709\u667a\u80fd\u8bbe\u5907\"   // \u9009\u586b\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"id\":13,\n  \"name\":\"test1\",\n  \"description\":null,\n  \"devices\":[],\n  \"devices_count\":0\n}\n</code></pre>"},{"location":"design/backend/#_32","title":"\u5220\u9664\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /device-groups/{``group``_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u5220\u9664\u8bbe\u5907\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</p> </li> <li>\u9700\u8981\u79fb\u9664\u8bbe\u5907\u7ec4\u5185\u6240\u6709\u8bbe\u5907\uff0c\u6240\u6709\u4e0e\u4e4b\u76f8\u5173\u7684\u7528\u6237\u6743\u9650\u548c\u7528\u6237\u7ec4\u6743\u9650\u540e\u624d\u80fd\u6267\u884c\u6210\u529f\u3002\u5426\u5219\u6267\u884c\u5931\u8d25</li> <li>(\u53ef\u9009\u529f\u80fd\uff0c\u672a\u5b9e\u73b0) \u4e0d\u5141\u8bb8\u5220\u9664\u7279\u5b9a\u8bbe\u5907\u7ec4</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a\uff08\u7a7a\uff09</li> </ul> <pre><code>{}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53:</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u8bbe\u5907\u7ec4 D502 \u5df2\u6210\u529f\u5220\u9664\"\n}\n</code></pre>"},{"location":"design/backend/#_33","title":"\u67e5\u8be2\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3: <code>GET /device-groups</code></li> <li>\u8f93\u5165\u53c2\u6570: admin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1a</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u67e5\u8be2\u6240\u6709\u8bbe\u5907\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53</li> </ul> <pre><code>{\n\"count\": 13,\n\"next\": **null**,\n\"previous\": **null**,\n\"results\": [\n{\n\"id\": 1,\n\"name\": \"crazy\",\n\"description\": \"crrazzy\",\n\"devices\": [],\n\"devices_count\": 0\n},\n// ...\n]\n}\n</code></pre>"},{"location":"design/backend/#_34","title":"\u4fee\u6539\u8bbe\u5907\u7ec4\u540d \u2705","text":"<ul> <li> <p>\u63a5\u53e3\uff1a<code>PUT /device-groups/{group_id}</code></p> </li> <li> <p>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_ip\u3001new_group_name</p> </li> <li> <p>\u8f93\u51fa\u53c2\u6570\uff1asignal</p> </li> <li> <p>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u4fee\u6539\u7528\u6237\u7ec4\u540d</p> </li> <li> <p>\u8bf7\u6c42\u5934\uff1a\u9700\u8981admin_token</p> </li> <li> <p>\u8bf7\u6c42\u4f53\uff1a</p> </li> </ul> <pre><code>{\n  \"name\": \"\u65b0\u8bbe\u5907\u7ec4\u540d\",  // \u5fc5\u586b\n  \"description\": \"\u65b0\u7684\u8bbe\u5907\u7ec4\u63cf\u8ff0\"  // \u9009\u586b\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"id\": \"1\",\n  \"name\": \"\u65b0\u8bbe\u5907\u7ec4\u540d\"\n  \"description\": \"\u65b0\u7684\u8bbe\u5907\u7ec4\u63cf\u8ff0\",\n  \"devices_count\": 0\n}\n</code></pre>"},{"location":"design/backend/#_35","title":"\u52a0\u5165\u8bbe\u5907\u5230\u5176\u4ed6\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /device-groups/{group-id}/devices</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u8bbe\u5907\u52a0\u5165\u5230\u6307\u5b9a\u7ec4\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 1\n}\n</code></pre>"},{"location":"design/backend/#_36","title":"\u4ece\u7ec4\u4e2d\u79fb\u9664\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /device-groups/{group_id}/devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u8bbe\u5907\u79fb\u51fa\u6307\u5b9a\u7ec4\uff1b\u5982\u679c\u8bbe\u5907\u4ece public \u7ec4\u4e2d\u79fb\u9664\uff0c\u5220\u9664\u8bbe\u5907\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> </ul>"},{"location":"design/backend/#_37","title":"\u8bbe\u5907","text":""},{"location":"design/backend/#_38","title":"\u53d1\u73b0\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/discover</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist[device]</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7ba1\u7406\u5458\u5c1d\u8bd5\u53d1\u73b0\u9644\u8fd1\u8bbe\u5907\uff0c\u540e\u7aef\u670d\u52a1\u68c0\u67e5\u5468\u56f4\u662f\u5426\u6709\u8bbe\u5907\uff0c\u8fd4\u56de\u4e00\u4e2a list.</p> </li> <li>list \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u7528\u4e8e\u8bbe\u5907\u4fe1\u606f\u7684 dict\uff0cdict \u81f3\u5c11\u8981\u5305\u542b\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907 ip\u3011\u3001\u3010\u8bbe\u5907\u7c7b\u578b\u3011\u3001\u3010\u8bbe\u5907\u6807\u8bc6\u3011\u7b49\u4fe1\u606f</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>\"success\": **true**,\n    \"message\": \"\u901a\u8fc7SSDP\u53d1\u73b0 2 \u4e2a\u8bbe\u5907\",\n    \"data\": [\n        {\n            \"device_identifier\": \"eb370a3c-b9dc-42bf-a0fb-61e311c6d79c\",\n            \"name\": \"refrigerator (eb370a3c-b9dc-42bf-a0fb-61e311c6d79c)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5001,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://0.0.0.0:5001\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:eb370a3c-b9dc-42bf-a0fb-61e311c6d79c::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": **false**,\n            \"database_id\": **null**\n        },\n        {\n            \"device_identifier\": \"e7f4fe33-e201-47f4-943b-16b3fe97bbcf\",\n            \"name\": \"refrigerator (e7f4fe33-e201-47f4-943b-16b3fe97bbcf)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5000,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://0.0.0.0:5000\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:e7f4fe33-e201-47f4-943b-16b3fe97bbcf::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": **true**,\n            \"database_id\": 6\n        }\n    ]\n}\n</code></pre>"},{"location":"design/backend/#_39","title":"\u540c\u6b65\u8bbe\u5907\u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/sync</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1a</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u5c06\u53d1\u73b0\u8bbe\u5907\u8fd4\u56de\u7684\u7ed3\u679c\u4f20\u5165\uff0c\u53ef\u4ee5\u5c06\u8bbe\u5907\u6dfb\u52a0\u5230\u6570\u636e\u5e93\u4e2d</p> </li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_data\": [\n        {\n            \"device_identifier\": \"b067db59-7194-47a1-8a24-ebdfeb9fcb61\",\n            \"name\": \"refrigerator (b067db59-7194-47a1-8a24-ebdfeb9fcb61)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5001,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://127.0.0.1:5001\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:b067db59-7194-47a1-8a24-ebdfeb9fcb61::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": false,\n            \"database_id\": null\n        }\n    ]\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u6210\u529f\u540c\u6b65 1 \u4e2a\u8bbe\u5907\",\n    \"data\": {\n        \"synced_devices\": [\n            {\n                \"action\": \"created\",\n                \"device_id\": 4,\n                \"device_identifier\": \"b067db59-7194-47a1-8a24-ebdfeb9fcb61\"\n            }\n        ],\n        \"errors\": [],\n        \"total_processed\": 1,\n        \"successful\": 1,\n        \"failed\": 0\n    }\n}\n</code></pre>"},{"location":"design/backend/#_40","title":"\u6dfb\u52a0\u8bbe\u5907 \u2705\uff08\u5f03\u7528\uff09","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u5728\u53d1\u73b0\u8bbe\u5907\u4e4b\u540e\u6dfb\u52a0\u8bbe\u5907\uff0c\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u8fd4\u56de\u8db3\u591f\u9519\u8bef\u4fe1\u606f\u3002\u8fd9\u91cc\u6211\u4eec\u505a\u4e00\u4e9b\u7b80\u5355\u5047\u8bbe\uff0c\u65b0\u7684\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7 ip \u548c port \u6807\u8bc6</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_ip\": \"10.0.1.1\",\n    \"device_port\": \"2100\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_41","title":"\u79fb\u9664\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u79fb\u9664\u8bbe\u5907\uff0c\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u8fd4\u56de\u8db3\u591f\u9519\u8bef\u4fe1\u606f\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\"\n}\n</code></pre>"},{"location":"design/backend/#_42","title":"\u4fee\u6539\u8bbe\u5907\u4fe1\u606f \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device_id\u3001new_device_info</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u4fee\u6539\u8bbe\u5907\u4fe1\u606f\uff0c\u4f20\u5165\u8bbe\u5907 id \u548c\u65b0\u7684\u8bbe\u5907\u4fe1\u606f\uff0c\u8bbe\u5907\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u63cf\u8ff0\u3011\u3001\u3010\u8bbe\u5907\u54c1\u724c\u3011\u7b49</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_info\": {\n        \"name\": \"fridge1\",\n    }\n}\n</code></pre>"},{"location":"design/backend/#_43","title":"\u63a7\u5236\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/{device_id}/control</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken\u3001device_id\u3001action\u3001param</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u63a7\u5236\u8bbe\u5907\uff0c\u9700\u8981\u4e0a\u4f20\u901a\u884c\u8bc1\uff08token\uff09\u3001\u8bbe\u5907\u552f\u4e00\u6807\u8bc6\uff08device_id\uff09\u3001\u5bf9\u8bbe\u5907\u7684\u64cd\u4f5c\uff08action\uff09\uff08\u4f8b\u5982\u5f00\u673a\u3001\u5173\u673a\u7b49\uff09\u3001\u9644\u5e26\u7684\u53c2\u6570\uff08\u6bd4\u5982\u63a7\u5236\u7a7a\u8c03\u65f6\u4e5f\u8bb8\u9700\u8981\u6e29\u5ea6\u4e4b\u7c7b\u7684\u53c2\u6570\uff09\uff1b\u540e\u7aef\u9700\u8981\u901a\u8fc7 token \u68c0\u67e5\u7528\u6237\u662f\u5426\u5408\u6cd5\uff0c\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u8fdb\u884c\u7684\u64cd\u4f5c\u662f\u5426\u5177\u6709\u8db3\u591f\u6743\u9650\u3002\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u6216\u8005\u5176\u4ed6 http \u72b6\u6001\u7801\uff0c\u53e6\u5916\u9700\u8981\u9644\u5e26\u8db3\u591f\u7684\u9519\u8bef\u4fe1\u606f\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"action\": \"set_temperature\",\n  \"parameters\": {\n    \"temperature\": 26\n  }\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_44","title":"\u67e5\u8be2\u8bbe\u5907\u6982\u8981 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/overview</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u8be5\u65b9\u6cd5\u5141\u8bb8\u666e\u901a\u7528\u6237\u548c\u7ba1\u7406\u5458\u7528\u6237\u8c03\u7528\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u666e\u901a\u7528\u6237\u53ea\u80fd\u770b\u5230\u90e8\u5206\u8bbe\u5907\u7684\u6982\u8981\uff08\u90a3\u4e9b\u7528\u6237\u81f3\u5c11\u62e5\u6709\u3010\u53ef\u89c1\u3011\u6743\u9650\u7684\u8bbe\u5907\uff09\u3002\u7ba1\u7406\u5458\u5c06\u4f1a\u5f97\u5230\u6240\u6709\u8bbe\u5907\u7684\u6982\u8981\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a dict\uff0c\u4ee3\u8868\u67d0\u4e2a\u8bbe\u5907\u7684\u6982\u8981\uff0ckey \u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u72b6\u6001\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_45","title":"\u67e5\u8be2\u8bbe\u5907\u8be6\u60c5 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/{device_id}/detail</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken\u3001device_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1adetail_dict</li> <li>\u6ce8\u91ca\uff1a\u7528\u6237\u67e5\u8be2\u67d0\u4e2a\u8bbe\u5907\u7684\u8be6\u60c5\uff0c\u6ce8\u610f\uff0c\u53ea\u6709\u7528\u6237\u5bf9\u4e8e\u8be5\u8bbe\u5907\u7684\u6743\u9650\u8fbe\u5230\u3010\u53ef\u76d1\u89c6\u3011\u7684\u7ea7\u522b\u624d\u80fd\u5f97\u5230\u8be6\u7ec6\u4fe1\u606f\u3002detail_dict \u4e2d\u81f3\u5c11\u8981\u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u72b6\u6001\u3011\u3001\u3010\u8bbe\u5907\u5f53\u524d\u529f\u8017\u3011\u3001\u3010\u8bbe\u5907\u8fd0\u884c\u65f6\u95f4\u3011\u3001\u3010\u8bbe\u5907\u8fd0\u884c\u65e5\u5fd7\u3011\u3001\u3010\u8bbe\u5907\u4f7f\u7528\u8bb0\u5f55\u3011\uff0c\u5176\u4f59\u53c2\u6570\u6839\u636e\u8bbe\u5907\u7c7b\u522b\u8865\u5145</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_46","title":"\u63a5\u53d7\u8bbe\u5907\u5fc3\u8df3 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/heartbeat</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u63a5\u53d7\u8bbe\u5907\u53d1\u9001\u7684\u5468\u671f\u6027\u5fc3\u8df3\u5305\uff0c\u8bb0\u5f55\u8bbe\u5907\u4fe1\u606f</li> <li>\u8bf7\u6c42\u4f53\uff08\u53c2\u8003\uff09\uff1a</li> </ul> <pre><code>{\n  \"device_identifier\": \"xiaomi_ac_001\",\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"status\": \"online\",\n  \"data\": {\n    \"current_power_consumption\": 1200.5,\n    \"current_temperature\": 26,\n    \"target_temperature\": 24,\n    \"error_codes\": []\n  }\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/backend/#_47","title":"\u63a5\u53d7\u8bbe\u5907\u4e8b\u4ef6\uff08\u5f03\u7528\uff09","text":"<p>\u8fd9\u4e00\u63a5\u53e3\u5f03\u7528\uff0c\u8bbe\u5907\u4e8b\u4ef6\u4f1a\u968f\u7740\u5fc3\u8df3\u53d1\u9001</p> <ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/event</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u63a5\u53d7\u8bbe\u5907\u53d1\u9001\u7684\u4e8b\u4ef6\u901a\u77e5</li> <li>\u8bf7\u6c42\u4f53\uff08\u53c2\u8003\uff09\uff1a</li> </ul> <pre><code>{\n  \"device_identifier\": \"xiaomi_ac_001\",\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"event_type\": \"state_change\",\n  \"event_data\": {\"status\": \"on\",\"brightness\": 100},\n  }\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n\n}\n</code></pre>"},{"location":"design/db/","title":"\u6570\u636e\u5e93\u8bbe\u8ba1","text":""},{"location":"design/db/#_1","title":"\u6570\u636e\u5e93\u8bbe\u8ba1","text":"<p>\u521d\u6b65\u89c4\u5212\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\uff0cER \u56fe\u53ef\u4ee5\u5728 https://www.mermaidchart.com/\u6e32\u67d3</p> <p>django \u8bbe\u8ba1\uff1a</p> <pre><code>_# api/models.py\nfrom django.db import models\nfrom django.contrib.auth.models import AbstractUser, Group as AuthGroup, Permission as AuthPermission # Import with aliases\n\nclass User(AbstractUser):\n    email = models.EmailField(unique=True)\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = ['username']\n\n    # Add unique related_name arguments to avoid clashes\n    groups = models.ManyToManyField(\n        AuthGroup, # Use the aliased Group\n        verbose_name='groups',\n        blank=True,\n        help_text=(\n            'The groups this user belongs to. A user will get all permissions '\n            'granted to each of their groups.'\n        ),\n        related_name=\"api_user_set\", # Changed related_name\n        related_query_name=\"user\",\n    )\n    user_permissions = models.ManyToManyField(\n        AuthPermission, # Use the aliased Permission\n        verbose_name='user permissions',\n        blank=True,\n        help_text='Specific permissions for this user.',\n        related_name=\"api_user_permissions_set\", # Changed related_name\n        related_query_name=\"user\",\n    )\n\n    def __str__(self):\n        return self.email\n\nclass UserGroup(models.Model):\n    name = models.CharField(max_length=100, unique=True)\n    description = models.TextField(blank=True, null=True)\n    # Django \u7684 Group \u6a21\u578b\u53ef\u4ee5\u7528\u4e8e\u7528\u6237\u5206\u7ec4\uff0c\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 UserGroup\n    # \u5982\u679c\u6587\u6863\u4e2d\u7684 \"\u7528\u6237\u7ec4\" \u548c Django \u7684 Group \u6982\u5ff5\u4e00\u81f4\uff0c\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u7528 Django Group\n    # \u6216\u8005\u50cf\u8fd9\u6837\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6a21\u578b\uff0c\u5e76\u901a\u8fc7 ManyToManyField \u5c06 User \u548c UserGroup \u5173\u8054\u8d77\u6765\n    members = models.ManyToManyField(User, related_name='custom_user_groups', blank=True)\n    # created_by = models.ForeignKey(User, related_name='created_user_groups', on_delete=models.SET_NULL, null=True) # \u7ba1\u7406\u5458\u521b\u5efa\n\n    def __str__(self):\n        return self.name\n\nclass Device(models.Model):\n    DEVICE_STATUS_CHOICES = [\n        ('online', '\u5728\u7ebf'),\n        ('offline', '\u79bb\u7ebf'),\n        ('error', '\u6545\u969c'),\n    ]\n    name = models.CharField(max_length=100)\n    device_identifier = models.CharField(max_length=100, unique=True, help_text=\"\u8bbe\u5907\u552f\u4e00\u6807\u8bc6\uff0c\u4f8b\u5982 MAC \u5730\u5740\u6216\u5e8f\u5217\u53f7\")\n    ip_address = models.GenericIPAddressField(blank=True, null=True)\n    port = models.PositiveIntegerField(blank=True, null=True)\n    device_type = models.CharField(max_length=50, blank=True, null=True, help_text=\"\u4f8b\u5982\uff1a\u7a7a\u8c03\u3001\u51b0\u7bb1\u3001\u706f\")\n    brand = models.CharField(max_length=50, blank=True, null=True)\n    description = models.TextField(blank=True, null=True)\n    status = models.CharField(max_length=20, choices=DEVICE_STATUS_CHOICES, default='offline')\n    current_power_consumption = models.FloatField(blank=True, null=True)\n    uptime_seconds = models.PositiveIntegerField(default=0, help_text=\"\u8fd0\u884c\u65f6\u95f4\uff08\u79d2\uff09\") # \u53ef\u4ee5\u8003\u8651\u7528 DateTimeField \u8bb0\u5f55\u4e0a\u6b21\u542f\u52a8\u65f6\u95f4\n    last_heartbeat = models.DateTimeField(blank=True, null=True)\n    # logs \u548c usage_records \u53ef\u4ee5\u662f TextField \u6216\u5173\u8054\u5230\u5176\u4ed6\u6a21\u578b\n    # logs = models.TextField(blank=True, null=True, help_text=\"JSON \u683c\u5f0f\u7684\u65e5\u5fd7\")\n    # usage_records = models.TextField(blank=True, null=True, help_text=\"JSON \u683c\u5f0f\u7684\u4f7f\u7528\u8bb0\u5f55\")\n\n    def __str__(self):\n        return f\"{self.name} ({self.device_identifier})\"\n\nclass DeviceLog(models.Model): # \u66f4\u89c4\u8303\u7684\u65e5\u5fd7\u8bb0\u5f55\n    device = models.ForeignKey(Device, related_name='logs', on_delete=models.CASCADE)\n    timestamp = models.DateTimeField(auto_now_add=True)\n    log_message = models.TextField()\n\n    def __str__(self):\n        return f\"Log for {self.device.name} at {self.timestamp}\"\n\nclass DeviceUsageRecord(models.Model): # \u66f4\u89c4\u8303\u7684\u4f7f\u7528\u8bb0\u5f55\n    device = models.ForeignKey(Device, related_name='usage_records', on_delete=models.CASCADE)\n    user = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True) # \u54ea\u4e2a\u7528\u6237\u64cd\u4f5c\u7684\n    action = models.CharField(max_length=100)\n    timestamp = models.DateTimeField(auto_now_add=True)\n    parameters = models.JSONField(blank=True, null=True) # \u64cd\u4f5c\u53c2\u6570\n\n    def __str__(self):\n        return f\"{self.user.email if self.user else 'System'} used {self.device.name}: {self.action}\"\n\n\nclass DeviceGroup(models.Model):\n    name = models.CharField(max_length=100, unique=True)\n    description = models.TextField(blank=True, null=True)\n    devices = models.ManyToManyField(Device, related_name='device_groups', blank=True)\n    # created_by = models.ForeignKey(User, related_name='created_device_groups', on_delete=models.SET_NULL, null=True)\n\n    def __str__(self):\n        return self.name\n\nclass PermissionLevel(models.TextChoices):\n    NONE = 'none', '\u4e0d\u53ef\u89c1'\n    VISIBLE = 'visible', '\u53ef\u89c1'\n    USABLE = 'usable', '\u53ef\u4f7f\u7528'\n    CONFIGURABLE = 'configurable', '\u53ef\u914d\u7f6e'\n    MONITORABLE = 'monitorable', '\u53ef\u76d1\u89c6'\n    MANAGEABLE = 'manageable', '\u53ef\u7ba1\u7406'\n\n# \u7528\u6237\u5bf9\u5355\u4e2a\u8bbe\u5907\u7684\u6743\u9650\nclass UserDevicePermission(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='device_permissions')\n    device = models.ForeignKey(Device, on_delete=models.CASCADE, related_name='user_permissions')\n    # device_group = models.ForeignKey(DeviceGroup, on_delete=models.CASCADE, null=True, blank=True) # \u6587\u6863\u4e2d\u8bf4\u7684\u662f\u5bf9\u201c\u8bbe\u5907\u201d\u7684\u6743\u9650\uff0cdevice_group \u6743\u9650\u53ef\u4ee5\u901a\u8fc7 UserGroupDevicePermission\n    permission_level = models.CharField(max_length=20, choices=PermissionLevel.choices)\n\n    class Meta:\n        unique_together = ('user', 'device') # \u4e00\u4e2a\u7528\u6237\u5bf9\u4e00\u4e2a\u8bbe\u5907\u7684\u6743\u9650\u662f\u552f\u4e00\u7684\n\n    def __str__(self):\n        return f\"{self.user.email} - {self.device.name}: {self.get_permission_level_display()}\"\n\n# \u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\nclass UserDeviceGroupPermission(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='device_group_permissions')\n    device_group = models.ForeignKey(DeviceGroup, on_delete=models.CASCADE, related_name='user_permissions')\n    permission_level = models.CharField(max_length=20, choices=PermissionLevel.choices)\n\n    class Meta:\n        unique_together = ('user', 'device_group') # \u4e00\u4e2a\u7528\u6237\u5bf9\u4e00\u4e2a\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u662f\u552f\u4e00\u7684\n\n    def __str__(self):\n        return f\"{self.user.email} - {self.device_group.name}: {self.get_permission_level_display()}\"\n\n# \u7528\u6237\u7ec4\u5bf9\u5355\u4e2a\u8bbe\u5907/\u8bbe\u5907\u7ec4\u7684\u6743\u9650\nclass GroupDevicePermission(models.Model):\n    user_group = models.ForeignKey(UserGroup, on_delete=models.CASCADE, related_name='group_device_permissions')\n    device = models.ForeignKey(Device, on_delete=models.CASCADE, null=True, blank=True, related_name='group_permissions')\n    device_group = models.ForeignKey(DeviceGroup, on_delete=models.CASCADE, null=True, blank=True, related_name='user_group_permissions')\n    permission_level = models.CharField(max_length=20, choices=PermissionLevel.choices)\n\n    class Meta:\n        # \u4e00\u4e2a\u7528\u6237\u7ec4\u5bf9\u4e00\u4e2a\u8bbe\u5907\u6216\u4e00\u4e2a\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u662f\u552f\u4e00\u7684 (\u4f46\u4e0d\u80fd\u540c\u65f6\u6307\u5b9a device \u548c device_group)\n        # \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 clean \u65b9\u6cd5\u6765\u6821\u9a8c\n        unique_together = [\n            ('user_group', 'device'),\n            ('user_group', 'device_group'),\n        ]\n\n    def clean(self):\n        from django.core.exceptions import ValidationError\n        if self.device and self.device_group:\n            raise ValidationError(\"Cannot assign permission to both a device and a device group simultaneously for a single user group permission entry.\")\n        if not self.device and not self.device_group:\n            raise ValidationError(\"Must assign permission to either a device or a device group for a user group.\")\n\n    def __str__(self):\n        target_name = self.device.name if self.device else self.device_group.name\n        target_type = \"Device\" if self.device else \"DeviceGroup\"\n__        return f\"Group: {self.user_group.name} - {target_type}: {target_name}: {self.get_permission_level_display()}\"_\n</code></pre> <p>ER \u56fe\uff1a</p> <pre><code>**classDiagram\ndirection BT\nclass api_device {\n   varchar(100) name\n   varchar(100) device_identifier\n   char(39) ip_address\n   int unsigned port\n   varchar(50) device_type\n   varchar(50) brand\n   longtext description\n   varchar(20) status\n   double current_power_consumption\n   int unsigned uptime_seconds\n   datetime(6) last_heartbeat\n   bigint id\n}\nclass api_devicegroup {\n   varchar(100) name\n   longtext description\n   bigint id\n}\nclass api_devicegroup_devices {\n   bigint devicegroup_id\n   bigint device_id\n   bigint id\n}\nclass api_devicelog {\n   datetime(6) timestamp\n   longtext log_message\n   bigint device_id\n   bigint id\n}\nclass api_deviceusagerecord {\n   varchar(100) action\n   datetime(6) timestamp\n   json parameters\n   bigint device_id\n   bigint user_id\n   bigint id\n}\nclass api_groupdevicepermission {\n   varchar(20) permission_level\n   bigint device_id\n   bigint device_group_id\n   bigint user_group_id\n   bigint id\n}\nclass api_user {\n   varchar(128) password\n   datetime(6) last_login\n   tinyint(1) is_superuser\n   varchar(150) username\n   varchar(150) first_name\n   varchar(150) last_name\n   tinyint(1) is_staff\n   tinyint(1) is_active\n   datetime(6) date_joined\n   varchar(254) email\n   bigint id\n}\nclass api_user_groups {\n   bigint user_id\n   int group_id\n   bigint id\n}\nclass api_user_user_permissions {\n   bigint user_id\n   int permission_id\n   bigint id\n}\nclass api_userdevicepermission {\n   varchar(20) permission_level\n   bigint device_id\n   bigint user_id\n   bigint id\n}\nclass api_usergroup {\n   varchar(100) name\n   longtext description\n   bigint id\n}\nclass api_usergroup_members {\n   bigint usergroup_id\n   bigint user_id\n   bigint id\n}\nclass auth_group {\n   varchar(150) name\n   int id\n}\nclass auth_group_permissions {\n   int group_id\n   int permission_id\n   bigint id\n}\nclass auth_permission {\n   varchar(255) name\n   int content_type_id\n   varchar(100) codename\n   int id\n}\nclass auth_user {\n   varchar(128) password\n   datetime(6) last_login\n   tinyint(1) is_superuser\n   varchar(150) username\n   varchar(150) first_name\n   varchar(150) last_name\n   varchar(254) email\n   tinyint(1) is_staff\n   tinyint(1) is_active\n   datetime(6) date_joined\n   int id\n}\nclass auth_user_groups {\n   int user_id\n   int group_id\n   bigint id\n}\nclass auth_user_user_permissions {\n   int user_id\n   int permission_id\n   bigint id\n}\nclass django_admin_log {\n   datetime(6) action_time\n   longtext object_id\n   varchar(200) object_repr\n   smallint unsigned action_flag\n   longtext change_message\n   int content_type_id\n   int user_id\n   int id\n}\nclass django_content_type {\n   varchar(100) app_label\n   varchar(100) model\n   int id\n}\nclass django_migrations {\n   varchar(255) app\n   varchar(255) name\n   datetime(6) applied\n   bigint id\n}\nclass django_session {\n   longtext session_data\n   datetime(6) expire_date\n   varchar(40) session_key\n}\n\napi_devicegroup_devices  --&gt;  api_device : device_id:id\napi_devicegroup_devices  --&gt;  api_devicegroup : devicegroup_id:id\napi_devicelog  --&gt;  api_device : device_id:id\napi_deviceusagerecord  --&gt;  api_device : device_id:id\napi_deviceusagerecord  --&gt;  api_user : user_id:id\napi_groupdevicepermission  --&gt;  api_device : device_id:id\napi_groupdevicepermission  --&gt;  api_devicegroup : device_group_id:id\napi_groupdevicepermission  --&gt;  api_usergroup : user_group_id:id\napi_user_groups  --&gt;  api_user : user_id:id\napi_user_groups  --&gt;  auth_group : group_id:id\napi_user_user_permissions  --&gt;  api_user : user_id:id\napi_user_user_permissions  --&gt;  auth_permission : permission_id:id\napi_userdevicepermission  --&gt;  api_device : device_id:id\napi_userdevicepermission  --&gt;  api_user : user_id:id\napi_usergroup_members  --&gt;  api_user : user_id:id\napi_usergroup_members  --&gt;  api_usergroup : usergroup_id:id\nauth_group_permissions  --&gt;  auth_group : group_id:id\nauth_group_permissions  --&gt;  auth_permission : permission_id:id\nauth_permission  --&gt;  django_content_type : content_type_id:id\nauth_user_groups  --&gt;  auth_group : group_id:id\nauth_user_groups  --&gt;  auth_user : user_id:id\nauth_user_user_permissions  --&gt;  auth_permission : permission_id:id\nauth_user_user_permissions  --&gt;  auth_user : user_id:id\ndjango_admin_log  --&gt;  auth_user : user_id:id\n****django_admin_log  --&gt;  django_content_type : content_type_id:id**\n</code></pre> <p></p>"},{"location":"design/device/","title":"\u8bbe\u5907\u63a5\u53e3","text":"<p>\u8fd9\u4e2a\u6587\u6863\u4e3b\u8981\u7528\u4e8e\u534f\u5b9a\u540e\u7aef\u4e0e\u8bbe\u5907\u4ea4\u4e92\u7684\u63a5\u53e3\u3002\u8bbe\u5907\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 docker \u5bb9\u5668\u6216\u8005\u865a\u62df\u673a\u6a21\u62df\uff0c\u5bf9\u5916\u66b4\u9732 http \u63a5\u53e3\uff0c\u65b9\u4fbf\u540e\u7aef\u540c\u5b66\u5f00\u53d1\u3002\u6570\u636e\u4f20\u8f93\u4f7f\u7528 json \u683c\u5f0f\u3002\u4e3a\u4e86\u5b9e\u73b0\u6743\u9650\u63a7\u5236\uff0c\u8bbe\u5907\u6a21\u5757\u4f5c\u4e3a\u540e\u7aef\u7684\u4e0b\u5c5e\u6a21\u5757\u5b58\u5728\uff0c\u53ea\u63a5\u53d7\u540e\u7aef ip \u53d1\u9001\u7684\u8bf7\u6c42\u3002</p> <p>\u5b9e\u73b0\u7ec6\u8282\u8be6\u89c1 github \u4ed3\u5e93\uff1ahttps://github.com/sysu-aicpm/virtual-device/</p>"},{"location":"design/device/#_1","title":"\u8bbe\u5907\u7c7b\u578b","text":"<p>\u5bf9\u5e94\u6570\u636e\u5e93\u4e2d  <code>api_device</code> \u7684 <code>device_type</code></p> <ul> <li><code>air_conditioner</code> \u7a7a\u8c03</li> <li><code>refrigerator</code> \u51b0\u7bb1</li> <li><code>light</code> \u706f</li> <li><code>lock</code> \u9501</li> <li><code>camera</code> \u6444\u50cf\u5934</li> </ul>"},{"location":"design/device/#_2","title":"\u67e5\u8be2\u8bbe\u5907\u4fe1\u606f","text":"<ul> <li>\u8def\u7531\uff1a/query</li> <li>\u8f93\u5165\u53c2\u6570\uff1alist[key]</li> <li>\u8f93\u51fa\u53c2\u6570\uff1ainfo_dict</li> <li>\u6ce8\u91ca\uff1a\u4f20\u5165\u9700\u8981\u7684 key\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178\uff0c\u5b57\u5178\u7684 key \u9700\u8981\u8986\u76d6\u4f20\u5165\u7684 key\u3002key \u53ef\u4ee5\u5305\u62ec\u529f\u8017\u3001\u72b6\u6001\u7b49</li> </ul>"},{"location":"design/device/#_3","title":"\u63a7\u5236\u8bbe\u5907","text":"<ul> <li>\u8def\u7531\uff1a/control</li> <li>\u8f93\u5165\u53c2\u6570\uff1aaction\uff08string\uff09\u3001param\uff08dict\uff09</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asingal\uff08bool\uff09</li> <li>\u6ce8\u91ca\uff1a\u4f20\u5165\u6267\u884c\u7684\u52a8\u4f5c action\uff0c\u5e76\u9644\u52a0\u9700\u8981\u7684\u53c2\u6570 param\u3002\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002\u5982\u679c\u5931\u8d25\uff0c\u901a\u8fc7 http \u72b6\u6001\u7801\u7b49\u65b9\u5f0f\u8fd4\u56de\u9519\u8bef\u539f\u56e0</li> </ul>"},{"location":"design/device/#_4","title":"\u5fc3\u8df3","text":"<ul> <li>\u5411 <code>{controller_base_url}/devices/heartbeat/</code> \u53d1\u9001\u5fc3\u8df3\u4fdd\u6d3b</li> <li>\u6ce8\u91ca\uff1a\u5e94\u8be5\u5468\u671f\u6027\u5411\u540e\u7aef\u7a0b\u5e8f\u53d1\u9001\u5fc3\u8df3\u5305</li> </ul> <p>\u5fc3\u8df3\u5305\u4e2d\u4f1a\u5305\u542b\u8bbe\u5907\u4e8b\u4ef6</p>"},{"location":"design/device/#_5","title":"\u5c40\u57df\u7f51\u53d1\u73b0","text":"<ul> <li>\u63d0\u4f9b\u4e86\u5c40\u57df\u7f51\u53d1\u73b0\u7684\u529f\u80fd\uff0c\u4f7f\u7528 SSDP\uff0c\u4e3b\u52a8\u5728\u5c40\u57df\u7f51\u5185\u5e7f\u64ad\u4ece\u800c\u88ab\u5176\u4ed6\u4e3b\u673a\u53d1\u73b0</li> </ul> <p>\u8bbe\u5907\u5728\u542f\u52a8\u540e\u4f1a\u5f00\u59cb SSDP \u5e7f\u64ad\uff0c\u7b49\u5f85\u540e\u7aef\u53d1\u73b0\u3002</p> <p>\u540e\u7aef\u5728\u53d1\u73b0\u8bbe\u5907\u540e\uff0c\u8bbe\u5907\u4f1a\u5c06\u81ea\u8eab\u7684\u4fe1\u606f\uff0c\u5982\u8bbe\u5907 ip \u5730\u5740\u548c\u7aef\u53e3\u3001\u8bbe\u5907\u6807\u8bc6\u7b26\u548c\u540d\u79f0\u7b49\u53d1\u9001\u7ed9\u540e\u7aef\uff0c\u540e\u7aef\u4f1a\u5c06\u81ea\u8eab\u5730\u5740\u53d1\u9001\u7ed9\u8bbe\u5907\uff0c\u4ece\u800c\u5b9e\u73b0\u540e\u7aef\u4e0e\u8bbe\u5907\u7684\u5bf9\u63a5</p> <p>\u4e4b\u540e\u8bbe\u5907\u4f1a\u4e00\u76f4\u53d1\u9001\u5fc3\u8df3\u7ed9\u540e\u7aef\uff0c\u5728\u5fc3\u8df3\u4e2d\u8bb0\u5f55\u81ea\u8eab\u529f\u7387\u3001\u53d1\u751f\u4e8b\u4ef6\u7b49\u4fe1\u606f</p>"},{"location":"design/device/#api","title":"API \u6587\u6863","text":"<p>\u7c98\u8d34\u81ea https://github.com/sysu-aicpm/virtual-device/blob/main/docs/API.md</p>"},{"location":"design/device/#http","title":"HTTP \u63a5\u53e3","text":""},{"location":"design/device/#1","title":"1. \u67e5\u8be2\u8bbe\u5907\u4fe1\u606f","text":"<p>\u8bf7\u6c42</p> <ul> <li>\u8def\u5f84\uff1a<code>/query</code></li> <li>\u65b9\u6cd5\uff1aPOST</li> <li>Content-Type: application/json</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"keys\": [\"device_id\", \"device_type\", \"power\", \"status\", \"temperature\", \"brightness\", \"locked\", \"recording\", \"resolution\"]\n}\n</code></pre> <p>\u54cd\u5e94</p> <ul> <li>Content-Type: application/json</li> <li>\u72b6\u6001\u7801\uff1a200\uff08\u6210\u529f\uff09</li> <li>\u54cd\u5e94\u4f53\u793a\u4f8b\uff08\u51b0\u7bb1\uff09\uff1a</li> </ul> <pre><code>{\n    \"device_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"device_type\": \"refrigerator\",\n    \"power\": 100,\n    \"status\": \"online\",\n    \"temperature\": 4\n}\n</code></pre>"},{"location":"design/device/#2","title":"2. \u63a7\u5236\u8bbe\u5907","text":"<p>\u8bf7\u6c42</p> <ul> <li>\u8def\u5f84\uff1a<code>/control</code></li> <li>\u65b9\u6cd5\uff1aPOST</li> <li>Content-Type: application/json</li> </ul> <p>\u54cd\u5e94</p> <ul> <li>Content-Type: application/json</li> <li> <p>\u72b6\u6001\u7801\uff1a</p> </li> <li> <p>200\uff1a\u6210\u529f</p> </li> <li>400\uff1a\u8bf7\u6c42\u683c\u5f0f\u9519\u8bef</li> <li>404\uff1a\u8bbe\u5907\u4e0d\u5b58\u5728</li> <li>500\uff1a\u5185\u90e8\u9519\u8bef</li> </ul> <p>\u5404\u8bbe\u5907\u652f\u6301\u7684\u63a7\u5236\u547d\u4ee4\uff1a</p>"},{"location":"design/device/#_6","title":"\u51b0\u7bb1","text":"<pre><code>{\n    \"action\": \"set_temperature\",\n    \"params\": {\n        \"temperature\": 4  _// \u8303\u56f4\uff1a-20\u523010\u2103_\n    }\n}\n</code></pre> <p>\u6216</p> <pre><code>{\n    \"action\": \"switch\",\n    \"params\": {\n        \"state\": \"on\"  _// \"on\" \u6216 \"off\"_\n    }\n}\n</code></pre>"},{"location":"design/device/#_7","title":"\u706f","text":"<pre><code>{\n    \"action\": \"set_brightness\",\n    \"params\": {\n        \"brightness\": 80  _// \u8303\u56f4\uff1a0-100_\n    }\n}\n</code></pre> <p>\u6216</p> <pre><code>{\n    \"action\": \"switch\",\n    \"params\": {\n        \"state\": \"on\"  _// \"on\" \u6216 \"off\"_\n    }\n}\n</code></pre>"},{"location":"design/device/#_8","title":"\u95e8\u9501","text":"<pre><code>{\n    \"action\": \"set_lock\",\n    \"params\": {\n        \"state\": \"lock\"  _// \"lock\" \u6216 \"unlock\"_\n    }\n}\n</code></pre>"},{"location":"design/device/#_9","title":"\u6444\u50cf\u5934","text":"<pre><code>{\n    \"action\": \"set_recording\",\n    \"params\": {\n        \"state\": \"start\"  _// \"start\" \u6216 \"stop\"_\n    }\n}\n</code></pre> <p>\u6216</p> <pre><code>{\n    \"action\": \"set_resolution\",\n    \"params\": {\n        \"resolution\": \"1080p\"  _// \"720p\", \"1080p\" \u6216 \"4k\"_\n    }\n}\n</code></pre>"},{"location":"design/device/#_10","title":"\u8bbe\u5907\u4e3b\u52a8\u53d1\u9001\u7684\u6570\u636e\u5305","text":""},{"location":"design/device/#_11","title":"\u5fc3\u8df3\u5305\uff08\u5305\u542b\u8bbe\u5907\u4e8b\u4ef6\uff09","text":"<p>\u8bf7\u6c42</p> <ul> <li>URL\uff1a<code>{CONTROLLER_URL}/api/v1/devices/heartbeat/</code></li> <li>\u65b9\u6cd5\uff1aPOST</li> <li>Content-Type: application/json</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_identifier\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"timestamp\": \"2024-03-20T10:30:00.000Z\",\n    \"status\": \"online\",\n    \"data\": {\n        \"current_power_consumption\": 102.5,\n        \"temperature_change\": {\n            \"temperature\": 4.2\n        },\n        \"door_state_change\": {\n            \"door_open\": true\n        }\n    }\n}\n</code></pre> <p>\u8bbe\u5907\u72b6\u6001\u8bf4\u660e</p> <ul> <li><code>online</code>: \u8bbe\u5907\u5728\u7ebf\u6b63\u5e38\u5de5\u4f5c</li> <li><code>offline</code>: \u8bbe\u5907\u79bb\u7ebf</li> <li><code>error</code>: \u8bbe\u5907\u51fa\u73b0\u9519\u8bef</li> </ul> <p>\u5404\u8bbe\u5907\u4e8b\u4ef6\u6570\u636e\u5b57\u6bb5</p>"},{"location":"design/device/#_12","title":"\u51b0\u7bb1","text":"<pre><code>{\n    \"door_state_change\": {\n        \"door_open\": true\n    },\n    \"temperature_change\": {\n        \"temperature\": 4.2\n    },\n    \"power_state_change\": {\n        \"power_state\": \"on\"\n    }\n}\n</code></pre>"},{"location":"design/device/#_13","title":"\u706f","text":"<pre><code>{\n    \"brightness_change\": {\n        \"brightness\": 80\n    },\n    \"power_state_change\": {\n        \"power_state\": \"on\"\n    }\n}\n</code></pre>"},{"location":"design/device/#_14","title":"\u95e8\u9501","text":"<pre><code>{\n    \"lock_state_change\": {\n        \"lock_state\": \"locked\"\n    },\n    \"battery_level\": {\n        \"battery\": 95.5\n    }\n}\n</code></pre>"},{"location":"design/device/#_15","title":"\u6444\u50cf\u5934","text":"<pre><code>{\n    \"camera_state\": {\n        \"camera_state\": \"recording\"\n    },\n    \"resolution_change\": {\n        \"resolution\": \"1080p\"\n    },\n    \"storage_usage\": {\n        \"storage_used_mb\": 250\n    }\n}\n</code></pre>"},{"location":"design/frontend/","title":"\u524d\u7aef\u5f00\u53d1","text":"<p>\u672c\u6587\u6863\u65e8\u5728\u4e3a AICPM \u667a\u80fd\u5bb6\u5c45\u6743\u9650\u7ba1\u7406\u7cfb\u7edf \u7684\u524d\u7aef\u5e94\u7528\u63d0\u4f9b\u4e00\u4efd\u5168\u9762\u3001\u8be6\u5c3d\u7684\u6280\u672f\u4e0e\u5f00\u53d1\u6307\u5357\u3002\u524d\u7aef\u5e94\u7528\u57fa\u4e8e <code>Flutter</code> \u6846\u67b6\u6784\u5efa\uff0c\u65e8\u5728\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u4e2a\u9ad8\u6027\u80fd\u3001\u8de8\u5e73\u53f0\uff08iOS, Android, Web, Desktop\uff09\u7684\u7edf\u4e00\u4f53\u9a8c\u3002</p> <p>\u672c\u6587\u6863\u7684\u76ee\u6807\u8bfb\u8005\u5305\u62ec\u65b0\u52a0\u5165\u7684\u5f00\u53d1\u4eba\u5458\u3001\u9879\u76ee\u7ef4\u62a4\u4eba\u5458\u4ee5\u53ca\u5e0c\u671b\u6df1\u5165\u4e86\u89e3\u524d\u7aef\u5b9e\u73b0\u7ec6\u8282\u7684\u56e2\u961f\u6210\u5458\u3002\u5b83\u5c06\u6db5\u76d6\u6280\u672f\u9009\u578b\u3001\u7cfb\u7edf\u67b6\u6784\u3001\u9879\u76ee\u7ed3\u6784\u3001\u6838\u5fc3\u529f\u80fd\u3001\u524d\u540e\u7aef\u4ea4\u4e92\u3001UI/UX \u8bbe\u8ba1\u7b49\u591a\u4e2a\u65b9\u9762\uff0c\u4ee5\u671f\u4fc3\u8fdb\u56e2\u961f\u534f\u4f5c\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5e76\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\u548c\u9879\u76ee\u7684\u957f\u671f\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"design/frontend/#_1","title":"\u7b2c\u4e00\u7ae0\uff1a\u6280\u672f\u6808\u4e0e\u67b6\u6784\u603b\u89c8","text":"<p>\u672c\u7ae0\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u9879\u76ee\u524d\u7aef\u6240\u91c7\u7528\u7684\u6838\u5fc3\u6280\u672f\u3001\u6846\u67b6\u548c\u7b2c\u4e09\u65b9\u5e93\uff0c\u5e76\u9610\u8ff0\u5176\u80cc\u540e\u7684\u67b6\u6784\u601d\u60f3\u3002</p>"},{"location":"design/frontend/#11","title":"1.1 \u6838\u5fc3\u6280\u672f\u6808","text":"<p>\u4e0b\u8868\u603b\u7ed3\u4e86\u9879\u76ee\u6240\u4f9d\u8d56\u7684\u5173\u952e\u6280\u672f\u548c\u5e93\uff1a</p> \u7c7b\u522b\u6280\u672f/\u5e93\u7248\u672c\u4e3b\u8981\u7528\u9014 **\u6838\u5fc3\u6846\u67b6**Flutter`sdk: '&gt;=3.8.0 &lt;4.0.0'`\u6784\u5efa\u8de8\u5e73\u53f0\u7528\u6237\u754c\u9762\u7684\u6838\u5fc3\u6846\u67b6\u3002 **\u72b6\u6001\u7ba1\u7406**`flutter_bloc``^9.1.1`\u4e1a\u52a1\u903b\u8f91\u4e0eUI\u5206\u79bb\uff0c\u5b9e\u73b0\u53ef\u9884\u6d4b\u3001\u53ef\u6d4b\u8bd5\u7684\u72b6\u6001\u7ba1\u7406\u3002 **\u7f51\u7edc\u8bf7\u6c42**`dio``^5.8.0+1`\u529f\u80fd\u5f3a\u5927\u7684HTTP\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u4e0e\u540e\u7aefAPI\u8fdb\u884c\u9ad8\u6548\u901a\u4fe1\u3002 **\u5b89\u5168\u5b58\u50a8**`flutter_secure_storage``9.0.0`\u5b58\u50a8\u8ba4\u8bc1Token\u3001\u5bc6\u94a5\u7b49\u654f\u611f\u4fe1\u606f\u3002 **\u672c\u5730\u7f13\u5b58**`shared_preferences``^2.5.3`\u5b58\u50a8\u7528\u6237\u504f\u597d\u8bbe\u7f6e\u3001\u8bbe\u5907\u72b6\u6001\u7b49\u975e\u654f\u611f\u4fe1\u606f\u3002 **AI\u529f\u80fd**`google_generative_ai``^0.4.7`\u96c6\u6210Google\u7684\u751f\u6210\u5f0fAI\u6a21\u578b\uff0c\u53ef\u80fd\u7528\u4e8e\u667a\u80fd\u5ba2\u670d\u3001\u5185\u5bb9\u751f\u6210\u7b49\u3002 **\u6570\u636e\u6a21\u578b**`equatable``^2.0.7`\u7b80\u5316\u5bf9\u8c61\u6bd4\u8f83\uff0c\u5e38\u7528\u4e8eBloc\u7684State\u548cEvent\u3002 **UI\u76f8\u5173**`flutter_svg``^2.1.0`\u52a0\u8f7d\u548c\u6e32\u67d3SVG\u683c\u5f0f\u7684\u77e2\u91cf\u56fe\u6807\u3002 `flutter_markdown``^0.7.7`\u5728\u5e94\u7528\u5185\u6e32\u67d3Markdown\u683c\u5f0f\u7684\u6587\u672c\u3002 `cupertino_icons``^1.0.2`\u63d0\u4f9biOS\u98ce\u683c\u7684\u56fe\u6807\u3002 **\u5de5\u5177\u5e93**`uuid``^4.5.1`\u751f\u6210\u552f\u4e00\u6807\u8bc6\u7b26 (UUID)\u3002 `collection``^1.19.1`\u63d0\u4f9b\u66f4\u4e30\u5bcc\u7684\u96c6\u5408\u64cd\u4f5c\u529f\u80fd\u3002 `synchronized``^3.3.1`\u786e\u4fdd\u5173\u952e\u4ee3\u7801\u5757\u7684\u7ebf\u7a0b\u5b89\u5168\u6267\u884c\u3002 **\u5f00\u53d1\u4f9d\u8d56**`flutter_lints``^6.0.0`\u63d0\u4f9b\u4ee3\u7801\u89c4\u8303\u548c\u9759\u6001\u5206\u6790\u89c4\u5219\u3002 `build_runner``^2.4.15`\u7528\u4e8e\u4ee3\u7801\u751f\u6210\uff0c\u4f8b\u5982\u5728 BLoC \u6216\u5e8f\u5217\u5316\u4e2d\u3002 `bloc_test``^10.0.0`\u4e3a BLoC \u63d0\u4f9b\u5355\u5143\u6d4b\u8bd5\u652f\u6301\u3002 `flutter_launcher_icons``^0.14.4`\u6839\u636e\u8d44\u6e90\u6587\u4ef6\u81ea\u52a8\u751f\u6210\u5e94\u7528\u542f\u52a8\u56fe\u6807\u3002"},{"location":"design/frontend/#12","title":"1.2 \u67b6\u6784\u6982\u8ff0","text":"<p>\u9879\u76ee\u91c7\u7528\u4ee5 BLoC (Business Logic Component) \u4e3a\u6838\u5fc3\u7684\u73b0\u4ee3\u54cd\u5e94\u5f0f\u67b6\u6784\u3002\u8fd9\u79cd\u67b6\u6784\u9009\u62e9\u7684\u51fa\u53d1\u70b9\u662f\u5b9e\u73b0 \u4e1a\u52a1\u903b\u8f91\u4e0e\u89c6\u56fe\uff08UI\uff09\u7684\u5f7b\u5e95\u5206\u79bb\u3002</p> <p>\u5176\u6838\u5fc3\u601d\u60f3\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5206\u5c42\u6e05\u6670:</p> </li> <li> <p>UI \u5c42 (Presentation Layer): \u7531 Flutter \u7684 Widgets \u6784\u6210\uff0c\u8d1f\u8d23\u6e32\u67d3\u754c\u9762\u548c\u54cd\u5e94\u7528\u6237\u8f93\u5165\u3002\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u4e1a\u52a1\u903b\u8f91\uff0c\u800c\u662f\u5c06\u7528\u6237\u7684\u64cd\u4f5c\u610f\u56fe\uff08\u5982\u70b9\u51fb\u6309\u94ae\uff09\u8f6c\u5316\u4e3a <code>Event</code> \u53d1\u9001\u7ed9 BLoC\u3002</p> </li> <li>\u4e1a\u52a1\u903b\u8f91\u5c42 (Business Logic Layer): \u7531 <code>Bloc</code> \u6216 <code>Cubit</code> \u5b9e\u73b0\u3002\u5b83\u63a5\u6536\u6765\u81ea UI \u5c42\u7684 <code>Event</code>\uff0c\u5904\u7406\u4e1a\u52a1\u903b\u8f91\uff08\u53ef\u80fd\u6d89\u53ca\u8c03\u7528\u6570\u636e\u5c42\uff09\uff0c\u5e76\u53d1\u51fa\u65b0\u7684 <code>State</code>\u3002</li> <li>\u6570\u636e\u5c42 (Data Layer): \u8d1f\u8d23\u6570\u636e\u7684\u83b7\u53d6\u548c\u7ba1\u7406\uff0c\u5305\u62ec\u4e0e\u540e\u7aef API \u7684\u901a\u4fe1\uff08\u901a\u8fc7 <code>dio</code>\uff09\u3001\u672c\u5730\u6570\u636e\u5e93\u6216\u7f13\u5b58\uff08<code>shared_preferences</code>, <code>flutter_secure_storage</code>\uff09\u7684\u8bfb\u5199\u3002</li> <li> <p>\u5355\u5411\u6570\u636e\u6d41:</p> </li> <li> <p>UI \u53d1\u9001 <code>Event</code> \u5230 BLoC\u3002</p> </li> <li>BLoC \u5904\u7406 <code>Event</code>\uff0c\u5e76\u53ef\u80fd\u4e0e\u6570\u636e\u5c42\u4ea4\u4e92\u3002</li> <li>BLoC \u53d1\u51fa\u65b0\u7684 <code>State</code>\u3002</li> <li>UI \u76d1\u542c BLoC \u7684 <code>State</code> \u53d8\u5316\uff0c\u5e76\u6839\u636e\u65b0\u7684 <code>State</code> \u91cd\u7ed8\u81ea\u8eab\u3002</li> </ol> <p>\u8fd9\u79cd\u6a21\u5f0f\u5e26\u6765\u4e86\u8bf8\u591a\u597d\u5904\uff1a</p> <ul> <li>\u9ad8\u53ef\u6d4b\u8bd5\u6027: \u7531\u4e8e\u4e1a\u52a1\u903b\u8f91\u72ec\u7acb\u4e8e UI\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u5730\u5bf9 BLoC \u8fdb\u884c\u5355\u5143\u6d4b\u8bd5\u3002</li> <li>\u9ad8\u53ef\u7ef4\u62a4\u6027: \u6e05\u6670\u7684\u804c\u8d23\u5206\u79bb\u4f7f\u5f97\u4ee3\u7801\u66f4\u6613\u4e8e\u7406\u89e3\u3001\u4fee\u6539\u548c\u6269\u5c55\u3002</li> <li>\u4ee3\u7801\u590d\u7528: \u4e1a\u52a1\u903b\u8f91\u53ef\u4ee5\u88ab\u4e0d\u540c\u7684 UI \u7ec4\u4ef6\u590d\u7528\u3002</li> <li>\u5f00\u53d1\u8005\u53cb\u597d: BLoC \u63d0\u4f9b\u4e86\u6e05\u6670\u7684\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\uff0c\u8ba9\u5f00\u53d1\u8005\u80fd\u8f7b\u677e\u8ffd\u8e2a\u72b6\u6001\u53d8\u5316\u7684\u5b8c\u6574\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"design/frontend/#_2","title":"\u7b2c\u4e8c\u7ae0\uff1a\u9879\u76ee\u6587\u4ef6\u7ed3\u6784","text":"<p>\u4e00\u4e2a\u826f\u597d\u3001\u7edf\u4e00\u7684\u76ee\u5f55\u7ed3\u6784\u662f\u9ad8\u6548\u534f\u4f5c\u7684\u57fa\u7840\u3002\u672c\u7ae0\u5c06\u8be6\u7ec6\u89e3\u6790 <code>frontend/lib</code> \u76ee\u5f55\u4e0b\u7684\u6838\u5fc3\u6587\u4ef6\u7ec4\u7ec7\u65b9\u5f0f\u3002\u9879\u76ee\u9075\u5faa\u529f\u80fd\u4f18\u5148 (Feature-first) \u7684\u5206\u5305\u7b56\u7565\uff0c\u540c\u65f6\u7ed3\u5408\u4e86\u5206\u5c42\u67b6\u6784 (Layered Architecture) \u7684\u601d\u60f3\u3002</p> <pre><code>lib/\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 models/               \n\u2502   \u251c\u2500\u2500 theme/                \n\u2502   \u251c\u2500\u2500 user_group/           \n\u2502   \u251c\u2500\u2500 user_group_list/      \n\u2502   \u251c\u2500\u2500 user_group_permission/ \n\u2502   \u251c\u2500\u2500 user_list/            \n\u2502   \u251c\u2500\u2500 user_permission/      \n\u2502   \u251c\u2500\u2500 api_client.dart       \n\u2502   \u2514\u2500\u2500 app_bloc_observer.dart  \n\u251c\u2500\u2500 bloc/\n\u2502   \u251c\u2500\u2500 auth/\n\u2502   \u251c\u2500\u2500 device_detail/\n\u2502   \u251c\u2500\u2500 device_group/\n\u2502   \u251c\u2500\u2500 device_group_list/\n\u2502   \u251c\u2500\u2500 device_list/\n\u2502   \u251c\u2500\u2500 user_group/\n\u2502   \u251c\u2500\u2500 user_group_list/\n\u2502   \u251c\u2500\u2500 user_group_permission/\n\u2502   \u251c\u2500\u2500 user_list/\n\u2502   \u2514\u2500\u2500 user_permission/\n\u251c\u2500\u2500 config/\n\u2502   \u2514\u2500\u2500 env.dart\n\u251c\u2500\u2500 flutter_chat_desktop/\n\u2502   \u2514\u2500\u2500 ... (\u72ec\u7acb\u7684AI\u804a\u5929\u529f\u80fd\u6a21\u5757)\n\u251c\u2500\u2500 pages/\n\u2502   \u251c\u2500\u2500 admin/\n\u2502   \u2502   \u251c\u2500\u2500 device_group_detail_page.dart\n\u2502   \u2502   \u251c\u2500\u2500 device_group_list_page.dart\n\u2502   \u2502   \u251c\u2500\u2500 user_group_detail_page.dart\n\u2502   \u2502   \u251c\u2500\u2500 user_group_list_page.dart\n\u2502   \u2502   \u251c\u2500\u2500 user_group_permission_page.dart\n\u2502   \u2502   \u251c\u2500\u2500 user_list_page.dart\n\u2502   \u2502   \u2514\u2500\u2500 user_permission_page.dart\n\u2502   \u251c\u2500\u2500 api_url_setting_page.dart\n\u2502   \u251c\u2500\u2500 device_detail_page.dart\n\u2502   \u251c\u2500\u2500 device_list_page.dart\n\u2502   \u251c\u2500\u2500 home_page.dart\n\u2502   \u251c\u2500\u2500 login_page.dart\n\u2502   \u2514\u2500\u2500 register_page.dart\n\u251c\u2500\u2500 providers/\n\u2502   \u2514\u2500\u2500 theme_provider.dart\n\u251c\u2500\u2500 utils/\n\u2502   \u251c\u2500\u2500 secure_storage.dart\n\u2502   \u2514\u2500\u2500 styles.dart\n\u251c\u2500\u2500 widgets/\n\u2502   \u2514\u2500\u2500 theme_toggle_button.dart\n\u2514\u2500\u2500 main.dart\n</code></pre>"},{"location":"design/frontend/#21","title":"2.1 \u9876\u7ea7\u76ee\u5f55\u89e3\u6790","text":"<ul> <li> <p>main.dart: \u5e94\u7528\u5165\u53e3\u3002</p> </li> <li> <p>\u804c\u8d23: \u521d\u59cb\u5316\u6574\u4e2a Flutter \u5e94\u7528\uff0c\u5305\u62ec\u8bbe\u7f6e\u5168\u5c40\u7684 BlocObserver\u3001\u521d\u59cb\u5316\u670d\u52a1\uff08\u5982 API Client\uff09\u3001\u914d\u7f6e Provider\uff0c\u5e76\u51b3\u5b9a\u5e94\u7528\u7684\u8d77\u59cb\u9875\u9762\uff08\u901a\u5e38\u662f\u6839\u636e\u7528\u6237\u662f\u5426\u5df2\u767b\u5f55\u6765\u5224\u65ad\uff0c\u5bfc\u5411\u767b\u5f55\u9875\u6216\u4e3b\u9875\uff09\u3002</p> </li> <li> <p>api/: \u6570\u636e\u5c42 - API \u4ea4\u4e92\u6a21\u5757\u3002</p> </li> <li> <p>\u804c\u8d23: \u5c01\u88c5\u6240\u6709\u4e0e\u540e\u7aef RESTful API \u7684\u901a\u4fe1\u903b\u8f91\u3002\u8be5\u76ee\u5f55\u7ed3\u6784\u6709\u4e9b\u7279\u6b8a\uff0c\u9664\u4e86\u6838\u5fc3\u7684 <code>api_client.dart</code> \u548c <code>models/</code> \u76ee\u5f55\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u4e00\u4e2a\u4f4d\u7f6e\u4e0d\u592a\u5bfb\u5e38\u7684 <code>app_bloc_observer.dart</code> \u4ee5\u53ca\u4e00\u4e9b\u5185\u5bb9\u4e3a\u7a7a\u7684\u76ee\u5f55\u3002</p> </li> <li>api_client.dart: \u57fa\u4e8e <code>dio</code> \u5e93\u5b9e\u73b0\u7684\u6838\u5fc3\u7f51\u7edc\u8bf7\u6c42\u5ba2\u6237\u7aef\u3002\u5b83\u7edf\u4e00\u5904\u7406\u8bf7\u6c42\u7684\u53d1\u9001\u3001\u63a5\u6536\u3001\u8ba4\u8bc1 Token \u7684\u6dfb\u52a0\u3001\u516c\u5171 Header \u7684\u8bbe\u7f6e\u4ee5\u53ca\u901a\u7528\u7684\u9519\u8bef\u5904\u7406\u903b\u8f91\u3002</li> <li>models/: \u5b58\u653e\u4e0e\u540e\u7aef API \u63a5\u53e3\u4e00\u4e00\u5bf9\u5e94\u7684\u6570\u636e\u4f20\u8f93\u5bf9\u8c61 (DTOs)\u3002\u8fd9\u4e9b\u6a21\u578b\u7c7b\u901a\u5e38\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u5e76\u8d1f\u8d23\u5c06 JSON \u6570\u636e\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u3002</li> <li>app_bloc_observer.dart: \u4e00\u4e2a\u5168\u5c40\u7684 <code>BlocObserver</code>\uff0c\u7528\u4e8e\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u76d1\u542c\u6240\u6709 Bloc \u7684\u4e8b\u4ef6\u3001\u72b6\u6001\u8f6c\u6362\u548c\u9519\u8bef\u3002\u5b83\u7684\u5b58\u653e\u4f4d\u7f6e\u5728 <code>api/</code> \u76ee\u5f55\u4e0b\uff0c\u8fd9\u4e00\u70b9\u6bd4\u8f83\u7279\u6b8a\uff0c\u901a\u5e38\u5b83\u4f1a\u88ab\u653e\u5728 <code>bloc/</code> \u6839\u76ee\u5f55\u6216 <code>utils/</code> \u76ee\u5f55\u4e0b\u3002</li> <li>\u5176\u4ed6\u76ee\u5f55: <code>theme/</code>, <code>user_group/</code> \u7b49\u76ee\u5f55\u5728\u5f53\u524d\u7684\u6587\u4ef6\u7ed3\u6784\u4e2d\u5b58\u5728\uff0c\u4f46\u4f3c\u4e4e\u662f\u7a7a\u7684\uff0c\u53ef\u80fd\u662f\u65e9\u671f\u4ee3\u7801\u7ed3\u6784\u8c03\u6574\u540e\u9057\u7559\u7684\u3002\u5728\u5f00\u53d1\u4e2d\u5e94\u4ee5 <code>lib/bloc/</code> \u4e2d\u7684\u540c\u540d\u76ee\u5f55\u4e3a\u51c6\u3002</li> <li> <p>bloc/: \u4e1a\u52a1\u903b\u8f91\u5c42 - \u72b6\u6001\u7ba1\u7406\u6a21\u5757\u3002</p> </li> <li> <p>\u804c\u8d23: \u5b58\u653e\u5e94\u7528\u4e2d\u6240\u6709\u7684 <code>Bloc</code> \u548c <code>Cubit</code>\uff0c\u662f\u4e1a\u52a1\u903b\u8f91\u7684\u6838\u5fc3\u3002\u6bcf\u4e2a\u5b50\u76ee\u5f55\u4ee3\u8868\u4e00\u4e2a\u72ec\u7acb\u7684\u4e1a\u52a1\u529f\u80fd\u5355\u5143\u3002</p> </li> <li>\u7ed3\u6784: \u6bcf\u4e2a\u529f\u80fd\u6a21\u5757\uff08\u5982 <code>auth</code>, <code>device_list</code>, <code>user_group</code>\uff09\u901a\u5e38\u5305\u542b\u4e09\u4e2a\u6587\u4ef6\uff1a<ul> <li><code>event.dart</code>: \u5b9a\u4e49\u8be5\u6a21\u5757\u53ef\u4ee5\u63a5\u6536\u7684\u6240\u6709\u7528\u6237\u610f\u56fe\u6216\u4e8b\u4ef6\u3002</li> <li><code>state.dart</code>: \u5b9a\u4e49\u8be5\u6a21\u5757\u6240\u6709\u53ef\u80fd\u7684\u72b6\u6001\u3002</li> <li><code>bloc.dart</code>: \u63a5\u6536 <code>Event</code>\uff0c\u5904\u7406\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u53d1\u51fa\u65b0\u7684 <code>State</code>\u3002</li> </ul> </li> <li> <p>pages/: \u8868\u793a\u5c42 - UI \u9875\u9762\u6a21\u5757\u3002</p> </li> <li> <p>\u804c\u8d23: \u5b58\u653e\u5e94\u7528\u7684\u6240\u6709\u9875\u9762\u7ea7 Widget\u3002\u6bcf\u4e2a\u6587\u4ef6\u4ee3\u8868\u4e00\u4e2a\u5b8c\u6574\u7684\u5c4f\u5e55\u6216\u9875\u9762\u3002</p> </li> <li>\u7279\u70b9: \u9875\u9762\u5e94\u4fdd\u6301\"\u5e72\u51c0\"\uff0c\u4ec5\u5305\u542b\u6784\u5efa UI \u548c\u901a\u8fc7 <code>context.read&lt;Bloc&gt;()</code> \u6216 <code>context.watch&lt;Bloc&gt;()</code> \u4e0e Bloc \u8fdb\u884c\u4ea4\u4e92\u7684\u4ee3\u7801\u3002\u9875\u9762\u5c06\u7528\u6237\u7684\u64cd\u4f5c\uff08\u5982\u70b9\u51fb\u6309\u94ae\uff09\u8f6c\u6362\u4e3a <code>Event</code> \u53d1\u9001\u7ed9\u5bf9\u5e94\u7684 Bloc\u3002</li> <li>admin/: \u4e00\u4e2a\u4e13\u95e8\u7684\u5b50\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u6240\u6709\u7ba1\u7406\u540e\u53f0\u76f8\u5173\u7684\u9875\u9762\uff0c\u5982\u7528\u6237\u7ba1\u7406\u3001\u8bbe\u5907\u7ec4\u7ba1\u7406\u7b49\uff0c\u5b9e\u73b0\u4e86\u666e\u901a\u7528\u6237\u754c\u9762\u548c\u7ba1\u7406\u5458\u754c\u9762\u7684\u7269\u7406\u9694\u79bb\u3002</li> <li> <p>widgets/: \u8868\u793a\u5c42 - \u53ef\u590d\u7528 UI \u7ec4\u4ef6\u3002</p> </li> <li> <p>\u804c\u8d23: \u5b58\u653e\u90a3\u4e9b\u53ef\u4ee5\u5728\u591a\u4e2a\u9875\u9762\u4e4b\u95f4\u5171\u4eab\u7684\u901a\u7528\u5c0f\u7ec4\u4ef6\uff0c\u5982\u81ea\u5b9a\u4e49\u6309\u94ae\u3001\u8f93\u5165\u6846\u3001\u5361\u7247\u3001\u52a0\u8f7d\u52a8\u753b\u7b49\u3002\u8fd9\u6781\u5927\u5730\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u590d\u7528\u7387\u5e76\u4fdd\u8bc1\u4e86 UI \u7684\u4e00\u81f4\u6027\u3002</p> </li> <li> <p>providers/: \u5168\u5c40\u72b6\u6001/\u670d\u52a1\u63d0\u4f9b\u8005\u3002</p> </li> <li> <p>\u804c\u8d23: \u4f7f\u7528 <code>flutter_riverpod</code> \u6216\u7c7b\u4f3c\u7684 Provider \u5e93\uff0c\u63d0\u4f9b\u90a3\u4e9b\u9700\u8981\u8de8\u591a\u4e2a\u9875\u9762\u3001\u591a\u4e2a Bloc \u5171\u4eab\u7684\u72b6\u6001\u6216\u670d\u52a1\u3002</p> </li> <li>theme_provider.dart: \u4e00\u4e2a\u5178\u578b\u7684\u4f8b\u5b50\uff0c\u7528\u4e8e\u7ba1\u7406\u548c\u5207\u6362\u5e94\u7528\u7684\u6574\u4f53\u4e3b\u9898\uff08\u5982\u65e5\u95f4/\u591c\u95f4\u6a21\u5f0f\uff09\uff0c\u8ba9\u5e94\u7528\u5185\u7684\u4efb\u4f55\u7ec4\u4ef6\u90fd\u80fd\u54cd\u5e94\u4e3b\u9898\u53d8\u5316\u3002</li> <li> <p>utils/: \u901a\u7528\u5de5\u5177\u6a21\u5757\u3002</p> </li> <li> <p>\u804c\u8d23: \u5b58\u653e\u4e0d\u4e0e\u7279\u5b9a\u4e1a\u52a1\u903b\u8f91\u6216 UI \u7ed1\u5b9a\u7684\u8f85\u52a9\u51fd\u6570\u548c\u5de5\u5177\u7c7b\u3002</p> </li> <li>secure_storage.dart: \u5bf9 <code>flutter_secure_storage</code> \u7684\u5c01\u88c5\uff0c\u63d0\u4f9b\u66f4\u4fbf\u6377\u7684 API \u6765\u5b58\u53d6 Token \u7b49\u654f\u611f\u4fe1\u606f\u3002</li> <li>styles.dart: \u5b9a\u4e49\u4e86 App \u5185\u7684\u901a\u7528\u6837\u5f0f\uff0c\u5982\u5b57\u4f53\u5927\u5c0f\u3001\u989c\u8272\u3001\u95f4\u8ddd\u7b49\uff0c\u4fbf\u4e8e\u5168\u5c40\u6837\u5f0f\u7684\u7edf\u4e00\u7ba1\u7406\u548c\u4fee\u6539\u3002</li> <li> <p>config/: \u5e94\u7528\u914d\u7f6e\u6a21\u5757\u3002</p> </li> <li> <p>\u804c\u8d23: \u5b58\u653e\u5e94\u7528\u7684\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u3002</p> </li> <li>env.dart: \u5b58\u50a8\u73af\u5883\u53d8\u91cf\uff0c\u5982\u540e\u7aef\u7684 <code>BASE_URL</code>\u3002\u8fd9\u4f7f\u5f97\u5728\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u4e4b\u95f4\u5207\u6362 API \u670d\u52a1\u5668\u5730\u5740\u53d8\u5f97\u7b80\u5355\u3002</li> </ul>"},{"location":"design/frontend/#22-flutter_chat_desktop","title":"2.2 \u7279\u8272\u529f\u80fd\u6a21\u5757\uff1a<code>flutter_chat_desktop/</code>","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u529f\u80fd\u9ad8\u5ea6\u5185\u805a\u7684\"\u5b50\u5e94\u7528\"\u2014\u2014AI \u667a\u80fd\u804a\u5929\u6a21\u5757\u3002</p> <ul> <li>\u67b6\u6784: \u8be5\u6a21\u5757\u5185\u90e8\u91c7\u7528\u4e86\u66f4\u7cbe\u7ec6\u7684\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1 (DDD) + \u6574\u6d01\u67b6\u6784 (Clean Architecture) \u601d\u60f3\uff0c\u8fdb\u4e00\u6b65\u5c06\u4ee3\u7801\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u9886\u57df\uff08Domain\uff09\u3002</li> <li>domains/: \u5b9a\u4e49\u4e86\u8be5\u6a21\u5757\u7684\u6838\u5fc3\u4e1a\u52a1\u9886\u57df\uff0c\u5982 <code>ai</code>, <code>chat</code>, <code>mcp</code> \u7b49\u3002<ul> <li><code>entity/</code>: \u5b9a\u4e49\u7eaf\u7cb9\u7684\u4e1a\u52a1\u5b9e\u4f53\u3002</li> <li><code>repository/</code>: \u5b9a\u4e49\u6570\u636e\u7684\u62bd\u8c61\u63a5\u53e3\u3002</li> <li><code>data/</code>: \u5305\u542b <code>repository</code> \u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u8d1f\u8d23\u4e0e\u6570\u636e\u6e90\uff08\u5982 <code>google_generative_ai</code> \u5ba2\u6237\u7aef\uff09\u4ea4\u4e92\u3002</li> </ul> </li> <li>presentation/: \u5305\u542b\u8be5\u804a\u5929\u6a21\u5757\u81ea\u8eab\u7684 UI \u9875\u9762 (<code>chat_screen.dart</code>) \u548c\u4e13\u5c5e\u5c0f\u7ec4\u4ef6\u3002</li> <li>providers/: \u6a21\u5757\u5185\u90e8\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u6b64\u5904\u4f7f\u7528\u4e86 <code>Riverpod</code> Provider\u3002</li> </ul> <p>\u8fd9\u79cd\u5c06\u590d\u6742\u529f\u80fd\u5c01\u88c5\u6210\u72ec\u7acb\u6a21\u5757\u7684\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u4e3b\u5e94\u7528\u903b\u8f91\u66f4\u52a0\u6e05\u6670\uff0c\u4e5f\u4e3a\u8be5\u529f\u80fd\u7684\u72ec\u7acb\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u590d\u7528\u63d0\u4f9b\u4e86\u53ef\u80fd\u3002</p>"},{"location":"design/frontend/#_3","title":"\u7b2c\u4e09\u7ae0\uff1a\u6838\u5fc3\u529f\u80fd\u6a21\u5757\u89e3\u6790","text":"<p>\u672c\u7ae0\u5c06\u6df1\u5165\u5230\u5177\u4f53\u7684\u4e1a\u52a1\u529f\u80fd\u6a21\u5757\u4e2d\uff0c\u7ed3\u5408 <code>pages</code>, <code>bloc</code>, <code>api</code> \u4e2d\u7684\u4ee3\u7801\uff0c\u8be6\u7ec6\u9610\u8ff0\u5176\u5b9e\u73b0\u903b\u8f91\u3002\u6211\u4eec\u5c06\u4ee5 BLoC \u4e3a\u7ebf\u7d22\uff0c\u9010\u4e00\u5256\u6790\u3002</p>"},{"location":"design/frontend/#31-authentication","title":"3.1 \u7528\u6237\u8ba4\u8bc1 (Authentication)","text":"<p>\u7528\u6237\u8ba4\u8bc1\u662f\u7cfb\u7edf\u7684\u5165\u53e3\uff0c\u4e5f\u662f\u4fdd\u969c\u7cfb\u7edf\u5b89\u5168\u7684\u7b2c\u4e00\u9053\u5c4f\u969c\u3002\u5b83\u7531 <code>auth</code> BLoC\u3001<code>login_page.dart</code>\u3001<code>register_page.dart</code> \u4ee5\u53ca <code>api_client.dart</code> \u4e2d\u7684\u76f8\u5173\u65b9\u6cd5\u5171\u540c\u5b8c\u6210\u3002</p>"},{"location":"design/frontend/#311","title":"3.1.1 \u8ba4\u8bc1\u6d41\u7a0b\u4e0e\u72b6\u6001\u673a","text":"<p>\u6574\u4e2a\u8ba4\u8bc1\u6a21\u5757\u53ef\u4ee5\u88ab\u770b\u4f5c\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5176\u751f\u547d\u5468\u671f\u7531 <code>AuthBloc</code> (<code>lib/bloc/auth/bloc.dart</code>) \u7ba1\u7406\u3002\u6838\u5fc3\u72b6\u6001\u5982\u4e0b\uff1a</p> <ul> <li><code>AuthInitial</code>: \u521d\u59cb\u72b6\u6001\u3002</li> <li><code>AuthLoading</code>: \u6b63\u5728\u6267\u884c\u8ba4\u8bc1\u64cd\u4f5c\uff08\u767b\u5f55\u3001\u6ce8\u518c\u3001\u68c0\u67e5\u72b6\u6001\uff09\u7684\u52a0\u8f7d\u72b6\u6001\u3002</li> <li><code>Authenticated</code>: \u5df2\u8ba4\u8bc1\u72b6\u6001\u3002<code>State</code> \u4e2d\u4f1a\u5305\u542b\u5f53\u524d\u767b\u5f55\u7684 <code>User</code> \u5bf9\u8c61\u3002</li> <li><code>Unauthenticated</code>: \u672a\u8ba4\u8bc1\u72b6\u6001\u3002\u5e94\u7528\u542f\u52a8\u65f6\u6216\u7528\u6237\u767b\u51fa\u540e\u4f1a\u8fdb\u5165\u6b64\u72b6\u6001\u3002</li> <li><code>AuthFailure</code>: \u8ba4\u8bc1\u5931\u8d25\u72b6\u6001\u3002<code>State</code> \u4e2d\u5305\u542b\u9519\u8bef\u4fe1\u606f\uff0c\u7528\u4e8e UI \u63d0\u793a\u3002</li> <li><code>RegistrationSuccessful</code>: \u6ce8\u518c\u6210\u529f\u72b6\u6001\u3002\u8fd9\u662f\u4e00\u4e2a\u4e34\u65f6\u72b6\u6001\uff0c\u7528\u4e8e\u901a\u77e5 UI \u6267\u884c\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u7b49\u64cd\u4f5c\u3002</li> </ul> <p>\u8ba4\u8bc1\u6d41\u7a0b\u7684\u6838\u5fc3\u903b\u8f91\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5e94\u7528\u542f\u52a8 (AuthenticationStatusChecked):</p> </li> <li> <p>\u5f53\u5e94\u7528\u542f\u52a8\u65f6\uff0c<code>main.dart</code> \u4f1a\u5411 <code>AuthBloc</code> \u53d1\u9001\u4e00\u4e2a <code>AuthenticationStatusChecked</code> \u4e8b\u4ef6\u3002</p> </li> <li>Bloc \u4f1a\u9996\u5148\u68c0\u67e5 <code>SecureStorage</code> \u4e2d\u662f\u5426\u5b58\u5728\u6709\u6548\u7684\u8ba4\u8bc1 Token\u3002</li> <li>\u5982\u679c Token \u5b58\u5728\uff0cBloc \u4f1a\u8c03\u7528 <code>_apiClient.getUserInfo()</code> \u5c1d\u8bd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002<ul> <li>\u82e5\u6210\u529f\uff0c\u5219\u8ba4\u4e3a\u7528\u6237\u662f\u6709\u6548\u767b\u5f55\u72b6\u6001\uff0c\u53d1\u51fa <code>Authenticated</code> \u72b6\u6001\uff0c\u5e76\u643a\u5e26\u83b7\u53d6\u5230\u7684 <code>User</code> \u5bf9\u8c61\u3002</li> <li>\u82e5\u5931\u8d25\uff08\u4f8b\u5982 Token \u8fc7\u671f\u5bfc\u81f4 API \u8fd4\u56de 401 \u9519\u8bef\uff09\uff0c\u5219\u5220\u9664\u5931\u6548\u7684 Token\uff0c\u5e76\u53d1\u51fa <code>Unauthenticated</code> \u72b6\u6001\u3002</li> </ul> </li> <li>\u5982\u679c Token \u4e0d\u5b58\u5728\uff0c\u76f4\u63a5\u53d1\u51fa <code>Unauthenticated</code> \u72b6\u6001\u3002</li> <li>UI \u54cd\u5e94: <code>HomePage</code> \u6216 <code>App</code> \u7684\u9876\u5c42\u7ec4\u4ef6\u76d1\u542c\u6b64\u72b6\u6001\uff0c\u5982\u679c\u4e3a <code>Authenticated</code> \u5219\u663e\u793a\u4e3b\u754c\u9762\uff0c\u5982\u679c\u4e3a <code>Unauthenticated</code> \u5219\u5bfc\u822a\u81f3 <code>LoginPage</code>\u3002</li> <li> <p>\u7528\u6237\u767b\u5f55 (LoginRequested):</p> </li> <li> <p>\u7528\u6237\u5728 <code>login_page.dart</code> \u8f93\u5165\u90ae\u7bb1\u548c\u5bc6\u7801\u540e\uff0c\u70b9\u51fb\u767b\u5f55\u6309\u94ae\u3002UI \u5c42\u4f1a\u6784\u5efa\u5e76\u5411 <code>AuthBloc</code> \u53d1\u9001\u4e00\u4e2a <code>LoginRequested</code> \u4e8b\u4ef6\u3002</p> </li> <li>Bloc \u8fdb\u5165 <code>AuthLoading</code> \u72b6\u6001\u3002</li> <li>\u8c03\u7528 <code>_apiClient.login(email, password)</code> \u65b9\u6cd5\uff0c\u5411\u540e\u7aef\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42\u3002</li> <li>\u5982\u679c\u8bf7\u6c42\u6210\u529f\uff0c\u540e\u7aef\u8fd4\u56de <code>access</code> Token\u3002Bloc \u4f1a\uff1a<ol> <li>\u8c03\u7528 <code>_secureStorage.saveToken(token)</code> \u5c06 Token \u5b89\u5168\u5730\u4fdd\u5b58\u5230\u8bbe\u5907\u3002</li> <li>\u7acb\u523b\u4f7f\u7528\u65b0 Token \u8c03\u7528 <code>_apiClient.getUserInfo()</code> \u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002</li> <li>\u53d1\u51fa <code>Authenticated</code> \u72b6\u6001\u3002</li> </ol> </li> <li>\u5982\u679c\u8bf7\u6c42\u5931\u8d25\uff0cBloc \u4f1a\u6355\u83b7\u5f02\u5e38\uff0c\u5e76\u53d1\u51fa\u4e00\u4e2a\u5305\u542b\u9519\u8bef\u4fe1\u606f\u7684 <code>AuthFailure</code> \u72b6\u6001\u3002</li> <li>UI \u54cd\u5e94: \u9875\u9762\u4e0a\u7684 <code>BlocListener</code> \u4f1a\u76d1\u542c <code>AuthState</code>\u3002\u6210\u529f\u65f6\uff0c\u5bfc\u822a\u5230\u4e3b\u9875\uff1b\u5931\u8d25\u65f6\uff0c\u663e\u793a\u4e00\u4e2a <code>SnackBar</code> \u6216 <code>Dialog</code> \u63d0\u793a\u9519\u8bef\u3002</li> <li> <p>\u7528\u6237\u6ce8\u518c (RegisterRequested):</p> </li> <li> <p>\u7528\u6237\u5728 <code>register_page.dart</code> \u586b\u5199\u4fe1\u606f\u540e\uff0c\u70b9\u51fb\u6ce8\u518c\u6309\u94ae\uff0cUI \u5c42\u53d1\u9001 <code>RegisterRequested</code> \u4e8b\u4ef6\u3002</p> </li> <li>Bloc \u8fdb\u5165 <code>AuthLoading</code> \u72b6\u6001\u3002</li> <li>\u5b83\u9996\u5148\u4f1a\u68c0\u67e5\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u662f\u5426\u4e00\u81f4\u3002</li> <li>\u8c03\u7528 <code>_apiClient.register(...)</code> \u65b9\u6cd5\u3002</li> <li>\u5982\u679c\u6ce8\u518c\u6210\u529f\uff0c\u53d1\u51fa <code>RegistrationSuccessful</code> \u72b6\u6001\u3002</li> <li>\u5982\u679c\u5931\u8d25\uff08\u5982\u7528\u6237\u540d\u5df2\u5b58\u5728\uff09\uff0c\u5219\u53d1\u51fa <code>AuthFailure</code> \u72b6\u6001\u3002</li> <li>UI \u54cd\u5e94: \u76d1\u542c\u5230 <code>RegistrationSuccessful</code> \u540e\uff0c\u901a\u5e38\u4f1a\u7ed9\u7528\u6237\u4e00\u4e2a\"\u6ce8\u518c\u6210\u529f\"\u7684\u63d0\u793a\uff0c\u7136\u540e\u81ea\u52a8\u5bfc\u822a\u56de <code>login_page.dart</code> \u8ba9\u7528\u6237\u8fdb\u884c\u767b\u5f55\u3002</li> <li> <p>\u7528\u6237\u767b\u51fa (LogoutRequested):</p> </li> <li> <p>\u7528\u6237\u5728\u5e94\u7528\u5185\u70b9\u51fb\u767b\u51fa\u6309\u94ae\uff0cUI \u5c42\u53d1\u9001 <code>LogoutRequested</code> \u4e8b\u4ef6\u3002</p> </li> <li>Bloc \u8fdb\u5165 <code>AuthLoading</code> \u72b6\u6001\u3002</li> <li>\u8c03\u7528 <code>_secureStorage.deleteToken()</code> \u6e05\u9664\u672c\u5730\u5b58\u50a8\u7684 Token\u3002</li> <li>\u53d1\u51fa <code>Unauthenticated</code> \u72b6\u6001\uff0c\u89e6\u53d1 UI \u5bfc\u822a\u56de\u767b\u5f55\u9875\u9762\u3002</li> </ol>"},{"location":"design/frontend/#312-ai","title":"3.1.2 \u4e0e AI \u804a\u5929\u6a21\u5757\u7684\u96c6\u6210","text":"<p>\u5728 <code>AuthBloc</code> \u4e2d\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e00\u4e2a\u6709\u8da3\u7684\u8bbe\u8ba1\uff1a\u8ba4\u8bc1\u72b6\u6001\u4e0e <code>flutter_chat_desktop</code> \u6a21\u5757\u662f\u8054\u52a8\u7684\u3002</p> <pre><code>// in _onLoginRequested and _onAuthenticationStatusChecked\nfinal mcpBinName = 'mcp_server';\n_ref?.read(settingsServiceProvider)\n  .addMcpServer(\n    \"aicpm\",\n    mcpBinName,\n    \"--backend ${Env.apiUrl} --token $token\",\n    {}\n  );\n</code></pre> <ul> <li>\u673a\u5236: \u5f53\u7528\u6237\u6210\u529f\u767b\u5f55\u6216\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1 Token \u6709\u6548\u540e\uff0c<code>AuthBloc</code> \u4f1a\u901a\u8fc7 <code>Riverpod</code> \u7684 <code>settingsServiceProvider</code> \u542f\u52a8\u4e00\u4e2a\u540d\u4e3a <code>mcp_server</code> \u7684\u540e\u53f0\u670d\u52a1/\u8fdb\u7a0b\u3002\u542f\u52a8\u65f6\uff0c\u5b83\u5c06\u5f53\u524d\u540e\u7aef\u670d\u52a1\u5668\u7684\u5730\u5740 (<code>Env.apiUrl</code>) \u548c\u7528\u6237\u7684\u8ba4\u8bc1 <code>token</code> \u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u4f20\u9012\u8fc7\u53bb\u3002</li> <li>\u76ee\u7684: \u8fd9\u8868\u660e AI \u804a\u5929\u529f\u80fd\u9700\u8981\u7528\u6237\u7684\u8eab\u4efd\u8ba4\u8bc1\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u5ba2\u6237\u7aef\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u4ece\u4e3b\u5e94\u7528\u83b7\u53d6\u5230\u4e86\u8bbf\u95ee\u540e\u7aef\u8d44\u6e90\u7684\u51ed\u8bc1\u3002</li> <li>\u89e3\u8026: \u5f53\u7528\u6237\u767b\u51fa\u65f6\uff0c<code>AuthBloc</code> \u540c\u6837\u4f1a\u8c03\u7528 <code>deleteMcpServer</code> \u6765\u7ec8\u6b62\u8fd9\u4e2a\u670d\u52a1\uff0c\u5b8c\u6210\u4e86\u751f\u547d\u5468\u671f\u7684\u540c\u6b65\u548c\u8d44\u6e90\u7684\u91ca\u653e\u3002\u8fd9\u79cd\u8bbe\u8ba1\u5c06\u8ba4\u8bc1\u903b\u8f91\u4e0e\u804a\u5929\u6a21\u5757\u7684\u5177\u4f53\u5b9e\u73b0\u89e3\u8026\u5f00\u6765\uff0c\u4e3b\u5e94\u7528\u53ea\u8d1f\u8d23\u4f20\u9012\u51ed\u8bc1\uff0c\u800c\u65e0\u9700\u5173\u5fc3\u804a\u5929\u6a21\u5757\u5185\u90e8\u5982\u4f55\u4f7f\u7528\u5b83\u3002</li> </ul>"},{"location":"design/frontend/#32","title":"3.2 \u8bbe\u5907\u7ba1\u7406","text":"<p>\u8bbe\u5907\u7ba1\u7406\u662f\u667a\u80fd\u5bb6\u5c45\u5e94\u7528\u7684\u6838\u5fc3\uff0c\u4e3b\u8981\u5305\u62ec\u8bbe\u5907\u5217\u8868\u7684\u5c55\u793a\u4e0e\u64cd\u4f5c\u3001\u8bbe\u5907\u8be6\u60c5\u7684\u67e5\u770b\u4e0e\u63a7\u5236\u3002</p>"},{"location":"design/frontend/#321-devicelistpage","title":"3.2.1 \u8bbe\u5907\u5217\u8868 (<code>DeviceListPage</code>)","text":"<p>\u8fd9\u662f\u7528\u6237\u767b\u5f55\u540e\u770b\u5230\u7684\u4e3b\u8981\u754c\u9762\u4e4b\u4e00\uff0c\u8d1f\u8d23\u5c55\u793a\u7528\u6237\u6743\u9650\u4e0b\u7684\u6240\u6709\u8bbe\u5907\uff0c\u5e76\u63d0\u4f9b\u7ba1\u7406\u5165\u53e3\u3002</p> <p>1. \u4e1a\u52a1\u903b\u8f91 (DeviceListBloc)</p> <ul> <li>\u804c\u8d23: \u83b7\u53d6\u548c\u7ef4\u62a4\u8bbe\u5907\u5217\u8868\u7684\u72b6\u6001\u3002</li> <li> <p>\u4e8b\u4ef6:</p> </li> <li> <p><code>LoadDeviceList</code>: \u610f\u56fe\u52a0\u8f7d\u6216\u5237\u65b0\u8bbe\u5907\u5217\u8868\u3002\u901a\u5e38\u5728\u9875\u9762\u9996\u6b21\u52a0\u8f7d\u6216\u4e0b\u62c9\u5237\u65b0\u65f6\u89e6\u53d1\u3002</p> </li> <li><code>DeleteDevice</code>: \u610f\u56fe\u5220\u9664\u4e00\u4e2a\u8bbe\u5907\uff0c\u9700\u8981\u4f20\u5165 <code>deviceId</code>\u3002</li> <li> <p>\u72b6\u6001:</p> </li> <li> <p><code>DeviceListInProgress</code>: \u5217\u8868\u6b63\u5728\u52a0\u8f7d\u4e2d\u3002</p> </li> <li><code>DeviceListSuccess</code>: \u6210\u529f\u83b7\u53d6\u8bbe\u5907\u5217\u8868\uff0c\u72b6\u6001\u4e2d\u5305\u542b <code>List&lt;Device&gt;</code>\u3002</li> <li><code>DeviceListFailure</code>: \u83b7\u53d6\u5217\u8868\u5931\u8d25\u3002</li> <li> <p>\u6838\u5fc3\u6d41\u7a0b:</p> </li> <li> <p>\u52a0\u8f7d: \u63a5\u6536\u5230 <code>LoadDeviceList</code> \u4e8b\u4ef6\u540e\uff0cBloc \u53d1\u51fa <code>DeviceListInProgress</code> \u72b6\u6001\uff0c\u8c03\u7528 <code>_apiClient.getDevices()</code>\uff0c\u6210\u529f\u540e\u89e3\u6790\u6570\u636e\u5e76\u53d1\u51fa <code>DeviceListSuccess</code> \u72b6\u6001\u3002</p> </li> <li>\u5220\u9664: \u63a5\u6536\u5230 <code>DeleteDevice</code> \u4e8b\u4ef6\u540e\uff0cBloc \u8c03\u7528 <code>_apiClient.deleteDevice(id)</code>\u3002\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u4e3a\u4e86\u786e\u4fdd UI \u5b9e\u65f6\u53cd\u6620\u6700\u65b0\u6570\u636e\uff0c\u5b83\u4f1a\u91cd\u65b0\u89e6\u53d1\u4e00\u6b21 <code>LoadDeviceList</code> \u4e8b\u4ef6\u6765\u5237\u65b0\u6574\u4e2a\u5217\u8868\u3002\u8fd9\u662f\u4e00\u79cd\u7b80\u5355\u4e14\u53ef\u9760\u7684\u6570\u636e\u4e00\u81f4\u6027\u7b56\u7565\u3002</li> </ul> <p>2. UI \u4e0e\u4ea4\u4e92 (<code>device_list_page.dart</code>)</p> <p><code>DeviceListPage</code> \u662f\u4e00\u4e2a\u8bbe\u8ba1\u7cbe\u826f\u3001\u4ea4\u4e92\u4e30\u5bcc\u7684\u9875\u9762\u3002</p> <ul> <li>\u6570\u636e\u9a71\u52a8\u7684 UI: \u9875\u9762\u4f7f\u7528 <code>BlocBuilder</code> \u4e25\u683c\u6839\u636e <code>DeviceListState</code> \u6765\u6784\u5efa\u754c\u9762\uff0c\u5b9e\u73b0\u4e86\u52a0\u8f7d\u3001\u6210\u529f\u3001\u5931\u8d25\u4e09\u79cd\u89c6\u56fe\u7684\u6e05\u6670\u5206\u79bb\u3002</li> <li>\u54cd\u5e94\u5f0f\u7f51\u683c\u5e03\u5c40: \u4e3a\u4e86\u9002\u914d\u4e0d\u540c\u5c3a\u5bf8\u7684\u5c4f\u5e55\uff08\u4ece\u624b\u673a\u5230\u684c\u9762\uff09\uff0c\u9875\u9762\u91c7\u7528 <code>LayoutBuilder</code> \u52a8\u6001\u8ba1\u7b97 <code>GridView</code> \u7684\u5217\u6570 (<code>crossAxisCount</code>)\uff0c\u786e\u4fdd\u5728\u4efb\u4f55\u8bbe\u5907\u4e0a\u90fd\u6709\u4f18\u79c0\u7684\u89c6\u89c9\u5e03\u5c40\u3002</li> <li> <p>\u5e26\u7ed3\u679c\u7684\u9875\u9762\u5bfc\u822a:</p> </li> <li> <p>\u5f53\u7528\u6237\u70b9\u51fb\u67d0\u4e2a\u8bbe\u5907\u5361\u7247\u65f6\uff0c\u4f1a\u5bfc\u822a\u5230 <code>DeviceDetailPage</code>\u3002</p> </li> <li>\u5bfc\u822a\u4f7f\u7528\u4e86 <code>await Navigator.push(...)</code>\u3002\u5f53\u7528\u6237\u4ece\u8be6\u60c5\u9875\u8fd4\u56de\u65f6\uff0c\u4ee3\u7801\u4f1a\u68c0\u67e5\u8fd4\u56de\u503c\u3002\u5982\u679c\u8fd4\u56de <code>true</code>\uff08\u4ee3\u8868\u5728\u8be6\u60c5\u9875\u8fdb\u884c\u4e86\u4fee\u6539\uff09\uff0c\u9875\u9762\u4f1a\u7acb\u5373\u5411 <code>DeviceListBloc</code> \u53d1\u9001 <code>LoadDeviceList</code> \u4e8b\u4ef6\u4ee5\u5237\u65b0\u6570\u636e\uff0c\u4fdd\u8bc1\u4e86\u8de8\u9875\u9762\u64cd\u4f5c\u7684\u6570\u636e\u540c\u6b65\u3002</li> <li> <p>\u6279\u91cf\u7f16\u8f91\u6a21\u5f0f:</p> </li> <li> <p>\u9875\u9762\u5f15\u5165\u4e86\u4e00\u4e2a <code>_isSelectionMode</code> \u72b6\u6001\uff0c\u5141\u8bb8\u7528\u6237\u901a\u8fc7 <code>AppBar</code> \u4e0a\u7684\u6309\u94ae\u5728\"\u6d4f\u89c8\u6a21\u5f0f\"\u548c\"\u7f16\u8f91\u6a21\u5f0f\"\u4e4b\u95f4\u5207\u6362\u3002</p> </li> <li>\u5728\u7f16\u8f91\u6a21\u5f0f\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u591a\u9009\u8bbe\u5907\uff0c\u88ab\u9009\u4e2d\u7684\u8bbe\u5907\u5361\u7247\u4f1a\u6709\u9ad8\u4eae\u8fb9\u6846\u3002<code>AppBar</code> \u4e5f\u4f1a\u5207\u6362\u4e3a\u663e\u793a\u5df2\u9009\u4e2d\u7684\u6570\u91cf\u548c\"\u79fb\u9664\"\u6309\u94ae\u3002</li> <li>\u70b9\u51fb\"\u79fb\u9664\"\u6309\u94ae\uff0c\u4f1a\u5f39\u7a97\u4e8c\u6b21\u786e\u8ba4\u3002\u786e\u8ba4\u540e\uff0c\u9875\u9762\u4f1a\u904d\u5386\u6240\u6709\u9009\u4e2d\u7684\u8bbe\u5907 ID\uff0c\u5e76\u4e3a\u6bcf\u4e00\u4e2a ID \u53d1\u9001\u4e00\u4e2a <code>DeleteDevice</code> \u4e8b\u4ef6\u7ed9 Bloc\uff0c\u4ece\u800c\u5b9e\u73b0\u6279\u91cf\u5220\u9664\u3002</li> </ul>"},{"location":"design/frontend/#322-devicedetailpage","title":"3.2.2 \u8bbe\u5907\u8be6\u60c5\u4e0e\u63a7\u5236 (<code>DeviceDetailPage</code>)","text":"<p>\u6b64\u9875\u9762\u662f\u7528\u6237\u4e0e\u5355\u4e2a\u8bbe\u5907\u8fdb\u884c\u6df1\u5ea6\u4ea4\u4e92\u7684\u573a\u6240\uff0c\u8d1f\u8d23\u5c55\u793a\u8bbe\u5907\u7684\u5168\u90e8\u4fe1\u606f\u5e76\u63d0\u4f9b\u7f16\u8f91\u529f\u80fd\u3002</p> <p>1. \u4e1a\u52a1\u903b\u8f91 (<code>DeviceDetailBloc</code>)</p> <ul> <li>\u804c\u8d23: \u7ba1\u7406\u5355\u4e2a\u8bbe\u5907\u7684\u8be6\u7ec6\u72b6\u6001\uff0c\u5305\u62ec\u9759\u6001\u4fe1\u606f\u3001\u5b9e\u65f6\u6570\u636e\u3001\u65e5\u5fd7\u548c\u64cd\u4f5c\u8bb0\u5f55\u3002</li> <li> <p>\u4e8b\u4ef6:</p> </li> <li> <p><code>LoadDeviceDetail</code>: \u4f20\u5165 <code>deviceId</code>\uff0c\u83b7\u53d6\u8be5\u8bbe\u5907\u7684\u5b8c\u6574\u6570\u636e\u6a21\u578b\u3002</p> </li> <li><code>UpdateDeviceInfo</code>: \u4f20\u5165 <code>deviceId</code> \u548c\u9700\u8981\u4fee\u6539\u7684\u5b57\u6bb5\uff08\u5982\u540d\u79f0\u3001\u54c1\u724c\u3001\u63cf\u8ff0\uff09\uff0c\u5411\u540e\u7aef\u63d0\u4ea4\u66f4\u65b0\u3002</li> <li> <p>\u72b6\u6001:</p> </li> <li> <p><code>DeviceDetailSuccess</code>: \u6210\u529f\u83b7\u53d6\u5230\u6570\u636e\uff0c\u72b6\u6001\u4e2d\u5305\u542b\u4e00\u4e2a\u4fe1\u606f\u6781\u5176\u4e30\u5bcc\u7684 <code>DeviceDetail</code> \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5185\u5d4c\u4e86 <code>DeviceLog</code> \u548c <code>DeviceUsageRecord</code> \u5217\u8868\u3002</p> </li> <li><code>DeviceDetailUpdateSuccess</code>: \u4e00\u4e2a\u4e34\u65f6\u7684\u4e2d\u95f4\u72b6\u6001\uff0c\u8868\u793a\u66f4\u65b0\u64cd\u4f5c\u5df2\u6210\u529f\u63d0\u4ea4\uff0c\u4e3b\u8981\u7528\u4e8e\u89e6\u53d1 UI \u63d0\u793a\u3002</li> <li><code>DeviceDetailFailure</code>: \u83b7\u53d6\u6216\u66f4\u65b0\u5931\u8d25\u3002</li> <li> <p>\u6838\u5fc3\u6d41\u7a0b:</p> </li> <li> <p>\u52a0\u8f7d: \u63a5\u6536 <code>LoadDeviceDetail</code> \u540e\uff0cBloc \u8c03\u7528 <code>_apiClient.getDeviceDetail(id)</code>\uff0c\u83b7\u53d6\u5305\u542b\u65e5\u5fd7\u3001\u4f7f\u7528\u8bb0\u5f55\u5728\u5185\u7684\u6240\u6709\u6570\u636e\uff0c\u7136\u540e\u53d1\u51fa <code>DeviceDetailSuccess</code> \u72b6\u6001\u3002</p> </li> <li>\u66f4\u65b0: \u63a5\u6536 <code>UpdateDeviceInfo</code> \u540e\uff0cBloc \u8c03\u7528 <code>_apiClient.updateDeviceInfo(...)</code>\u3002\u8bf7\u6c42\u6210\u529f\u540e\uff0c\u5b83\u4f1a\u5148\u53d1\u51fa <code>DeviceDetailUpdateSuccess</code> \u72b6\u6001\uff08\u7528\u4e8e\u89e6\u53d1 SnackBar \u7b49\u63d0\u793a\uff09\uff0c\u7136\u540e \u7acb\u5373\u91cd\u65b0\u53d1\u9001 LoadDeviceDetail \u4e8b\u4ef6\u3002\u8fd9\u79cd \"Command-then-reload\" \u7684\u6a21\u5f0f\u786e\u4fdd\u4e86\u5728\u672c\u5730\u64cd\u4f5c\u6210\u529f\u540e\uff0cUI \u4f1a\u7acb\u523b\u4ece\u670d\u52a1\u7aef\u62c9\u53d6\u6700\u65b0\u7684\u6743\u5a01\u72b6\u6001\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5f3a\u4e00\u81f4\u6027\u3002</li> </ul> <p>2. UI \u4e0e\u4ea4\u4e92 (device_detail_page.dart)</p> <ul> <li> <p>\u6df7\u5408\u72b6\u6001\u7ba1\u7406: \u9875\u9762\u5de7\u5999\u5730\u7ed3\u5408\u4e86 <code>Bloc</code> \u548c <code>StatefulWidget</code> \u7684\u81ea\u8eab <code>State</code>\u3002</p> </li> <li> <p><code>Bloc</code> \u7528\u4e8e\u7ba1\u7406\u6765\u81ea\u540e\u7aef\u7684\u4e1a\u52a1\u6570\u636e\uff08\u8bbe\u5907\u8be6\u60c5\u3001\u65e5\u5fd7\u7b49\uff09\u3002</p> </li> <li><code>StatefulWidget</code> \u7684 <code>State</code> (<code>_showLogs</code>, <code>_currentLogsPage</code> \u7b49\uff09\u7528\u4e8e\u7ba1\u7406\u7eaf\u7cb9\u7684 UI \u72b6\u6001\uff08\u5982\u67d0\u4e2a\u677f\u5757\u662f\u5426\u5c55\u5f00\u3001\u5f53\u524d\u5206\u9875\u9875\u7801\u7b49\uff09\u3002\u8fd9\u79cd\u5206\u79bb\u4f7f\u5f97\u4e1a\u52a1\u903b\u8f91\u548c UI \u903b\u8f91\u5404\u53f8\u5176\u804c\uff0c\u4ee3\u7801\u66f4\u6e05\u6670\u3002</li> <li>\u4fe1\u606f\u5206\u7ec4\u4e0e\u6298\u53e0: \u9875\u9762\u5c06\u5927\u91cf\u7684\u8bbe\u5907\u4fe1\u606f\u5206\u95e8\u522b\u7c7b\u5730\u653e\u5230\u4e0d\u540c\u7684 <code>Card</code> \u4e2d\uff08\u5982\u57fa\u672c\u4fe1\u606f\u3001\u72b6\u6001\u3001\u65e5\u5fd7\uff09\uff0c\u5e76\u4e14\u65e5\u5fd7\u548c\u4f7f\u7528\u8bb0\u5f55\u7b49\u5217\u8868\u662f\u53ef\u6298\u53e0\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u9700\u5c55\u5f00\uff0c\u4f18\u5316\u4e86\u4fe1\u606f\u5bc6\u5ea6\u9ad8\u7684\u9875\u9762\u7684\u53ef\u8bfb\u6027\u3002</li> <li>\u5ba2\u6237\u7aef\u5206\u9875: \u5bf9\u4e8e\u53ef\u80fd\u5f88\u957f\u7684\u65e5\u5fd7\u548c\u4f7f\u7528\u8bb0\u5f55\u5217\u8868\uff0c\u9875\u9762\u5728\u524d\u7aef\u5b9e\u73b0\u4e86\u5206\u9875\u903b\u8f91\u3002\u5b83\u4e00\u6b21\u6027\u4ece Bloc \u83b7\u53d6\u6240\u6709\u6570\u636e\uff0c\u4f46\u5728 UI \u4e0a\u53ea\u6e32\u67d3\u5f53\u524d\u9875\u7684\u5185\u5bb9\uff0c\u8fd9\u662f\u4e00\u79cd\u6709\u6548\u7684\u6027\u80fd\u4f18\u5316\u624b\u6bb5\uff0c\u907f\u514d\u4e86\u56e0\u6e32\u67d3\u5927\u91cf\u7ec4\u4ef6\u800c\u5bfc\u81f4\u7684\u5361\u987f\u3002</li> <li>\u526f\u4f5c\u7528\u5904\u7406 (<code>BlocConsumer</code>): \u9875\u9762\u4f7f\u7528 <code>BlocConsumer</code> \u6765\u540c\u65f6\u5904\u7406 UI \u6784\u5efa\u548c\u4e00\u6b21\u6027\u4e8b\u4ef6\u3002<code>listener</code> \u90e8\u5206\u4e13\u95e8\u8d1f\u8d23\u54cd\u5e94 <code>DeviceDetailUpdateSuccess</code> \u548c <code>DeviceDetailFailure</code> \u72b6\u6001\uff0c\u901a\u8fc7 <code>ScaffoldMessenger</code> \u5f39\u51fa <code>SnackBar</code> \u6765\u5411\u7528\u6237\u53cd\u9988\u64cd\u4f5c\u7ed3\u679c\uff0c\u800c\u4e0d\u5f15\u8d77\u6574\u4e2a\u9875\u9762\u7684\u975e\u5fc5\u8981\u91cd\u6784\u3002</li> <li>\u7f16\u8f91\u6d41\u7a0b: \u5f53\u6570\u636e\u52a0\u8f7d\u6210\u529f\u540e\uff0c<code>AppBar</code> \u4e0a\u4f1a\u51fa\u73b0\u7f16\u8f91\u6309\u94ae\u3002\u70b9\u51fb\u540e\u4f1a\u5f39\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u8ba9\u7528\u6237\u4fee\u6539\u8bbe\u5907\u4fe1\u606f\u3002\u70b9\u51fb\"\u4fdd\u5b58\"\u4f1a\u89e6\u53d1 <code>UpdateDeviceInfo</code> \u4e8b\u4ef6\uff0c\u542f\u52a8\u4e0a\u8ff0\u7684\u66f4\u65b0\u6d41\u7a0b\u3002</li> </ul>"},{"location":"design/frontend/#33","title":"3.3 \u7ba1\u7406\u5458\u529f\u80fd","text":"<p>\u5e94\u7528\u5185\u5305\u542b\u4e00\u5957\u529f\u80fd\u5b8c\u5584\u7684\u7ba1\u7406\u540e\u53f0\uff0c\u4ec5\u5bf9 <code>is_staff</code> \u6807\u8bb0\u4e3a <code>true</code> \u7684\u7528\u6237\u53ef\u89c1\u3002\u8fd9\u4e9b\u529f\u80fd\u5141\u8bb8\u7ba1\u7406\u5458\u5bf9\u7cfb\u7edf\u7684\u7528\u6237\u3001\u8bbe\u5907\u548c\u6743\u9650\u8fdb\u884c\u7cbe\u7ec6\u5316\u7ba1\u7406\u3002</p>"},{"location":"design/frontend/#331-userlistpage","title":"3.3.1 \u7528\u6237\u7ba1\u7406 (<code>UserListPage</code>)","text":"<p>\u8fd9\u662f\u7ba1\u7406\u5458\u8fdb\u884c\u7528\u6237\u7ba1\u7406\u7684\u57fa\u7840\u9875\u9762\uff0c\u63d0\u4f9b\u7cfb\u7edf\u4e2d\u6240\u6709\u7528\u6237\u7684\u5217\u8868\u89c6\u56fe\u3002</p> <p>1. \u4e1a\u52a1\u903b\u8f91 (UserListBloc)</p> <ul> <li>\u804c\u8d23: \u5355\u7eaf\u8d1f\u8d23\u83b7\u53d6\u548c\u63d0\u4f9b\u5b8c\u6574\u7684\u7528\u6237\u5217\u8868\u3002</li> <li>\u4e8b\u4ef6: <code>LoadUserList</code>\u3002</li> <li>\u72b6\u6001: <code>UserListInProgress</code>, <code>UserListSuccess</code>, <code>UserListFailure</code>\u3002</li> <li>\u6838\u5fc3\u6d41\u7a0b: \u63a5\u6536\u5230 <code>LoadUserList</code> \u4e8b\u4ef6\u540e\uff0cBloc \u8c03\u7528 <code>_apiClient.getUsers()</code>\uff0c\u83b7\u53d6\u6240\u6709\u7528\u6237\u6570\u636e\u540e\u53d1\u51fa <code>UserListSuccess</code> \u72b6\u6001\u3002\u8be5 Bloc \u672c\u8eab\u4e0d\u5904\u7406\u4fee\u6539\u6216\u5220\u9664\u64cd\u4f5c\u3002</li> </ul> <p>2. UI \u4e0e\u4ea4\u4e92 (<code>user_list_page.dart</code>)</p> <ul> <li>\u5217\u8868\u5c55\u793a: \u9875\u9762\u4ee5 <code>ListView</code> \u7684\u5f62\u5f0f\u5c55\u793a\u7528\u6237\u5361\u7247\u3002\u6bcf\u4e2a\u5361\u7247 (<code>_buildUserCard</code>) \u4f1a\u6839\u636e\u7528\u6237\u7684 <code>isStaff</code> \u5c5e\u6027\u663e\u793a\u4e0d\u540c\u7684\u56fe\u6807\uff08\u7ba1\u7406\u5458\u6216\u666e\u901a\u7528\u6237\uff09\uff0c\u5e76\u5c55\u793a\u7528\u6237\u540d\u548c\u90ae\u7bb1\u3002</li> <li>\u4e0b\u62c9\u5237\u65b0: \u9875\u9762\u96c6\u6210\u4e86 <code>RefreshIndicator</code>\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u901a\u8fc7\u4e0b\u62c9\u624b\u52bf\u65b9\u4fbf\u5730\u5237\u65b0\u7528\u6237\u5217\u8868\u3002</li> <li>\u7ba1\u7406\u64cd\u4f5c\u5165\u53e3: \u6bcf\u4e2a\u7528\u6237\u5361\u7247\u53f3\u4fa7\u90fd\u6709\u4e00\u4e2a\"\u66f4\u591a\"(<code>...</code>)\u6309\u94ae\uff0c\u5b83\u4f1a\u5f39\u51fa\u4e00\u4e2a <code>PopupMenuButton</code>\u3002\u8fd9\u79cd\u8bbe\u8ba1\u907f\u514d\u4e86\u5728\u5217\u8868\u4e2d\u5e73\u94fa\u591a\u4e2a\u64cd\u4f5c\u6309\u94ae\uff0c\u4fdd\u6301\u4e86\u754c\u9762\u7684\u7b80\u6d01\u6027\u3002</li> <li>\u5bfc\u822a\u81f3\u6743\u9650\u9875: \u5f53\u524d\u7684\u5f39\u51fa\u83dc\u5355\u4e2d\u5305\u542b\"\u6743\u9650\u7ba1\u7406\"\u9009\u9879\u3002\u70b9\u51fb\u8be5\u9009\u9879\uff0c\u9875\u9762\u4f1a\u5bfc\u822a\u81f3 <code>UserPermissionPage</code>\uff0c\u5e76\u5c06\u5f53\u524d\u7528\u6237\u7684 <code>id</code> \u4f20\u9012\u8fc7\u53bb\u3002\u8fd9\u6784\u6210\u4e86\u7ba1\u7406\u5458\u7684\u6838\u5fc3\u5de5\u4f5c\u6d41\uff1a\u4ece\u5217\u8868\u4e2d\u5b9a\u4f4d\u5230\u7279\u5b9a\u7528\u6237\uff0c\u7136\u540e\u8fdb\u5165\u4e13\u95e8\u7684\u9875\u9762\u5bf9\u5176\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ul>"},{"location":"design/frontend/#332-userpermissionpage","title":"3.3.2 \u7528\u6237\u6743\u9650\u7ba1\u7406 (<code>UserPermissionPage</code>)","text":"<p>\u8fd9\u662f\u6743\u9650\u7cfb\u7edf\u7684\u6838\u5fc3\u754c\u9762\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u4e3a\u5355\u4e2a\u7528\u6237\u7cbe\u786e\u5730\u6388\u4e88\u6216\u64a4\u9500\u5bf9\u7279\u5b9a\u8bbe\u5907\u53ca\u8bbe\u5907\u7ec4\u7684\u8bbf\u95ee\u548c\u63a7\u5236\u6743\u9650\u3002</p> <p>1. \u4e1a\u52a1\u903b\u8f91 (UserPermissionBloc)</p> <p>\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\"\u89c6\u56fe\u6a21\u578b\"(<code>ViewModel</code>) BLoC\uff0c\u5b83\u901a\u8fc7\u534f\u8c03\u591a\u4e2a\u6570\u636e\u6e90\u6765\u4e3a\u4e00\u4e2a\u590d\u6742\u7684 UI \u754c\u9762\u63d0\u4f9b\u670d\u52a1\u3002</p> <ul> <li>\u804c\u8d23: \u83b7\u53d6\u5e76\u6574\u5408\u4e00\u4e2a\u7528\u6237\u5728\u6240\u6709\u8bbe\u5907\u548c\u8bbe\u5907\u7ec4\u4e0a\u7684\u6743\u9650\u4fe1\u606f\uff0c\u5e76\u5904\u7406\u6743\u9650\u66f4\u65b0\u8bf7\u6c42\u3002</li> <li> <p>\u4e8b\u4ef6:</p> </li> <li> <p><code>LoadUserPermission</code>: \u6838\u5fc3\u52a0\u8f7d\u4e8b\u4ef6\uff0c\u9700\u8981\u4f20\u5165 <code>userId</code>\u3002</p> </li> <li><code>UpdateUserPermissionOnDevice</code>: \u66f4\u65b0\u7528\u6237\u5728\u5355\u4e2a\u8bbe\u5907\u4e0a\u7684\u6743\u9650\u3002</li> <li><code>UpdateUserPermissionOnDeviceGroup</code>: \u66f4\u65b0\u7528\u6237\u5728\u8bbe\u5907\u7ec4\u4e0a\u7684\u6743\u9650\u3002</li> <li> <p>\u6838\u5fc3\u6d41\u7a0b - \u52a0\u8f7d:</p> </li> <li> <p>\u5f53 <code>LoadUserPermission</code> \u4e8b\u4ef6\u88ab\u89e6\u53d1\u65f6\uff0cBloc \u4f1a\u5e76\u884c\u53d1\u8d77 4 \u4e2a API \u8bf7\u6c42\uff1a\u83b7\u53d6\u6240\u6709\u8bbe\u5907\u3001\u6240\u6709\u8bbe\u5907\u7ec4\u3001\u8be5\u7528\u6237\u7684\u8bbe\u5907\u6743\u9650\u3001\u8be5\u7528\u6237\u7684\u8bbe\u5907\u7ec4\u6743\u9650\u3002</p> </li> <li>\u5728\u6240\u6709\u8bf7\u6c42\u6210\u529f\u540e\uff0cBloc \u4f1a\u5728\u5185\u90e8\u8fdb\u884c\u6570\u636e\u805a\u5408\u4e0e\u5206\u7c7b\u3002\u5b83\u4ee5\u5168\u91cf\u8bbe\u5907/\u8bbe\u5907\u7ec4\u5217\u8868\u4e3a\u57fa\u51c6\uff0c\u5c06\u5b83\u4eec\u5212\u5206\u4e3a\"\u6709\u6743\u9650\"\u548c\"\u65e0\u6743\u9650\"\u4e24\u7c7b\u3002</li> <li>\u6700\u540e\uff0c\u53d1\u51fa\u4e00\u4e2a\u5305\u542b\u6240\u6709\u8fd9\u4e9b\u9884\u5904\u7406\u8fc7\u7684\u3001\u53ef\u4ee5\u76f4\u63a5\u4f9b UI \u6e32\u67d3\u7684\u5217\u8868\u7684 <code>UserPermissionLoaded</code> \u72b6\u6001\u3002\u8fd9\u79cd\u8bbe\u8ba1\u6781\u5927\u5730\u7b80\u5316\u4e86 UI \u5c42\u7684\u903b\u8f91\uff0c\u5c06\u590d\u6742\u7684\u6570\u636e\u5904\u7406\u5168\u90e8\u5c01\u88c5\u5728\u4e86 Bloc \u4e2d\u3002</li> <li> <p>\u6838\u5fc3\u6d41\u7a0b - \u66f4\u65b0:</p> </li> <li> <p>\u5f53\u63a5\u6536\u5230 <code>Update...</code> \u4e8b\u4ef6\u65f6\uff0cBloc \u4f1a\u8c03\u7528\u5bf9\u5e94\u7684 API \u65b9\u6cd5\u901a\u77e5\u540e\u7aef\u66f4\u65b0\u6743\u9650\u3002</p> </li> <li>\u64cd\u4f5c\u6210\u529f\u540e\uff0c\u5b83\u4f1a\u91cd\u65b0\u5206\u53d1 <code>LoadUserPermission</code> \u4e8b\u4ef6\u3002\u8fd9\u4e2a \"Command-then-Reload\" \u6a21\u5f0f\u786e\u4fdd\u4e86\u4efb\u4f55\u4fee\u6539\u540e\uff0c\u9875\u9762\u90fd\u4f1a\u4ece\u670d\u52a1\u5668\u62c9\u53d6\u6700\u65b0\u3001\u6700\u5b8c\u6574\u7684\u72b6\u6001\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5f3a\u4e00\u81f4\u6027\u3002</li> </ul> <p>2. UI \u4e0e\u4ea4\u4e92 (user_permission_page.dart)</p> <p>\u8fd9\u4e2a\u9875\u9762\u662f\u5e94\u7528\u4e2d\u4ea4\u4e92\u6700\u590d\u6742\u7684\u7ba1\u7406\u754c\u9762\u4e4b\u4e00\uff0c\u5176\u8bbe\u8ba1\u5145\u5206\u5229\u7528\u4e86 Bloc \u63d0\u4f9b\u7684\u5bcc\u72b6\u6001\u3002</p> <ul> <li>\u6807\u7b7e\u9875\u5e03\u5c40: \u9875\u9762\u4f7f\u7528 <code>TabBar</code> \u5c06\"\u8bbe\u5907\u6743\u9650\"\u548c\"\u8bbe\u5907\u7ec4\u6743\u9650\"\u6e05\u6670\u5730\u5206\u79bb\u5230\u4e24\u4e2a\u6807\u7b7e\u9875\u4e2d\uff0c\u4f7f\u5f97\u7ba1\u7406\u5458\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4e00\u9879\u4efb\u52a1\u3002</li> <li>\u5373\u65f6\u641c\u7d22\u4e0e\u8fc7\u6ee4: \u9875\u9762\u63d0\u4f9b\u4e86\u4e00\u4e2a\u641c\u7d22\u6846\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u5feb\u901f\u7b5b\u9009\u8bbe\u5907/\u8bbe\u5907\u7ec4\u3002\u8fc7\u6ee4\u903b\u8f91\u5728 UI \u5c42\u5b9e\u73b0\uff0c\u76f4\u63a5\u4f5c\u7528\u4e8e <code>UserPermissionLoaded</code> \u72b6\u6001\u4e2d\u5df2\u6709\u7684\u5217\u8868\u6570\u636e\uff0c\u54cd\u5e94\u8fc5\u901f\u3002</li> <li> <p>\u6e05\u6670\u7684\u6743\u9650\u5c55\u793a\u4e0e\u4fee\u6539:</p> </li> <li> <p>UI \u4ece Bloc \u63a5\u6536\u5230\u5206\u7c7b\u597d\u7684\u5217\u8868\u540e\uff0c\u5c06\u5b83\u4eec\u5408\u5e76\u7528\u4e8e\u5c55\u793a\u3002</p> </li> <li>\u5217\u8868\u4e2d\u7684\u6bcf\u4e00\u9879\u90fd\u4f1a\u6e05\u6670\u5730\u5c55\u793a\u51fa\u5f53\u524d\u7684\u6743\u9650\u7b49\u7ea7\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u4e00\u4e2a <code>DropdownButton</code> \u663e\u793a\"\u53ea\u8bfb\"\u3001\"\u63a7\u5236\"\u6216\"\u65e0\"\uff09\u3002</li> <li>\u5f53\u7ba1\u7406\u5458\u901a\u8fc7 UI \u63a7\u4ef6\uff08\u5982\u4e0b\u62c9\u83dc\u5355\uff09\u4fee\u6539\u67d0\u4e2a\u8bbe\u5907\u6216\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u65f6\uff0c<code>onChanged</code> \u56de\u8c03\u4f1a\u7acb\u5373\u5411 Bloc \u53d1\u9001\u5bf9\u5e94\u7684 <code>Update...</code> \u4e8b\u4ef6\u3002</li> <li>\u5065\u58ee\u7684\u9519\u8bef\u5904\u7406: \u5f53 <code>state</code> \u662f <code>UserPermissionError</code> \u65f6\uff0c\u9875\u9762\u4e0d\u4ec5\u4f1a\u663e\u793a\u9519\u8bef\u4fe1\u606f\uff0c\u8fd8\u4f1a\u63d0\u4f9b\u4e00\u4e2a\"\u91cd\u8bd5\"\u6309\u94ae\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u65b9\u4fbf\u5730\u91cd\u65b0\u89e6\u53d1 <code>LoadUserPermission</code> \u4e8b\u4ef6\uff0c\u63d0\u5347\u4e86\u5bb9\u9519\u80fd\u529b\u548c\u7528\u6237\u4f53\u9a8c\u3002</li> </ul>"},{"location":"design/frontend/#333","title":"3.3.3 \u7528\u6237\u7ec4\u7ba1\u7406","text":"<p>\u4e3a\u4e86\u7b80\u5316\u5927\u89c4\u6a21\u7684\u6743\u9650\u5206\u914d\uff0c\u7cfb\u7edf\u5f15\u5165\u4e86\"\u7528\u6237\u7ec4\"\u7684\u6982\u5ff5\u3002\u7ba1\u7406\u5458\u53ef\u4ee5\u521b\u5efa\u7528\u6237\u7ec4\uff0c\u4e3a\u6574\u4e2a\u7ec4\u5206\u914d\u6743\u9650\uff0c\u7136\u540e\u901a\u8fc7\u7ba1\u7406\u7ec4\u6210\u5458\u6765\u6279\u91cf\u8c03\u6574\u7528\u6237\u7684\u6743\u9650\uff0c\u800c\u4e0d\u662f\u9010\u4e00\u4e3a\u7528\u6237\u8fdb\u884c\u8bbe\u7f6e\u3002</p> <p>1. \u7528\u6237\u7ec4\u5217\u8868 (UserGroupListPage)</p> <p>\u8fd9\u662f\u7528\u6237\u7ec4\u7ba1\u7406\u7684\u5165\u53e3\u9875\u9762\uff0c\u63d0\u4f9b\u521b\u5efa\u3001\u67e5\u770b\u3001\u5220\u9664\u7528\u6237\u7ec4\u4ee5\u53ca\u5bfc\u822a\u5230\u66f4\u6df1\u5c42\u6b21\u7ba1\u7406\u7684\u529f\u80fd\u3002</p> <ul> <li> <p>\u4e1a\u52a1\u903b\u8f91 (UserGroupListBloc):</p> </li> <li> <p>\u8be5 Bloc \u8d1f\u8d23\u7528\u6237\u7ec4\u7684\"\u589e\u3001\u5220\u3001\u67e5\"\u903b\u8f91\u3002</p> </li> <li>\u4e8b\u4ef6: <code>LoadUserGroupList</code>, <code>CreateUserGroup</code>, <code>RemoveUserGroup</code>\u3002</li> <li>\u6838\u5fc3\u6d41\u7a0b: \u52a0\u8f7d\u6d41\u7a0b\u4e0e\u5176\u5b83\u5217\u8868\u9875\u7c7b\u4f3c\u3002\u5bf9\u4e8e <code>CreateUserGroup</code> \u548c <code>RemoveUserGroup</code> \u4e8b\u4ef6\uff0cBloc \u5728\u8c03\u7528 API \u6210\u529f\u540e\uff0c\u540c\u6837\u91c7\u7528 \"Command-then-Reload\" \u6a21\u5f0f\uff0c\u901a\u8fc7\u91cd\u65b0\u5206\u53d1 <code>LoadUserGroupList</code> \u4e8b\u4ef6\u6765\u5237\u65b0\u6574\u4e2a\u5217\u8868\uff0c\u786e\u4fdd\u6570\u636e\u540c\u6b65\u3002</li> <li> <p>UI \u4e0e\u4ea4\u4e92 (user_group_list_page.dart):</p> </li> <li> <p>\u521b\u5efa\u5165\u53e3: \u9875\u9762\u901a\u8fc7\u4e00\u4e2a <code>FloatingActionButton</code> \u63d0\u4f9b\u521b\u5efa\u65b0\u7528\u6237\u7ec4\u7684\u5165\u53e3\uff0c\u70b9\u51fb\u540e\u4f1a\u5f39\u51fa\u5bf9\u8bdd\u6846\u8ba9\u7ba1\u7406\u5458\u8f93\u5165\u4fe1\u606f\u3002</p> </li> <li>\u591a\u529f\u80fd\u5361\u7247: \u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u7528\u6237\u7ec4\u5361\u7247\u90fd\u8bbe\u8ba1\u4e86\u6e05\u6670\u7684\u4ea4\u4e92\u5206\u533a\uff1a<ul> <li>\u70b9\u51fb\u5361\u7247\u4e3b\u4f53: \u5bfc\u822a\u81f3 <code>UserGroupDetailPage</code>\uff0c\u7528\u4e8e\u7ba1\u7406\u8be5\u7ec4\u7684\u6210\u5458\uff08\u6dfb\u52a0/\u79fb\u9664\u7528\u6237\uff09\u3002</li> <li>\u70b9\u51fb\"\u66f4\u591a\"\u83dc\u5355:</li> <li>\u9009\u62e9\"\u6743\u9650\u7ba1\u7406\"\uff0c\u5bfc\u822a\u81f3 <code>UserGroupPermissionPage</code>\uff0c\u7528\u4e8e\u7ba1\u7406\u8be5\u7ec4\u7684\u6574\u4f53\u6743\u9650\u3002</li> <li>\u9009\u62e9\"\u5220\u9664\"\uff0c\u89e6\u53d1\u5220\u9664\u6d41\u7a0b\u3002</li> </ul> </li> <li>\u8fd9\u79cd\u8bbe\u8ba1\u5c06\"\u5bf9\u5185\uff08\u6210\u5458\uff09\"\u548c\"\u5bf9\u5916\uff08\u6743\u9650\uff09\"\u7684\u7ba1\u7406\u6e05\u6670\u5730\u5206\u5f00\uff0c\u5bfc\u822a\u8def\u5f84\u660e\u786e\u3002</li> </ul> <p>2. \u7528\u6237\u7ec4\u6210\u5458\u7ba1\u7406 (UserGroupDetailPage)</p> <p>\u4ece\u5217\u8868\u9875\u70b9\u51fb\u7528\u6237\u7ec4\u5361\u7247\u540e\u8fdb\u5165\u6b64\u9875\u9762\u3002</p> <ul> <li> <p>\u4e1a\u52a1\u903b\u8f91 (UserGroupBloc):</p> </li> <li> <p>\u8be5 Bloc \u7684\u552f\u4e00\u804c\u8d23\u662f\u7ba1\u7406\u7279\u5b9a\u7528\u6237\u7ec4\u7684\u6210\u5458\u3002</p> </li> <li>\u6838\u5fc3\u6d41\u7a0b: \u5b83\u4f1a\u83b7\u53d6\u7cfb\u7edf\u4e2d\u6240\u6709\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u5f53\u524d\u7528\u6237\u7ec4\u7684\u6210\u5458 ID \u5217\u8868\uff0c\u5c06\u7528\u6237\u5206\u4e3a\"\u7ec4\u5185\u6210\u5458\"\u548c\"\u53ef\u6dfb\u52a0\u6210\u5458\"\uff0c\u7136\u540e\u5c06\u8fd9\u4e24\u4e2a\u5217\u8868\u63d0\u4f9b\u7ed9 UI\u3002\u5b83\u8d1f\u8d23\u5904\u7406\u6dfb\u52a0\u548c\u79fb\u9664\u6210\u5458\u7684 API \u8c03\u7528\uff0c\u5e76\u5728\u64cd\u4f5c\u6210\u529f\u540e\u5237\u65b0\u6210\u5458\u5217\u8868\u3002</li> <li> <p>UI \u4e0e\u4ea4\u4e92 (user_group_detail_page.dart):</p> </li> <li> <p>\u8be5\u9875\u9762\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u5c55\u793a\u7528\u6237\u7ec4\u7684\u57fa\u672c\u4fe1\u606f\uff08\u540d\u79f0\u3001\u63cf\u8ff0\uff09\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u5c55\u793a\"\u7ec4\u5185\u6210\u5458\"\u5217\u8868\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\"\u6dfb\u52a0\u7528\u6237\"\u7684\u5165\u53e3\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u6309\u94ae\uff0c\u70b9\u51fb\u540e\u4f1a\u5f39\u51fa\u5305\u542b\u6240\u6709\"\u53ef\u6dfb\u52a0\u6210\u5458\"\u7684\u5bf9\u8bdd\u6846\uff09\u3002</p> </li> <li>\u6ce8\u610f: \u5728\u5f53\u524d\u5b9e\u73b0\u4e2d\uff0c\u8be5\u9875\u9762 \u4e0d\u63d0\u4f9b \u4fee\u6539\u7528\u6237\u7ec4\u540d\u79f0\u6216\u63cf\u8ff0\u7684\u529f\u80fd\u3002</li> </ul>"},{"location":"design/frontend/#apiclient","title":"\u7b2c\u56db\u7ae0\uff1a\u524d\u540e\u7aef\u534f\u4f5c\u673a\u5236 (<code>ApiClient</code>)","text":"<p><code>ApiClient</code> (<code>lib/api/api_client.dart</code>) \u662f\u524d\u7aef\u4e0e\u540e\u7aef API \u8fdb\u884c\u901a\u4fe1\u7684\u552f\u4e00\u51fa\u53e3\uff0c\u662f\u8fde\u63a5\u4e1a\u52a1\u903b\u8f91\u5c42\u4e0e\u6570\u636e\u6e90\u7684\u6865\u6881\u3002\u5b83\u57fa\u4e8e\u5f3a\u5927\u7684 <code>dio</code> \u5e93\u6784\u5efa\uff0c\u5e76\u91c7\u7528\u62e6\u622a\u5668\u5b9e\u73b0\u4e86\u4f18\u96c5\u7684\u81ea\u52a8\u5316\u8ba4\u8bc1\u5904\u7406\u3002</p>"},{"location":"design/frontend/#41-dio","title":"4.1 <code>dio</code> \u5b9e\u4f8b\u914d\u7f6e\u4e0e\u62e6\u622a\u5668","text":"<ul> <li>\u57fa\u7840\u914d\u7f6e: <code>ApiClient</code> \u5728\u6784\u9020\u65f6\u4f1a\u521d\u59cb\u5316\u4e00\u4e2a <code>dio</code> \u5b9e\u4f8b\uff0c\u5e76\u4ece <code>config/env.dart</code> \u6587\u4ef6\u4e2d\u8bfb\u53d6 <code>Env.apiUrl</code> \u4f5c\u4e3a\u5176 <code>baseUrl</code>\u3002\u8fd9\u4f7f\u5f97\u5e94\u7528\u53ef\u4ee5\u8f7b\u677e\u5730\u5728\u4e0d\u540c\u73af\u5883\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\uff09\u7684\u670d\u52a1\u5668\u4e4b\u95f4\u5207\u6362\u3002\u6b64\u5916\uff0c\u8fd8\u63d0\u4f9b <code>setAPIURL</code> \u65b9\u6cd5\uff0c\u652f\u6301\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u4fee\u6539 API \u670d\u52a1\u5668\u5730\u5740\u3002</li> <li> <p>\u81ea\u52a8\u8ba4\u8bc1\u6ce8\u5165 (Interceptor):</p> </li> <li> <p><code>ApiClient</code> \u7684\u6838\u5fc3\u8bbe\u8ba1\u5728\u4e8e\u5176 <code>InterceptorsWrapper</code>\u3002\u8fd9\u662f\u4e00\u4e2a\u8bf7\u6c42\u62e6\u622a\u5668\uff0c\u4f1a\u5728\u6bcf\u6b21 API \u8c03\u7528\u53d1\u51fa\u524d\u81ea\u52a8\u6267\u884c <code>onRequest</code> \u56de\u8c03\u3002</p> </li> <li>\u5de5\u4f5c\u6d41\u7a0b:<ol> <li>\u5728 <code>onRequest</code> \u56de\u8c03\u4e2d\uff0c\u4ee3\u7801\u4f1a\u5f02\u6b65\u5730\u4ece <code>SecureStorage</code> \u8bfb\u53d6\u5df2\u4fdd\u5b58\u7684\u8ba4\u8bc1 Token\u3002</li> <li>\u5982\u679c Token \u5b58\u5728\uff0c\u5c31\u5c06\u5176\u6dfb\u52a0\u5230\u5f53\u524d\u8bf7\u6c42\u7684 <code>Header</code> \u4e2d\uff1a<code>options.headers['Authorization'] = 'Bearer $token'</code>\u3002</li> <li>\u5982\u679c Token \u4e0d\u5b58\u5728\uff08\u4f8b\u5982\u7528\u6237\u672a\u767b\u5f55\uff09\uff0c\u5219\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u3002</li> <li>\u6700\u540e\uff0c\u8c03\u7528 <code>handler.next(options)</code> \u5c06\u5e26\u6709\uff08\u6216\u4e0d\u5e26\uff09\u8ba4\u8bc1\u5934\u7684\u8bf7\u6c42\u653e\u884c\u3002</li> </ol> </li> <li>\u4f18\u52bf: \u8fd9\u79cd\u8bbe\u8ba1\u5b9e\u73b0\u4e86\u8ba4\u8bc1\u903b\u8f91\u4e0e\u5177\u4f53\u4e1a\u52a1\u8bf7\u6c42\u7684\u5b8c\u5168\u89e3\u8026\u3002\u4efb\u4f55\u4e00\u4e2a <code>Bloc</code> \u5728\u8c03\u7528 <code>ApiClient</code> \u7684\u65b9\u6cd5\u65f6\uff0c\u90fd\u65e0\u9700\u5173\u5fc3 Token \u7684\u5b58\u5728\u4e0e\u5426\u6216\u5982\u4f55\u4f20\u9012\uff0c\u62e6\u622a\u5668\u4f1a\u81ea\u52a8\u5904\u7406\u8fd9\u4e00\u5207\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u4e1a\u52a1\u5c42\u4ee3\u7801\u3002</li> </ul>"},{"location":"design/frontend/#42-api","title":"4.2 API \u65b9\u6cd5\u6982\u89c8","text":"<p><code>ApiClient</code> \u4e2d\u7684\u65b9\u6cd5\u6309\u7167\u540e\u7aef API \u7684\u6a21\u5757\u8fdb\u884c\u4e86\u6e05\u6670\u7684\u5212\u5206\uff0c\u6bcf\u4e2a\u65b9\u6cd5\u90fd\u5bf9\u5e94\u4e00\u4e2a\u5177\u4f53\u7684 RESTful \u63a5\u53e3\u3002</p> <ul> <li> <p>\u8ba4\u8bc1 (<code>/auth/</code>):</p> </li> <li> <p><code>login(email, password)</code>: \u7528\u6237\u767b\u5f55\u3002</p> </li> <li><code>register(...)</code>: \u7528\u6237\u6ce8\u518c\u3002</li> <li><code>getUserInfo()</code>: \u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\u3002</li> <li> <p>\u8bbe\u5907\u7ba1\u7406 (<code>/devices/</code>):</p> </li> <li> <p><code>getDevices()</code>: \u83b7\u53d6\u6388\u6743\u8bbe\u5907\u6982\u89c8\u5217\u8868\u3002</p> </li> <li><code>getDeviceDetail(id)</code>: \u83b7\u53d6\u5355\u4e2a\u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f\uff08\u5305\u62ec\u65e5\u5fd7\u3001\u4f7f\u7528\u8bb0\u5f55\u7b49\uff09\u3002</li> <li><code>updateDeviceInfo(...)</code>: \u66f4\u65b0\u8bbe\u5907\u7684\u57fa\u672c\u4fe1\u606f\uff08\u540d\u79f0\u3001\u63cf\u8ff0\u7b49\uff09\u3002</li> <li><code>deleteDevice(id)</code>: \u5220\u9664\u8bbe\u5907\u3002</li> <li><code>controlDevice(...)</code>: \u5411\u8bbe\u5907\u53d1\u9001\u63a7\u5236\u6307\u4ee4\uff08\u5728\u6587\u6863\u4e2d\u6682\u672a\u6df1\u5165\u5206\u6790\uff0c\u4f46\u63a5\u53e3\u5df2\u9884\u7559\uff09\u3002</li> <li> <p>\u7ba1\u7406\u5458 - \u7528\u6237\u7ba1\u7406 (<code>/auth/</code>, <code>/permissions/</code>):</p> </li> <li> <p><code>getUsers()</code>: \u83b7\u53d6\u6240\u6709\u7528\u6237\u5217\u8868\u3002</p> </li> <li><code>getUserPermissionOnDevices(userId)</code>: \u83b7\u53d6\u7279\u5b9a\u7528\u6237\u5728\u6240\u6709\u8bbe\u5907\u4e0a\u7684\u6743\u9650\u3002</li> <li><code>updateUserPermissionOnDevice(...)</code>: \u66f4\u65b0\u7279\u5b9a\u7528\u6237\u5728\u67d0\u4e2a\u8bbe\u5907\u4e0a\u7684\u6743\u9650\u3002</li> <li>\u4ee5\u53ca\u4e00\u7cfb\u5217\u9488\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u83b7\u53d6\u4e0e\u66f4\u65b0\u63a5\u53e3\u3002</li> <li> <p>\u7ba1\u7406\u5458 - \u7528\u6237\u7ec4/\u8bbe\u5907\u7ec4\u7ba1\u7406 (<code>/user-groups/</code>, <code>/device-groups/</code>):</p> </li> <li> <p>\u63d0\u4f9b\u4e86\u5bf9\u7528\u6237\u7ec4\u548c\u8bbe\u5907\u7ec4\u5b8c\u6574\u7684 CRUD (\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u66f4\u65b0\u3001\u5220\u9664) \u64cd\u4f5c\u3002</p> </li> <li>\u63d0\u4f9b\u4e86\u4e3a\u7ec4\u6dfb\u52a0/\u79fb\u9664\u6210\u5458\uff08\u7528\u6237\u6216\u8bbe\u5907\uff09\u7684\u63a5\u53e3\u3002</li> <li>\u63d0\u4f9b\u4e86\u4e3a\u6574\u4e2a\u7ec4\u8bbe\u7f6e\u6743\u9650\u7684\u63a5\u53e3\u3002</li> </ul>"},{"location":"design/frontend/#43","title":"4.3 \u9519\u8bef\u5904\u7406","text":"<p><code>ApiClient</code> \u81ea\u8eab\u5e76\u4e0d\u5305\u542b\u663e\u5f0f\u7684 <code>try-catch</code> \u5757\u3002\u5b83\u9075\u5faa <code>dio</code> \u7684\u9ed8\u8ba4\u884c\u4e3a\uff1a\u5f53 API \u8fd4\u56de\u975e 2xx \u72b6\u6001\u7801\u65f6\uff0c<code>dio</code> \u4f1a\u629b\u51fa\u4e00\u4e2a <code>DioException</code>\u3002</p> <p>\u8fd9\u4e9b\u5f02\u5e38\u4f1a\u5728\u8c03\u7528 <code>ApiClient</code> \u65b9\u6cd5\u7684\u4e0a\u4e00\u5c42\u2014\u2014\u4e5f\u5c31\u662f\u5404\u4e2a <code>Bloc</code> \u4e2d\u2014\u2014\u88ab\u7edf\u4e00\u7684 <code>try-catch</code> \u5757\u6355\u83b7\u3002<code>Bloc</code> \u5728\u6355\u83b7\u5230\u5f02\u5e38\u540e\uff0c\u4f1a\u53d1\u51fa\u4e00\u4e2a <code>...Failure</code> \u6216 <code>...Error</code> \u72b6\u6001\uff0c\u5e76\u5c06\u9519\u8bef\u4fe1\u606f\u4f20\u9012\u7ed9 UI \u5c42\u8fdb\u884c\u5c55\u793a\u3002\u8fd9\u79cd\u5206\u5c42\u5904\u7406\u4f7f\u5f97\u7f51\u7edc\u9519\u8bef\u548c\u4e1a\u52a1\u903b\u8f91\u9519\u8bef\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5730\u65b9\u88ab\u7ba1\u7406\uff0c\u4fdd\u6301\u4e86\u4ee3\u7801\u7684\u6574\u6d01\u3002</p>"},{"location":"design/frontend/#uiux","title":"\u7b2c\u4e94\u7ae0\uff1aUI/UX \u4e0e\u4e3b\u9898\u8bbe\u8ba1","text":"<p>\u672c\u7ae0\u5c06\u6982\u8ff0\u9879\u76ee\u5728\u7528\u6237\u754c\u9762\uff08UI\uff09\u3001\u7528\u6237\u4f53\u9a8c\uff08UX\uff09\u548c\u89c6\u89c9\u98ce\u683c\u65b9\u9762\u7684\u8bbe\u8ba1\u4e0e\u5b9e\u73b0\u7b56\u7565\u3002</p>"},{"location":"design/frontend/#51","title":"5.1 \u8bbe\u8ba1\u7cfb\u7edf\u4e0e\u98ce\u683c","text":"<ul> <li>\u8bbe\u8ba1\u8bed\u8a00: \u5e94\u7528\u9075\u5faa Material Design \u8bbe\u8ba1\u89c4\u8303\uff0c\u901a\u8fc7 <code>uses-material-design: true</code> \u914d\u7f6e\uff0c\u5229\u7528\u4e86 Flutter \u5185\u7f6e\u7684\u4e30\u5bcc\u3001\u9ad8\u8d28\u91cf\u7684 Material \u7ec4\u4ef6\u5e93\uff0c\u786e\u4fdd\u4e86 UI \u5728\u4e0d\u540c\u5e73\u53f0\u4e0a\u7684\u884c\u4e3a\u4e00\u81f4\u6027\u548c\u89c6\u89c9\u719f\u6089\u611f\u3002</li> <li>\u81ea\u5b9a\u4e49\u5b57\u4f53: \u9879\u76ee\u5728 <code>pubspec.yaml</code> \u4e2d\u5f15\u5165\u4e86 <code>LxgwWenkaiGb</code> (\u971e\u9e5c\u6587\u6977 GB) \u4f5c\u4e3a\u5168\u5c40\u81ea\u5b9a\u4e49\u5b57\u4f53\u3002\u8fd9\u6b3e\u5b57\u4f53\u5177\u6709\u624b\u5199\u6e29\u5ea6\u548c\u826f\u597d\u7684\u53ef\u8bfb\u6027\uff0c\u4e3a\u5e94\u7528\u8d4b\u4e88\u4e86\u72ec\u7279\u3001\u4f18\u96c5\u7684\u89c6\u89c9\u98ce\u683c\uff0c\u63d0\u5347\u4e86\u54c1\u724c\u7684\u8fa8\u8bc6\u5ea6\u3002</li> <li> <p>\u56fe\u6807\u7cfb\u7edf: \u5e94\u7528\u540c\u65f6\u4f7f\u7528\u4e86\u4e24\u79cd\u56fe\u6807\uff1a</p> </li> <li> <p><code>CupertinoIcons</code>: \u4e3b\u8981\u7528\u4e8e\u63d0\u4f9b iOS \u98ce\u683c\u7684\u56fe\u6807\u3002</p> </li> <li><code>flutter_svg</code>: \u7528\u4e8e\u52a0\u8f7d\u548c\u6e32\u67d3 <code>SVG</code> \u683c\u5f0f\u7684\u77e2\u91cf\u56fe\u6807\u3002\u4f7f\u7528 SVG \u4f5c\u4e3a\u56fe\u6807\u683c\u5f0f\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u56fe\u6807\u5728\u4efb\u4f55\u5c4f\u5e55\u5c3a\u5bf8\u548c\u5206\u8fa8\u7387\u4e0b\u90fd\u4fdd\u6301\u6e05\u6670\u9510\u5229\uff0c\u4e0d\u4f1a\u5931\u771f\u3002</li> <li>\u7edf\u4e00\u6837\u5f0f: <code>utils/styles.dart</code> \u6587\u4ef6\uff08\u867d\u7136\u672c\u6587\u6863\u672a\u6df1\u5165\u5206\u6790\u5176\u5185\u5bb9\uff09\u88ab\u7528\u4f5c\u4e00\u4e2a\u4e2d\u5fc3\u5316\u7684\u6837\u5f0f\u5b9a\u4e49\u5e93\uff0c\u7528\u4e8e\u5b58\u653e\u901a\u7528\u7684\u989c\u8272\u3001\u6587\u672c\u6837\u5f0f\u3001\u8fb9\u8ddd\u7b49\u3002\u8fd9\u79cd\u505a\u6cd5\u4fbf\u4e8e\u5b9e\u73b0\u5168\u5c40 UI \u98ce\u683c\u7684\u7edf\u4e00\u7ba1\u7406\u548c\u5feb\u901f\u8c03\u6574\u3002</li> </ul>"},{"location":"design/frontend/#52","title":"5.2 \u52a8\u6001\u4e3b\u9898\u5207\u6362","text":"<p>\u5e94\u7528\u652f\u6301\u52a8\u6001\u4e3b\u9898\u5207\u6362\uff08\u4f8b\u5982\uff0c\u65e5\u95f4/\u591c\u95f4\u6a21\u5f0f\uff09\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u4e2a\u6027\u5316\u7684\u89c6\u89c9\u4f53\u9a8c\u3002\u5176\u5b9e\u73b0\u673a\u5236\u5982\u4e0b\uff1a</p> <ul> <li>\u72b6\u6001\u7ba1\u7406 (<code>Riverpod</code>): \u4e3b\u9898\u7684\u72b6\u6001\u7531 <code>providers/theme_provider.dart</code> \u4e2d\u7684 <code>StateNotifierProvider</code> \u8fdb\u884c\u7ba1\u7406\u3002<code>ThemeNotifier</code> \u7c7b\u7ee7\u627f\u81ea <code>StateNotifier&lt;ThemeMode&gt;</code>\uff0c\u8d1f\u8d23\u6301\u6709 <code>ThemeMode.light</code> \u6216 <code>ThemeMode.dark</code> \u7b49\u72b6\u6001\u3002</li> <li> <p>\u6301\u4e45\u5316 (<code>SharedPreferences</code>): \u4e3a\u4e86\u5728\u5e94\u7528\u91cd\u542f\u540e\u4fdd\u6301\u7528\u6237\u7684\u4e3b\u9898\u9009\u62e9\uff0c<code>ThemeNotifier</code> \u5185\u90e8\u96c6\u6210\u4e86 <code>shared_preferences</code>\u3002</p> </li> <li> <p>\u52a0\u8f7d: \u5e94\u7528\u542f\u52a8\u65f6\uff0c<code>ThemeNotifier</code> \u7684\u6784\u9020\u51fd\u6570\u4f1a\u8c03\u7528 <code>_loadTheme</code> \u65b9\u6cd5\uff0c\u4ece\u672c\u5730\u5b58\u50a8\u8bfb\u53d6\u7528\u6237\u4e0a\u6b21\u4fdd\u5b58\u7684\u4e3b\u9898\u504f\u597d\uff0c\u5e76\u8bbe\u7f6e\u4e3a\u521d\u59cb\u72b6\u6001\u3002</p> </li> <li>\u4fdd\u5b58: \u5f53\u7528\u6237\u5207\u6362\u4e3b\u9898\u540e\uff0c<code>toggleTheme</code> \u65b9\u6cd5\u4f1a\u8c03\u7528 <code>_saveTheme</code>\uff0c\u5c06\u65b0\u7684 <code>ThemeMode</code> \u7684\u7d22\u5f15\uff08<code>themeMode.index</code>\uff09\u6301\u4e45\u5316\u5230\u672c\u5730\u3002</li> <li>UI \u4ea4\u4e92: <code>widgets/theme_toggle_button.dart</code> \u662f\u4e00\u4e2a\u53ef\u590d\u7528\u7684 UI \u7ec4\u4ef6\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u5728\u4e0d\u540c\u4e3b\u9898\u6a21\u5f0f\u4e4b\u95f4\u5207\u6362\u3002\u70b9\u51fb\u8be5\u6309\u94ae\u4f1a\u8c03\u7528 <code>ThemeNotifier</code> \u7684 <code>toggleTheme</code> \u65b9\u6cd5\u6765\u66f4\u65b0\u72b6\u6001\u3002</li> </ul>"},{"location":"design/frontend/#_4","title":"\u7b2c\u516d\u7ae0\uff1a\u5f00\u53d1\u5165\u95e8\u6307\u5357","text":"<p>\u672c\u7ae0\u4e3a\u65b0\u52a0\u5165\u7684\u5f00\u53d1\u8005\u63d0\u4f9b\u5feb\u901f\u642d\u5efa\u548c\u8fd0\u884c\u524d\u7aef\u9879\u76ee\u7684\u6307\u5bfc\u3002</p>"},{"location":"design/frontend/#61","title":"6.1 \u73af\u5883\u51c6\u5907","text":"<ol> <li>\u5b89\u88c5 Flutter: \u8bf7\u786e\u4fdd\u4f60\u5df2\u5b89\u88c5 Flutter SDK\uff0c\u5e76\u4e14\u7248\u672c\u517c\u5bb9 <code>pubspec.yaml</code> \u4e2d\u5b9a\u4e49\u8303\u56f4 (<code>&gt;=3.8.0 &lt;4.0.0</code>)\u3002\u53ef\u4ee5\u901a\u8fc7 <code>flutter --version</code> \u547d\u4ee4\u68c0\u67e5\u3002</li> <li>IDE \u914d\u7f6e: \u914d\u7f6e\u597d\u4f60\u7684\u5f00\u53d1\u73af\u5883\uff08\u5982 VS Code \u6216 Android Studio/IntelliJ\uff09\u53ca\u76f8\u5173\u7684 Flutter \u548c Dart \u63d2\u4ef6\u3002</li> <li>\u83b7\u53d6\u4ee3\u7801: \u4ece\u4ee3\u7801\u4ed3\u5e93\u514b\u9686\u672c\u9879\u76ee\u5230\u672c\u5730\u3002</li> </ol> <pre><code>git clone [your-repository-url]\ncd frontend\n</code></pre>"},{"location":"design/frontend/#62","title":"6.2 \u6784\u5efa\u4e0e\u8fd0\u884c","text":"<ol> <li> <p>\u5b89\u88c5\u4f9d\u8d56: \u5728\u9879\u76ee\u6839\u76ee\u5f55\uff08<code>frontend/</code>\uff09\u4e0b\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4e0b\u8f7d\u6240\u6709\u5728 <code>pubspec.yaml</code> \u4e2d\u58f0\u660e\u7684\u4f9d\u8d56\u5305\u3002 <pre><code>flutter pub get\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u540e\u7aef\u5730\u5740:</p> </li> <li>\u6253\u5f00 <code>lib/config/env.dart</code> \u6587\u4ef6\u3002</li> <li>\u4fee\u6539 <code>apiUrl</code> \u9759\u6001\u53d8\u91cf\uff0c\u4f7f\u5176\u6307\u5411\u4f60\u7684\u672c\u5730\u6216\u8fdc\u7a0b\u540e\u7aef\u670d\u52a1\u5668\u5730\u5740\u3002</li> </ol> <pre><code>class Env {\nstatic const String apiUrl = '[http://your-backend-api-url.com/api'](http://your-backend-api-url.com/api');\n}// \u4fee\u6539\u5f15\u53f7\u5185\u7684\u5185\u5bb9\u4e3a\u540e\u7aef API \u5730\u5740\n</code></pre> <ol> <li> <p>\u540e\u7aef\u8bbe\u5907\u6a21\u62df:</p> <ul> <li>\u91cd\u8981\u63d0\u793a: \u5728\u5f00\u53d1\u4e0e\u6d4b\u8bd5\u6d41\u7a0b\u4e2d\uff0c\u524d\u7aef\u5e94\u7528 \u4e0d\u4f1a \u8fde\u63a5\u5230\u771f\u5b9e\u7684\u7269\u7406\u667a\u80fd\u5bb6\u5c45\u8bbe\u5907\u3002</li> <li>\u540e\u7aef\u56e2\u961f\u63d0\u4f9b\u4e86\u4e00\u4e2a \u8bbe\u5907\u6a21\u62df\u5668\u670d\u52a1\uff0c\u5b83\u4f1a\u6a21\u62df\u771f\u5b9e\u8bbe\u5907\u7684API\u884c\u4e3a\u3001\u72b6\u6001\u53d8\u5316\u548c\u5fc3\u8df3\u3002\u5f00\u53d1\u524d\u7aef\u65f6\uff0c\u8bf7\u786e\u4fdd <code>lib/config/env.dart</code> \u4e2d\u914d\u7f6e\u7684 <code>apiUrl</code> \u6307\u5411\u7684\u662f\u8fd9\u4e2a\u6a21\u62df\u5668\u670d\u52a1\u7684\u5730\u5740\u3002\u8fd9\u4f7f\u5f97\u524d\u7aef\u5f00\u53d1\u8005\u53ef\u4ee5\u72ec\u7acb\u4e8e\u786c\u4ef6\u8fdb\u884c\u7edd\u5927\u90e8\u5206\u7684\u529f\u80fd\u5f00\u53d1\u548c\u8c03\u8bd5\u3002</li> </ul> </li> <li> <p>\u4ee3\u7801\u751f\u6210: \u9879\u76ee\u4e2d\u4f7f\u7528\u4e86 <code>build_runner</code> \u6765\u751f\u6210\u4ee3\u7801\uff08\u4e3b\u8981\u7528\u4e8eBLoC\u6216\u5e8f\u5217\u5316\uff09\u3002\u5982\u679c\u5728\u4fee\u6539\u4e86\u76f8\u5173\u6587\u4ef6\u540e\u9047\u5230\u7f16\u8bd1\u9519\u8bef\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u91cd\u65b0\u751f\u6210\u4ee3\u7801\uff1a     ```bash flutter pub run build_runner build --delete-conflicting-outputs <pre><code>1. **\u8fd0\u884c\u4e0e\u6784\u5efa\u6a21\u5f0f**:\n   - **\u5f00\u53d1\u8c03\u8bd5 (Debug Mode)**: \u8fd9\u662f\u6700\u5e38\u7528\u7684\u6a21\u5f0f\uff0c\u652f\u6301\u70ed\u91cd\u8f7d(Hot Reload)\uff0c\u4fbf\u4e8e\u5feb\u901f\u5f00\u53d1\u548c UI \u8c03\u8bd5\u3002\n     ```bash\n\nflutter run\n</code></pre></p> <ul> <li>\u6027\u80fd\u5206\u6790 (Profile Mode): \u6b64\u6a21\u5f0f\u4e0b\u7f16\u8bd1\u7684\u5e94\u7528\u63a5\u8fd1\u53d1\u5e03\u7248\u6027\u80fd\uff0c\u4f46\u4fdd\u7559\u4e86\u8db3\u591f\u7684\u8c03\u8bd5\u4fe1\u606f\u4ee5\u4f9b\u6027\u80fd\u5206\u6790\uff08\u5982\u4f7f\u7528DevTools\uff09\u3002\u7528\u4e8e\u68c0\u67e5\u548c\u4f18\u5316\u5e94\u7528\u7684\u6027\u80fd\u74f6\u9888\u3002 <pre><code>flutter run --profile\n</code></pre></li> </ul> </li> <li> <p>\u53d1\u5e03\u6253\u5305 (Release Mode): \u7528\u4e8e\u751f\u6210\u6700\u7ec8\u63d0\u4ea4\u5230\u5e94\u7528\u5546\u5e97\u6216\u90e8\u7f72\u7684\u6b63\u5f0f\u7248\u672c\u3002\u6b64\u6a21\u5f0f\u4e0b\u4f1a\u8fdb\u884c\u6700\u5927\u7a0b\u5ea6\u7684\u4f18\u5316\uff0c\u5e94\u7528\u4f53\u79ef\u6700\u5c0f\uff0c\u6027\u80fd\u6700\u597d\u3002</p> </li> </ol> <p>\u4ee5 Android \u4e3a\u4f8b\uff0c\u6784\u5efa\u4e00\u4e2a release APK</p> <pre><code>flutter build apk --release\n\n# \u4ee5 Web \u4e3a\u4f8b\uff0c\u6784\u5efa release \u7248\u672c\u7684 web \u5e94\u7528\n\nflutter build web --release\n</code></pre>"},{"location":"design/frontend/#_5","title":"\u7ed3\u8bed","text":"<p>\u672c\u667a\u80fd\u5bb6\u5c45\u524d\u7aef\u5e94\u7528\u662f\u4e00\u4e2a\u57fa\u4e8e Flutter \u548c BLoC \u67b6\u6784\u7684\u3001\u529f\u80fd\u5168\u9762\u7684\u8de8\u5e73\u53f0\u9879\u76ee\u3002\u5b83\u901a\u8fc7\u6e05\u6670\u7684\u5206\u5c42\u548c\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u6210\u529f\u5730\u5c06\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\u3001UI\u5c55\u793a\u548c\u6570\u636e\u8bf7\u6c42\u5206\u79bb\u5f00\u6765\uff0c\u5b9e\u73b0\u4e86\u9ad8\u5ea6\u7684\u53ef\u7ef4\u62a4\u6027\u3001\u53ef\u6d4b\u8bd5\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002</p> <p>\u9879\u76ee\u6838\u5fc3\u4f18\u52bf:</p> <ul> <li> <p>\u5065\u58ee\u7684\u67b6\u6784: \u4ee5BLoC\u4e3a\u6838\u5fc3\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u4fdd\u8bc1\u4e86\u5355\u5411\u6570\u636e\u6d41\u548c\u53ef\u9884\u6d4b\u7684\u72b6\u6001\u53d8\u5316\u3002</p> </li> <li> <p>\u6e05\u6670\u7684\u804c\u8d23\u5206\u79bb: <code>pages</code> (UI), <code>bloc</code> (\u4e1a\u52a1\u903b\u8f91), <code>api</code> (\u6570\u636e\u83b7\u53d6) \u5404\u53f8\u5176\u804c\uff0c\u4ee3\u7801\u7ed3\u6784\u4e00\u76ee\u4e86\u7136\u3002</p> </li> <li> <p>\u5b8c\u5584\u7684\u7ba1\u7406\u529f\u80fd: \u63d0\u4f9b\u4e86\u4e00\u5957\u7cbe\u7ec6\u5316\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\uff0c\u652f\u6301\u5bf9\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u8bbe\u5907\u3001\u8bbe\u5907\u7ec4\u53ca\u5176\u6743\u9650\u7684\u5b8c\u6574\u64cd\u4f5c\u3002</p> </li> <li> <p>\u4f18\u96c5\u7684API\u5c01\u88c5: <code>ApiClient</code> \u901a\u8fc7\u62e6\u622a\u5668\u81ea\u52a8\u5904\u7406\u8ba4\u8bc1\uff0c\u6781\u5927\u7b80\u5316\u4e86\u4e0a\u5c42\u8c03\u7528\u3002</p> </li> </ul> <p>\u672a\u6765\u53ef\u63a2\u7d22\u7684\u65b9\u5411:</p> <p>\u4ee3\u7801\u4e2d\u7684 <code>TODO</code> \u6ce8\u91ca\u548c\u73b0\u6709\u67b6\u6784\u5df2\u7ecf\u8bf4\u660e\uff0c\u672a\u6765\u53ef\u4ee5\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u8fdb\u884c\u8fed\u4ee3\u548c\u4f18\u5316\uff1a</p> <ol> <li> <p>\u5b9e\u73b0Refresh Token\u673a\u5236: \u5728 <code>ApiClient</code> \u4e2d\u589e\u52a0\u5237\u65b0Token\u7684\u903b\u8f91\uff0c\u63d0\u5347\u7528\u6237\u767b\u5f55\u72b6\u6001\u7684\u6301\u4e45\u6027\u548c\u5b89\u5168\u6027\u3002</p> </li> <li> <p>\u62c6\u5206\u7ba1\u7406\u5458API: \u8003\u8651\u5c06\u7ba1\u7406\u5458\u76f8\u5173\u7684API\u8c03\u7528\u4ece <code>ApiClient</code> \u4e2d\u5206\u79bb\u5230\u4e00\u4e2a\u72ec\u7acb\u7684 <code>AdminApiClient</code>\uff0c\u8fdb\u4e00\u6b65\u660e\u786e\u804c\u8d23\u3002</p> </li> <li> <p>\u4f18\u5316\u957f\u5217\u8868\u6027\u80fd: \u5bf9\u4e8e\u7528\u6237\u3001\u8bbe\u5907\u7b49\u53ef\u80fd\u53d8\u5f97\u5f88\u957f\u7684\u5217\u8868\uff0c\u5f15\u5165\u540e\u7aef\u5206\u9875\u673a\u5236\uff0c\u800c\u975e\u4e00\u6b21\u6027\u52a0\u8f7d\u6240\u6709\u6570\u636e\u3002</p> </li> <li> <p>\u5b8c\u5584\u8bbe\u5907\u63a7\u5236: \u57fa\u4e8e\u5df2\u6709\u7684 <code>controlDevice</code> \u63a5\u53e3\uff0c\u4e3a\u4e0d\u540c\u7c7b\u578b\u7684\u8bbe\u5907\u5b9e\u73b0\u66f4\u4e30\u5bcc\u7684\u5b9e\u65f6\u63a7\u5236\u9762\u677f\u3002</p> </li> </ol> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u8be5\u9879\u76ee\u4e3a\u540e\u7eed\u7684\u529f\u80fd\u8fed\u4ee3\u548c\u957f\u671f\u7ef4\u62a4\u6253\u4e0b\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u3002</p>"},{"location":"design/permission/","title":"\u6743\u9650\u8bbe\u8ba1","text":""},{"location":"design/permission/#_1","title":"\u6743\u9650\u5206\u7ea7","text":"<p>\u6743\u9650\u5206\u4e3a 6 \u7ea7\uff0c\u9ad8\u7ea7\u522b\u7684\u6743\u9650\u53ef\u4ee5\u4f7f\u7528\u4f4e\u7ea7\u522b\u7684\u6240\u6709\u529f\u80fd</p> <ul> <li> <p>\u3010\u4e0d\u53ef\u89c1\u3011</p> </li> <li> <p>\u6700\u4f4e\u7684\u6743\u9650\uff0c\u8bbe\u5907\u5217\u8868\u4e2d\u770b\u4e0d\u5230\u8be5\u8bbe\u5907</p> </li> <li>\u4e0d\u80fd\u5bf9\u8bbe\u5907\u505a\u4efb\u4f55\u64cd\u4f5c</li> <li>\u4e0d\u4f1a\u6536\u5230\u8be5\u8bbe\u5907\u7684\u4efb\u4f55\u6d88\u606f</li> <li> <p>\u3010\u53ef\u89c1\u3011</p> </li> <li> <p>\u53ef\u4ee5\u67e5\u770b\u8bbe\u5907\u6982\u89c8</p> </li> <li>\u4e0d\u80fd\u4f7f\u7528\u8bbe\u5907</li> <li>\u63a5\u6536\u8bbe\u5907\u7684\u6dfb\u52a0\u3001\u79fb\u9664\u3001\u6545\u969c\u6d88\u606f</li> <li> <p>\u3010\u53ef\u4f7f\u7528\u3011</p> </li> <li> <p>\u53ef\u4ee5\u7b80\u5355\u4f7f\u7528\u8bbe\u5907</p> </li> <li>\u4e0d\u80fd\u6267\u884c\u654f\u611f\u64cd\u4f5c\uff08\u6bd4\u5982\u8c03\u6574\u8def\u7531\u5668\u7f51\u7edc\u914d\u7f6e\uff0c\u6253\u5f00\u5bb6\u7528\u4fdd\u9669\u7bb1\u3001\u4f7f\u7528\u8fd0\u884c\u4e2d\u7684\u6d17\u8863\u673a\uff09</li> <li>\u5173\u4e8e\u654f\u611f\u6307\u4ee4\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u89e3\u51b3</li> <li> <p>\u3010\u53ef\u914d\u7f6e\u3011</p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u6240\u6709\u529f\u80fd</p> </li> <li> <p>\u3010\u53ef\u76d1\u89c6\u3011</p> </li> <li> <p>\u53ef\u4ee5\u67e5\u770b\u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u4f7f\u7528\u8bb0\u5f55\uff0c\u8bbe\u5907\u8fd0\u884c\u65e5\u5fd7\u7b49</p> </li> <li> <p>\u3010\u53ef\u7ba1\u7406\u3011</p> </li> <li> <p>\u6700\u9ad8\u6743\u9650</p> </li> <li>\u7ba1\u7406\u5458\u9ed8\u8ba4\u6301\u6709</li> <li>\u62e5\u6709\u8be5\u6743\u9650\u5141\u8bb8\u66f4\u6539\u5176\u4ed6\u7528\u6237\u5bf9\u4e8e\u8be5\u8bbe\u5907\u7684\u6743\u9650</li> </ul>"},{"location":"design/permission/#_2","title":"\u7528\u6237\u5206\u7ec4\u4e0e\u8bbe\u5907\u5206\u7ec4","text":"<ul> <li>\u6bcf\u4e2a\u7528\u6237\u90fd\u5c5e\u4e8e\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u7ec4\uff0c\u5f53\u7528\u6237\u6ce8\u518c\u65f6\uff0c\u9ed8\u8ba4\u5c5e\u4e8e public \u7528\u6237\u7ec4\uff0c\u8be5\u7528\u6237\u7ec4\u7684\u6240\u6709\u8bbe\u5907\u6743\u9650\u5747\u9ed8\u8ba4\u4e3a\u4e0d\u53ef\u89c1</li> <li>\u6bcf\u4e2a\u8bbe\u5907\u90fd\u5c5e\u4e8e\u81f3\u5c11\u4e00\u4e2a\u8bbe\u5907\u7ec4\uff0c\u5f53\u8bbe\u5907\u88ab\u6dfb\u52a0\u65f6\uff0c\u9ed8\u8ba4\u5c5e\u4e8e public \u8bbe\u5907\u7ec4\uff0c\u8be5\u8bbe\u5907\u7ec4\u7684\u6240\u6709\u8bbe\u5907\u6743\u9650\u5747\u9ed8\u8ba4\u4e3a\u4e0d\u53ef\u89c1</li> <li>\u5f53\u7528\u6237\u672c\u8eab\u6301\u6709\u67d0\u4e2a\u6743\u9650\uff0c\u6216\u8005\u6240\u5728\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u7ec4\u6301\u6709\u67d0\u4e00\u6743\u9650\u65f6\uff0c\u7528\u6237\u90fd\u89c6\u4f5c\u6301\u6709\u67d0\u4e00\u6743\u9650</li> <li>\u82e5\u7528\u6237\u88ab\u89c6\u4f5c\u6301\u6709\u67d0\u4e00\u6743\u9650\uff0c\u6216\u7528\u6237\u88ab\u89c6\u4f5c\u6301\u6709\u6240\u5728\u8bbe\u5907\u7ec4\u67d0\u4e00\u6743\u9650\u65f6\uff0c\u7528\u6237\u88ab\u89c6\u4f5c\u6301\u6709\u67d0\u4e00\u6743\u9650</li> <li>\u7ba1\u7406\u5458\u53ef\u4fee\u6539\u7528\u6237\u7ec4\u7684\u6743\u9650\uff0c\u53ef\u4fee\u6539\u7528\u6237\u6240\u5728\u7528\u6237\u7ec4</li> </ul>"},{"location":"dev/","title":"\u5f00\u53d1\u6982\u89c8","text":""},{"location":"dev/#_1","title":"\u516c\u7528\u73af\u5883\u4ecb\u7ecd","text":"<p>\u6211\u4eec\u4f7f\u7528\u516c\u7528\u7684\u6821\u5185\u670d\u52a1\u5668\u5b8c\u6210\u9879\u76ee\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\uff1b\u8fd9\u53f0\u673a\u5668\u53ea\u5728\u9700\u8981\u524d\u540e\u7aef\u5bf9\u63a5\u7b49\u60c5\u666f\u4e0b\u4f7f\u7528\uff0c\u6bd4\u5982\u6700\u7ec8\u7684\u5c55\u793a\u73af\u8282\uff0c\u6bd4\u5982\u96c6\u5408\u8c03\u8bd5\uff0c\u65e5\u5e38\u5927\u5bb6\u8fd8\u662f\u5728\u81ea\u5df1\u7684\u7535\u8111\u4e0b\u8fdb\u884c\u4ee3\u7801\u7684\u8c03\u8bd5</p> <ul> <li>\u7cfb\u7edf\uff1aUbuntu</li> <li>\u6821\u56ed\u7f51 IP\uff1a172.18.198.206</li> <li>\u7528\u6237\uff1acpm</li> <li>\u5bc6\u7801\uff1axxxxxxxxx(\u5728\u516c\u5f00\u6587\u6863\u4e0a\u5bc6\u7801\u4e0d\u53ef\u89c1)</li> </ul> <pre><code>ssh cpm@172.18.198.206\n</code></pre>"},{"location":"dev/#_2","title":"\u73af\u5883\u90e8\u7f72\u6d41\u7a0b","text":""},{"location":"dev/#_3","title":"\u6982\u8ff0","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\u7a0b\u5e8f\uff0c\u4fdd\u8bc1\u4efb\u4f55\u4eba\u53ef\u4ee5\u5728\u672c\u5730\u62e5\u6709\u4e00\u81f4\u7684\u73af\u5883\uff0c\u9700\u8981\u786e\u4fdd\u90e8\u7f72\u662f\u8db3\u591f\u660e\u786e\u4e14\u53ef\u8fc1\u79fb\u7684\u3002\u540c\u65f6\u8003\u8651\u5230\u540e\u7eed\u6211\u4eec\u7684\u9879\u76ee\u9700\u8981\u9762\u5411\u771f\u5b9e\u7684\u4f7f\u7528\u8005\uff0c\u8fd9\u540c\u6837\u9700\u8981\u4e00\u4e2a\u660e\u786e\u7b80\u5355\u7684\u90e8\u7f72\u6d41\u7a0b\u3002\u6240\u4ee5\u6709\u5fc5\u8981\u4e13\u95e8\u628a\u73af\u5883\u7684\u90e8\u7f72\u6d41\u7a0b\u6574\u5408\u8d77\u6765\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u5c06\u73af\u5883\u7684\u90e8\u7f72\u5206\u4e3a\u51e0\u4e2a\u6a21\u5757\uff1a\u6570\u636e\u5e93\u3001\u540e\u7aef\u3001\u865a\u62df\u8bbe\u5907\u3001\u524d\u7aef\uff0c\u5177\u4f53\u7684\u90e8\u7f72\u6d41\u7a0b\u9700\u8981\u5404\u4e2a\u5c0f\u7ec4\u7684\u540c\u5b66\u5b8c\u6210\uff0c\u73b0\u5728\u53ea\u6709\u4e00\u4e9b\u7b80\u5355\u7684\u7ea6\u5b9a\u548c\u89c4\u8303\u8bf4\u660e\uff0c\u5982\u679c\u6709\u4efb\u4f55\u5185\u5bb9\u548c\u5b9e\u9645\u73af\u5883\u6709\u504f\u5dee\uff0c\u5927\u5bb6\u76f4\u63a5\u66f4\u6539\u5373\u53ef\u3002</p>"},{"location":"dev/#_4","title":"\u62d3\u6251\u8bf4\u660e","text":"<p>\u9664\u4e86\u7ec8\u7aef\u8bbe\u5907\u5916\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6240\u6709\u670d\u52a1\u90fd\u8fd0\u884c\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u5404\u4e2a\u670d\u52a1\u5360\u7528\u7684\u7aef\u53e3\u5982\u4e0a\u3002\u7ec8\u7aef\u901a\u8fc7\u6821\u56ed\u7f51\u83b7\u53d6\u670d\u52a1\u3002</p>"},{"location":"dev/backend/","title":"\u540e\u7aef\u5f00\u53d1","text":""},{"location":"dev/backend/#_1","title":"\u521b\u5efa","text":"<pre><code>python manage.py makemigrations api\npython manage.py migrate\n</code></pre>"},{"location":"dev/backend/#_2","title":"\u8fd0\u884c","text":"<pre><code>python manage.py createsuperuser ## \u5148\u521b\u5efa\u7ba1\u7406\u5458\npython manage.py runserver\n</code></pre> <p>\u7ba1\u7406\u5458\u9875\u9762\uff1a <code>http://127.0.0.1:8000/admin/</code></p>"},{"location":"dev/backend/#_3","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>python manage.py test api  ## \u53ea\u8fd0\u884c api \u5e94\u7528\u7684\u6d4b\u8bd5\npython manage.py test api.tests.test_auth_views ## \u8fd0\u884c\u7279\u5b9a\u6587\u4ef6\u7684\u6d4b\u8bd5\npython manage.py test api.tests.test_auth_views.AuthTests.test_login_success ## \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\u7528\u4f8b\u7684\u7279\u5b9a\u65b9\u6cd5\npython manage.py test ## \u8fd0\u884c\u9879\u76ee\u4e2d\u6240\u6709\u5e94\u7528\u7684\u6d4b\u8bd5\n</code></pre>"},{"location":"dev/db/","title":"\u6570\u636e\u5e93\u5f00\u53d1","text":"<p>\u8fd9\u91cc\u4f7f\u7528 mysql \u63d0\u4f9b\u6570\u636e\u5e93\u670d\u52a1\uff0c\u4e0b\u9762\u662f\u914d\u7f6e\u8bf4\u660e\uff08\u516c\u7528\u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\u5e93\u5df2\u7ecf\u4e0a\u7ebf\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u66f4\u504f\u7231\u672c\u5730\u7684\u540c\u5b66\u4e5f\u53ef\u4ee5\u6309\u7167\u4e0b\u9762\uff0c\u5728\u672c\u5730\u6784\u5efa\u4e00\u81f4\u7684\u73af\u5883\uff09</p>"},{"location":"dev/db/#windows","title":"Windows","text":"<p>\u76f4\u63a5\u5728 mysql \u5b98\u7f51\u4e0b\u8f7d\u5373\u53ef\uff0c\u4e0b\u8f7d\u4e4b\u540e\u5b89\u88c5\uff0c\u8fd0\u884c MySQL Configurator\uff0c\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a sysu-aicpm2025\uff08\u548c\u6821\u5185\u670d\u52a1\u5668\u5bc6\u7801\u4e00\u81f4\uff09</p> <p></p> <p>\u7136\u540e\u8fdb\u5165 MySQL Command Line\uff0c\u521b\u5efa\u6570\u636e\u5e93 sysu-aicpm2025</p> <pre><code>CREATE DATABASE `sysu-aicpm2025` DEFAULT CHARACTER SET utf8  COLLATE utf8_general_ci;\n</code></pre>"},{"location":"dev/db/#docker","title":"docker","text":"<pre><code>## \u5b89\u88c5\nsudo docker pull mysql:latest\nsudo docker run -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=xxxxxxxxx(\u5728\u516c\u5f00\u6587\u6863\u4e0a\u5bc6\u7801\u4e0d\u53ef\u89c1) mysql:latest\n## \u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\nsudo docker exec -it mysql bash \necho \"[mysqld] bind-address = 0.0.0.0\" &gt; /etc/mysql/conf.d/mysqld.cnf\nmysql -h localhost -u root mysql -p\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\nexit\nexit\nsudo docker restart mysql\n</code></pre> <p>\u8fde\u63a5\u65b9\u5f0f\uff1a</p> <pre><code>mysql -h 172.18.198.206 -u root mysql -p\n</code></pre> <p>\u521b\u5efa\u6570\u636e\u5e93</p> <pre><code>CREATE DATABASE `sysu-aicpm2025` DEFAULT CHARACTER SET utf8  COLLATE utf8_general_ci;\n</code></pre>"},{"location":"dev/frontend/","title":"\u524d\u7aef\u5f00\u53d1","text":""},{"location":"dev/frontend/#_1","title":"\u5f00\u53d1","text":"<p>\u5f00\u53d1\u65f6\uff0c\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u6307\u5b9a\u540e\u7aef API\uff1a</p> <p>flutter run --dart-define=API_URL=http://172.18.198.206/api/v1</p>"},{"location":"dev/frontend/#mcp-server","title":"MCP server","text":"<p>\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8981\u5c06 mcp_server.py \u653e\u7f6e\u5728\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540c\u4e00\u76ee\u5f55\u4e0b\u3002</p> <p>\u76ee\u524d\u4e0d\u652f\u6301\u79fb\u52a8\u7aef\u5e73\u53f0\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u56e0\u4e3a\u79fb\u52a8\u7aef\u4e0d\u65b9\u4fbf\u8fd0\u884c MCP \u670d\u52a1\u3002</p> <p>\u76ee\u524d\u4ec5\u652f\u6301 Gemini\uff0c\u5e76\u4e14 Gemini \u4e0d\u5141\u8bb8\u4e2d\u56fd\u5927\u9646 ip \u8bbf\u95ee\uff0c\u6240\u4ee5\u76ee\u524d\u9700\u8981 \u201c\u900f\u660e\u4ee3\u7406\u201d\u3001\u201c\u589e\u5f3a\u6a21\u5f0f\u201d \u7b49\u4ee3\u7406\u73af\u5883\u4e0b\u542f\u52a8\u7a0b\u5e8f\u3002</p>"},{"location":"dev/mcp-server/","title":"MCP-server\u5f00\u53d1","text":"<p>https://github.com/sysu-aicpm/mcp-server</p>"},{"location":"dev/mcp-server/#demo","title":"demo","text":""},{"location":"dev/mcp-server/#_1","title":"\u5b89\u88c5\u4f9d\u8d56","text":"<pre><code>pip install fastmcp requests\n</code></pre>"},{"location":"dev/mcp-server/#_2","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"dev/mcp-server/#_3","title":"\u542f\u52a8\u670d\u52a1\u5668","text":"<pre><code>python mcp_server.py --backend http://backend-api-address:8000/api/v1 --token your_auth_token\n</code></pre> <p>your_auth_token \u4ee4\u724c\u9700\u8981\u5728\u901a\u8fc7 <code>POST /auth/login</code> \u767b\u5f55\u5230\u540e\u7aef\u540e\u83b7\u53d6</p> <p>\u53c2\u6570\u8bf4\u660e:</p> <ul> <li><code>--backend</code>: \u540e\u7aef API \u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a <code>http://localhost:8000</code></li> <li><code>--token</code>: \u8ba4\u8bc1\u4ee4\u724c\uff0c\u7528\u4e8e\u8bbf\u95ee\u540e\u7aef API \u7684\u6388\u6743</li> </ul>"},{"location":"dev/mcp-server/#_4","title":"\u5bf9\u8bdd\u6d4b\u8bd5","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 cursor \u6216\u8005 cline(VSCode \u63d2\u4ef6)\u4e0e\u5927\u6a21\u578b\u5bf9\u8bdd\uff0c\u5728\u5176\u4e2d\u8c03\u7528 MCP \u670d\u52a1\u5668\u3002</p> <pre><code>{\n  \"mcpServers\": {\n    \"cpm-smarthome\": {\n      \"disabled\": false,\n      \"timeout\": 60,\n      \"transportType\": \"stdio\",\n      \"command\": \"python\",\n      \"args\": [\n        \"/path/to/mcp_server.py\",\n        \"--token\",\n        \"your_auth_token\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"dev/mcp-server/#_5","title":"\u53ef\u7528\u5de5\u5177","text":"<p>\u670d\u52a1\u5668\u63d0\u4f9b\u4ee5\u4e0b\u5de5\u5177\u4f9b\u5927\u6a21\u578b\u4f7f\u7528:</p> <ol> <li> <p><code>get_config()</code>: \u83b7\u53d6\u5f53\u524d\u914d\u7f6e\u4fe1\u606f</p> </li> <li> <p>\u8fd4\u56de\u540e\u7aef API \u5730\u5740\u548c\u8ba4\u8bc1\u4ee4\u724c\u914d\u7f6e\u72b6\u6001</p> </li> <li>\u6ce8\u610f\uff1a\u8ba4\u8bc1\u4ee4\u724c\u4e0d\u4f1a\u8fd4\u56de\u660e\u6587</li> <li> <p><code>get_device_overview()</code>: \u83b7\u53d6\u6240\u6709\u8bbe\u5907\u7684\u6982\u89c8\u4fe1\u606f</p> </li> <li> <p>\u8fd4\u56de\u7cfb\u7edf\u4e2d\u6240\u6709\u8bbe\u5907\u7684\u57fa\u672c\u4fe1\u606f\u5217\u8868</p> </li> <li>\u5305\u62ec\u8bbe\u5907 ID\u3001\u540d\u79f0\u3001\u72b6\u6001\u7b49\u4fe1\u606f</li> <li> <p><code>get_device_detail(device_id)</code>: \u83b7\u53d6\u7279\u5b9a\u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f</p> </li> <li> <p>\u8fd4\u56de\u6307\u5b9a\u8bbe\u5907\u7684\u8be6\u7ec6\u72b6\u6001\u4fe1\u606f</p> </li> <li>\u5305\u62ec\u8bbe\u5907\u72b6\u6001\u3001\u529f\u8017\u3001\u8fd0\u884c\u65f6\u95f4\u3001\u65e5\u5fd7\u7b49</li> <li> <p><code>control_device(device_id, action, parameters)</code>: \u63a7\u5236\u7279\u5b9a\u8bbe\u5907\u6267\u884c\u64cd\u4f5c</p> </li> <li> <p>\u7528\u4e8e\u5411\u6307\u5b9a\u8bbe\u5907\u53d1\u9001\u63a7\u5236\u547d\u4ee4</p> </li> <li>\u5177\u4f53\u53c2\u6570\u8bf7\u53c2\u8003\u4e0a\u65b9\u8bbe\u5907\u7c7b\u578b\u8bf4\u660e</li> <li> <p><code>get_device_type_docs(device_type)</code>: \u83b7\u53d6\u8bbe\u5907\u7c7b\u578b\u7684\u63a7\u5236\u6587\u6863</p> </li> <li> <p>\u4e0d\u6307\u5b9a\u8bbe\u5907\u7c7b\u578b\u65f6\u8fd4\u56de\u6240\u6709\u8bbe\u5907\u7c7b\u578b\u7684\u6982\u89c8</p> </li> <li>\u6307\u5b9a\u8bbe\u5907\u7c7b\u578b\u65f6\u8fd4\u56de\u8be5\u7c7b\u578b\u7684\u8be6\u7ec6\u63a7\u5236\u6587\u6863</li> </ol>"},{"location":"dev/mcp-server/#api","title":"\u540e\u7aef API \u63a5\u53e3","text":"<p>\u672c\u670d\u52a1\u5668\u8fde\u63a5\u5230\u4ee5\u4e0b\u540e\u7aef API \u63a5\u53e3:</p> <ol> <li>\u63a7\u5236\u8bbe\u5907: <code>POST /api/v1/devices/{device_id}/control/</code></li> <li>\u67e5\u8be2\u8bbe\u5907\u6982\u8981: <code>GET /api/v1/devices/overview/</code></li> <li>\u67e5\u8be2\u8bbe\u5907\u8be6\u60c5: <code>GET /api/v1/devices/{device_id}/detail/</code></li> </ol>"},{"location":"test/api/","title":"\u63a5\u53e3\u6d4b\u8bd5","text":"<p>\u9488\u5bf9\u540e\u7aef\u63a5\u53e3\u6587\u6863\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u4f7f\u7528\u4e13\u4e1a\u8f6f\u4ef6(\u5982 postman\u3001Apifox\u3001\u5404\u79cd IDE \u63d2\u4ef6\u7b49)\u8fdb\u884c\u63a5\u53e3\u6d4b\u8bd5</p>"},{"location":"test/api/#_1","title":"\u901a\u7528","text":""},{"location":"test/api/#url","title":"\u57fa\u7840 URL\uff1a","text":"<p>\u672c\u5730\u6d4b\u8bd5 <code>http://localhost:****/api/v1</code></p> <p>\u90e8\u7f72\u6d4b\u8bd5 <code>http://172.18.198.206:8080/api/v1</code></p>"},{"location":"test/api/#bearer","title":"\u8bf7\u6c42\u5934(\u5e26 Bearer \u9a8c\u8bc1\u4fe1\u606f)\uff1a","text":"<pre><code>{\n  \"Content-Type\": \"application/json\",\n  \"Authorization\": \"Bearer &lt;token&gt;\"  // \u9700\u8981\u8ba4\u8bc1\u7684\u63a5\u53e3\n}\n</code></pre>"},{"location":"test/api/#_2","title":"\u54cd\u5e94\u683c\u5f0f","text":""},{"location":"test/api/#_3","title":"\u6210\u529f\u54cd\u5e94","text":"<pre><code>{\n  \"success\": true,\n  \"message\": \"\u64cd\u4f5c\u6210\u529f\",\n  \"data\": {\n    // \u5177\u4f53\u6570\u636e\u5185\u5bb9\n  }\n}\n</code></pre> <p>\u540e\u9762\u82e5\u7ed9\u51fa\u4e86\u6210\u529f\u54cd\u5e94\uff0c\u90fd\u662f\u53ea\u5305\u542b <code>data</code> \u6570\u636e\u9879\u7684\u5185\u5bb9\u3002\u82e5\u6ca1\u7ed9\u51fa\uff0c\u5219\u4ee3\u8868\u8be5\u63a5\u53e3\u6210\u529f\u54cd\u5e94\u6ca1\u6709 <code>data</code> \u6570\u636e\u9879\u3002</p>"},{"location":"test/api/#_4","title":"\u9519\u8bef\u54cd\u5e94","text":"<pre><code>{\n  \"success\": false,\n  \"message\": \"\u9519\u8bef\u63cf\u8ff0\",\n  \"error_code\": \"ERROR_CODE\",\n  \"details\": {\n    // \u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\uff08\u53ef\u9009\uff09\n  }\n}\n</code></pre>"},{"location":"test/api/#_5","title":"\u6743\u9650\u7ea7\u522b\u5b9a\u4e49\uff08\u6682\u65f6\uff09","text":"<ul> <li><code>none</code> - \u4e0d\u53ef\u89c1</li> <li><code>visible</code> - \u53ef\u89c1</li> <li><code>usable</code> - \u53ef\u4f7f\u7528</li> <li><code>configurable</code> - \u53ef\u914d\u7f6e</li> <li><code>monitorable</code> - \u53ef\u76d1\u89c6</li> <li><code>manageable</code> - \u53ef\u7ba1\u7406</li> </ul>"},{"location":"test/api/#_6","title":"\u8d26\u6237","text":""},{"location":"test/api/#_7","title":"\u767b\u5f55 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a <code>POST /auth/login</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aemail\u3001password</li> <li>\u8f93\u51fa\u53c2\u6570\uff1atoken</li> <li>\u6ce8\u91ca\uff1a\u4f20\u5165\u53c2\u6570\u8d26\u6237\u548c\u5bc6\u7801\u4e4b\u540e\u83b7\u5f97 token\uff0c\u7528\u4f5c\u901a\u884c\u8bc1\uff0c\u540e\u7eed\u8bf7\u6c42\u65f6\u9700\u9644\u4e0a token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"refresh\": \"......\",  // refresh_token\n  \"access\": \"......\"\n}\n</code></pre> <ul> <li>\u767b\u5f55\u6210\u529f (\u4e0d\u9700\u8981 username)</li> </ul> <ul> <li>\u90ae\u7bb1\u4e0d\u5b58\u5728</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u627e\u4e0d\u5230\u6307\u5b9a\u51ed\u636e\u5bf9\u5e94\u7684\u6709\u6548\u7528\u6237\",\n    \"error_code\": \"no_active_account\"\n}\n</code></pre> <ul> <li>\u5bc6\u7801\u9519\u8bef</li> </ul> <p>\u540c\u4e0a</p>"},{"location":"test/api/#_8","title":"\u6ce8\u518c \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/register</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aemail\u3001password</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u6ce8\u518c\u4e4b\u540e\uff0c\u540e\u7aef\u9700\u8981\u8fd4\u56de\u6807\u8bc6\uff0c\u6307\u793a\u662f\u5426\u6ce8\u518c\u6210\u529f\uff1b\u6b64\u5916\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u9644\u5e26\u5931\u8d25\u539f\u56e0\uff0c\u4f8b\u5982\u8d26\u6237\u5df2\u88ab\u6ce8\u518c\u3001email \u65e0\u6548\u7b49</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"email\": \"test_user_001@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff08\u6d4b\u8bd5\uff09:</li> </ul> <pre><code>{\n  \"success\": true,\n  \"message\": \"\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u767b\u5f55\u3002\"\n}\n</code></pre> <ul> <li>\u6ce8\u518c\u6210\u529f</li> </ul> <ul> <li>\u540d\u79f0\u5360\u7528 (400)</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u6ce8\u518c\u5931\u8d25: \u5df2\u5b58\u5728\u4e00\u4f4d\u4f7f\u7528\u8be5\u540d\u5b57\u7684\u7528\u6237\u3002\",\n    \"error_code\": \"VALIDATION_ERROR\",\n    \"details\": {\n        \"username\": [\n            \"\u5df2\u5b58\u5728\u4e00\u4f4d\u4f7f\u7528\u8be5\u540d\u5b57\u7684\u7528\u6237\u3002\"\n        ]\n    }\n}\n</code></pre> <ul> <li>\u90ae\u7bb1\u5360\u7528 (400)</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u6ce8\u518c\u5931\u8d25: \u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u3002\",\n    \"error_code\": \"VALIDATION_ERROR\",\n    \"details\": {\n        \"email\": [\n            \"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u3002\"\n        ]\n    }\n}\n</code></pre> <ul> <li>\u540d\u79f0\u548c\u90ae\u7bb1\u540c\u65f6\u5360\u7528</li> <li>Message \u4ec5\u4f20\u544a\u90ae\u7bb1\u88ab\u6ce8\u518c</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u6ce8\u518c\u5931\u8d25: \u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u3002\",\n    \"error_code\": \"VALIDATION_ERROR\",\n    \"details\": {\n        \"email\": [\n            \"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u3002\"\n        ],\n        \"username\": [\n            \"\u5df2\u5b58\u5728\u4e00\u4f4d\u4f7f\u7528\u8be5\u540d\u5b57\u7684\u7528\u6237\u3002\"\n        ]\n    }\n}\n</code></pre> <ul> <li>\u5bc6\u7801\u6ca1\u6709\u7ea7\u522b\u8981\u6c42\uff08\u5982 \" 1 \" \u53ef\u4f5c\u4e3a\u5bc6\u7801\uff09</li> </ul>"},{"location":"test/api/#_9","title":"\u66f4\u6539\uff08\u6682\u672a\u5b9e\u73b0\uff09","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo_dict</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u66f4\u6539\u4e2a\u4eba\u4fe1\u606f\uff0c\u8f93\u5165\u4e00\u4e2a\u5b57\u5178\uff0c\u5b57\u5178\u7684 key \u5bf9\u5e94\u9700\u8981\u4fee\u6539\u7684\u5bf9\u8c61\uff0c\u4f8b\u5982\u5462\u79f0\u3001\u90ae\u7bb1\u3001\u5bc6\u7801\u7b49\uff0cvalue \u5bf9\u5e94\u65b0\u7684\u503c</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8bf7\u6c42\u4f53</li> </ul> <pre><code>{\n}\n</code></pre>"},{"location":"test/api/#_10","title":"\u5237\u65b0\u4ee4\u724c \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/``re``fresh</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1arefresh_token</li> <li>\u63a5\u53e3\u9519\u8bef\u5df2\u4fee\u590d\uff01</li> </ul>"},{"location":"test/api/#_11","title":"\u9519\u8bef~~\u603b\u7ed3\uff1a~~","text":"<p>~~\u6839\u636e\u6d4b\u8bd5\u60c5\u51b5\uff0c\u8bf7\u6c42\u4f53\u4e0d\u53ef\u4e3a\u7a7a\uff1b\u540c\u65f6\u6839\u636e\u6d4b\u8bd5\u7a7a\u8bf7\u6c42\u4f53\u7684\u8fd4\u56de\u4f53\u63d0\u793a\uff1a\"refresh\"\u5fc5\u9700\u3002\u8fdb\u4e00\u6b65\u6d4b\u8bd5\u53d1\u73b0\uff0c\u8865\u8db3\"refresh\"\u53c2\u6570\u540e\uff0c\u62a5\u9519\u5982\u53f3~~</p> <ul> <li>\u6d4b\u8bd5\u6210\u529f\uff0c\u9700\u8981\u767b\u9646\u65f6\u8fd4\u56de\u4f53\u7684 refresh \u5b57\u6bb5\uff1a</li> </ul> <p></p>"},{"location":"test/api/#_12","title":"\u83b7\u53d6\u5168\u90e8\u7528\u6237 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /auth/all</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\u83b7\u53d6\u5168\u90e8\u7528\u6237\u4fe1\u606f</li> <li>\u6d4b\u8bd5\u5728\u672c\u5730\u8fdb\u884c</li> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <ul> <li>\u7ba1\u7406\u5458\u4ee4\u724c\u65e0\u6548</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u6b64\u4ee4\u724c\u5bf9\u4efb\u4f55\u7c7b\u578b\u7684\u4ee4\u724c\u65e0\u6548\",\n    \"error_code\": \"token_not_valid\",\n    \"details\": {\n        \"detail\": \"\u6b64\u4ee4\u724c\u5bf9\u4efb\u4f55\u7c7b\u578b\u7684\u4ee4\u724c\u65e0\u6548\",\n        \"code\": \"token_not_valid\",\n        \"messages\": [\n            {\n                \"token_class\": \"AccessToken\",\n                \"token_type\": \"access\",\n                \"message\": \"Token is invalid\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"test/api/#_13","title":"\u9a8c\u8bc1\u4ee4\u724c\u6709\u6548 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /auth/verify</code></li> <li>\u8f93\u5165\u53c2\u6570 user_token</li> <li>\u6ce8\u91ca\uff1a\u8fd9\u4e2a token \u4e0d\u662f\u653e\u5728 Authorization \u5934\u4e2d\uff0c\u800c\u662f\u5728\u8bf7\u6c42\u4f53\u4e2d\u4ee5 JSON \u683c\u5f0f\u53d1\u9001</li> </ul> <pre><code>{\n    \"token\":\"&lt;user token&gt;\"\n}\n</code></pre> <ul> <li>\u4ee4\u724c\u6709\u6548</li> </ul> <ul> <li>\u4ee4\u724c\u65e0\u6548</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"Token is invalid\",\n    \"error_code\": \"token_not_valid\",\n    \"details\": {\n        \"detail\": \"Token is invalid\",\n        \"code\": \"token_not_valid\"\n    }\n}\n</code></pre> <ul> <li>\u8bf7\u6c42\u4f53\u8fdd\u89c4</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u9879\u3002\",\n    \"error_code\": \"GENERIC_ERROR\",\n    \"details\": {\n        \"token\": [\n            \"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u9879\u3002\"\n        ]\n    }\n}\n</code></pre>"},{"location":"test/api/#_14","title":"\u6743\u9650","text":""},{"location":"test/api/#_15","title":"\u5bf9\u8bbe\u5907","text":""},{"location":"test/api/#_16","title":"\u67e5\u770b\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\uff1a\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>[\n  {\n    \"id\":6,\n    \"type\":\"device\",  // \u8bbe\u5907\u90fd\u662f\u56fa\u5b9a\u503c\n    \"name\":\"\u5ba2\u5385\u7a7a\u8c03\",\n    \"permission\":\"configurable\"\n  },\n  ......\n]\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <ul> <li>\u5f53\u672a\u7ed9\u4e00\u4e2a\u7528\u6237\u8d4b\u4e88\u4efb\u4f55\u6743\u9650\u65f6\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237 irescp_lqd89@outlook.com \u7684\u8bbe\u5907\u6743\u9650\u83b7\u53d6\u6210\u529f\",\n    \"data\": []\n}\n</code></pre> <p>\u5e94\u8be5\u8bbe\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u6743\u9650\u66f4\u7b26\u5408\u73b0\u5b9e\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u7f3a\u9677\u53ef\u63a5\u53d7\uff0c\u53ef\u5ffd\u7565\u3002</p> <p>\u524d\u7aef\u8ba4\u4e3a\u9ed8\u8ba4\u6743\u9650\u4e3a none \u7ea7\u522b\u5904\u7406</p>"},{"location":"test/api/#_17","title":"\u4fee\u6539\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u9996\u6b21\u670d\u52a1\u4e00\u4e2a\u7528\u6237\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650\u5df2\u521b\u5efa\u3002\"\n}\n</code></pre> <ul> <li>\u518d\u6b21\u5bf9\u8be5\u7528\u6237\u53d8\u66f4\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b:</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650\u5df2\u66f4\u65b0\u3002\"\n}\n</code></pre> <ul> <li>user_id \u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"No User matches the given query.\",\n    \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre>"},{"location":"test/api/#_18","title":"\u67e5\u770b\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions/user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u7ec4\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>{}\n</code></pre> <ul> <li>\u672a\u8bbe\u7f6e\u6743\u9650\u524d\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u7ec4 xxx \u7684\u6743\u9650\u83b7\u53d6\u6210\u529f\",\n    \"data\": []\n}\n</code></pre> <ul> <li>\u8bbe\u7f6e\u6743\u9650\u540e\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u7ec4 \u65b0\u7528\u6237\u7ec4\u540d \u7684\u6743\u9650\u83b7\u53d6\u6210\u529f\",\n    \"data\": [\n        {\n            \"id\": 3,\n            \"type\": \"device\",\n            \"name\": \"\u51b0\u7bb12\",\n            \"permission\": \"configurable\"\n        },\n        {\n            \"id\": 4,\n            \"type\": \"device\",\n            \"name\": \"\u7a7a\u8c031\",\n            \"permission\": \"configurable\"\n        }\n\n        ......\n    ]\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_19","title":"\u4fee\u6539\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions/user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u9996\u6b21\u4fee\u6539\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u7ec4\u6743\u9650\u5df2\u521b\u5efa\u3002\"\n}\n</code></pre> <ul> <li>\u66f4\u65b0\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u7ec4\u6743\u9650\u5df2\u66f4\u65b0\u3002\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_20","title":"\u5bf9\u8bbe\u5907\u7ec4","text":""},{"location":"test/api/#_21","title":"\u67e5\u770b\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions``/device-``group``s``/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\uff1a\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>[\n  {\n    \"id\":6,\n    \"type\":\"device_type\",  // \u8bbe\u5907\u7ec4\u90fd\u662f\u56fa\u5b9a\u503c\n    \"name\":\"\u5ba2\u5385\u7a7a\u8c03\",\n    \"permission\":\"configurable\"\n  },\n  ......\n]\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_22","title":"\u4fee\u6539\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions``/device-``group``s``/user/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_group_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_group_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u9996\u6b21\u8d4b\u4e88\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u65f6\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u5df2\u521b\u5efa\u3002\"\n}\n</code></pre> <ul> <li>\u66f4\u65b0\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u5df2\u66f4\u65b0\u3002\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_23","title":"\u67e5\u770b\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /permissions``/device-``group``s``/``user-``group``s``/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u67e5\u770b\u67d0\u7528\u6237\u7ec4\u5bf9\u4e8e\u6240\u6709\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f dict\uff0cdict \u7684 key \u5305\u62ec\u3010\u7c7b\u578b\u3011\uff08\u7528\u4e8e\u6307\u793a\u67d0\u4e2a\u8bbe\u5907\u662f\u771f\u5b9e\u8bbe\u5907\u8fd8\u662f\u8bbe\u5907\u7ec4\uff09\u3001\u3010\u540d\u3011\uff08\u8bbe\u5907\u540d\u6216\u8005\u8bbe\u5907\u7ec4\u540d\uff09\u3001\u3010\u6743\u9650\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237\u7ec4 xxx \u7684\u8bbe\u5907\u7ec4\u6743\u9650\u83b7\u53d6\u6210\u529f\",\n    \"data\": [\n        {\n            \"id\": 6,\n            \"type\": \"device_group\",\n            \"name\": \"xxx\",\n            \"permission\": \"xxx\"\n        },\n        {\n            \"id\": 3,\n            \"type\": \"device_group\",\n            \"name\": \"\u5b8f\u5955\u6cfd\",\n            \"permission\": \"configurable\"\n        },\n\n        ......\n    ]\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_24","title":"\u4fee\u6539\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /permissions``/device-``group``s``/``user-``group``s``/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_group_id\u3001target_permission</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u8bbe\u7f6e\u67d0\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u7684\u6743\u9650\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_group_id\": 6,\n  \"permission_level\": \"configurable\"\n}\n</code></pre> <ul> <li>\u9996\u6b21\u8d4b\u4e88\u548c\u518d\u6b21\u66f4\u65b0\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5747\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n  \"success\": true,\n  \"message\": \"\u7528\u6237\u7ec4\u5bf9\u8bbe\u5907\u7ec4\u7684\u6743\u9650\u5df2\u66f4\u65b0\u3002\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_25","title":"\u7528\u6237\u7ec4","text":""},{"location":"test/api/#_26","title":"\u521b\u5efa\u7528\u6237\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /user-groups</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u521b\u5efa\u7ec4\uff0c\u8fd4\u56de\u521b\u5efa\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u65b0\u7528\u6237\u7ec4\",\n  \"description\": \"\u7528\u6237\u7ec4\u63cf\u8ff0\"\n}\n</code></pre> <ul> <li>\u521b\u5efa\u6210\u529f\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"id\": 1,\n    \"name\": \"\u65b0\u7528\u6237\u7ec4\",\n    \"description\": \"\u7528\u6237\u7ec4\u63cf\u8ff0\",\n    \"members\": [],\n    \"members_count\": 0\n}\n</code></pre> <ul> <li>\u7528\u6237\u7ec4\u540d\u5df2\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u5177\u6709 name \u7684 user group \u5df2\u5b58\u5728\u3002\",\n    \"error_code\": \"GENERIC_ERROR\",\n    \"details\": {\n        \"name\": [\n            \"\u5177\u6709 name \u7684 user group \u5df2\u5b58\u5728\u3002\"\n        ]\n    }\n}\n</code></pre>"},{"location":"test/api/#_27","title":"\u5220\u9664\u7528\u6237\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u5220\u9664\u7528\u6237\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e\u3002</p> </li> <li>\u9700\u8981\u5220\u9664\u4e0e\u4e4b\u76f8\u5173\u7684\u6240\u6709\u7528\u6237\u4ee5\u53ca\u4e0e\u4e4b\u76f8\u5173\u7684\u8bbe\u5907\u7ec4\u624d\u80fd\u6b63\u5e38\u6267\u884c\uff0c\u5426\u5219\u5931\u8d25\u3002</li> <li>\uff08\u53ef\u9009\u9700\u6c42\uff0c\u672a\u5b9e\u73b0\uff09\u4e0d\u5141\u8bb8\u5220\u9664\u7279\u5b9a\u7528\u6237\u7ec4</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a\uff08\u7a7a\uff09</li> </ul> <pre><code>{}\n</code></pre> <ul> <li>\u8fd4\u56de\u72b6\u6001\u7801 200</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u7528\u6237\u7ec4 0611 \u5df2\u6210\u529f\u5220\u9664\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <p></p>"},{"location":"test/api/#_28","title":"\u4fee\u6539\u7528\u6237\u7ec4\u540d \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /user-groups/{group_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001new_group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u4fee\u6539\u7528\u6237\u7ec4\u540d</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> </ul> <ul> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u65b0\u7528\u6237\u7ec4\u540d\",\n  \"description\": \"\u65b0\u7684\u7528\u6237\u7ec4\u63cf\u8ff0\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"id\": 3,\n    \"name\": \"\u65b0\u7528\u6237\u7ec4\u540d\",\n    \"description\": \"\u65b0\u7684\u7528\u6237\u7ec4\u63cf\u8ff0\",\n    \"members\": [],\n    \"members_count\": 0\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_29","title":"\u52a0\u5165\u7528\u6237\u5230\u5176\u4ed6\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /user-groups/{group_id}/members</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u7528\u6237\u52a0\u5165\u5230\u6307\u5b9a\u7ec4\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"user_id\": 11\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u7528\u6237 XXX \u5df2\u52a0\u5165\u7528\u6237\u7ec4 XXX\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <ul> <li>\u7528\u6237\u7ec4 id \u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"No UserGroup matches the given query.\",\n    \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre>"},{"location":"test/api/#_30","title":"\u4ece\u7ec4\u4e2d\u79fb\u9664\u7528\u6237 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /user``-``groups/{group_id}/members/{user_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001user_email\uff08\u6216\u8005 user_id\uff09\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u7528\u6237\u79fb\u51fa\u6307\u5b9a\u7ec4\uff1b\u5982\u679c\u7528\u6237\u4ece public \u7ec4\u4e2d\u79fb\u9664\uff0c\u5220\u9664\u7528\u6237\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u7528\u6237 test1@test.com \u5df2\u4ece\u7528\u6237\u7ec4 0611 \u79fb\u9664\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <ul> <li>\u82e5\u7528\u6237\u4e0d\u5728\u7528\u6237\u7ec4\u4e2d\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u7528\u6237 wweibq@qq.com \u4e0d\u5728\u7528\u6237\u7ec4 \u65b0\u7528\u6237\u7ec4\u540d \u4e2d\",\n    \"error_code\": \"USER_NOT_IN_GROUP\"\n}\n</code></pre>"},{"location":"test/api/#_31","title":"\u8bbe\u5907\u7ec4","text":""},{"location":"test/api/#_32","title":"\u521b\u5efa\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /device-groups</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_name</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u521b\u5efa\u7ec4\uff0c\u8fd4\u56de\u521b\u5efa\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"name\": \"\u5ba2\u5385\u8bbe\u5907\u7ec4\",   // \u5fc5\u586b\n  \"description\": \"\u5ba2\u5385\u6240\u6709\u667a\u80fd\u8bbe\u5907\"   // \u9009\u586b\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"id\":13,\n  \"name\":\"test1\",\n  \"description\":null,\n  \"devices\":[],\n  \"devices_count\":0\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_33","title":"\u5220\u9664\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /device-groups/{``group``_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u5220\u9664\u8bbe\u5907\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</p> </li> <li>\u9700\u8981\u79fb\u9664\u8bbe\u5907\u7ec4\u5185\u6240\u6709\u8bbe\u5907\uff0c\u6240\u6709\u4e0e\u4e4b\u76f8\u5173\u7684\u7528\u6237\u6743\u9650\u548c\u7528\u6237\u7ec4\u6743\u9650\u540e\u624d\u80fd\u6267\u884c\u6210\u529f\u3002\u5426\u5219\u6267\u884c\u5931\u8d25</li> <li>(\u53ef\u9009\u529f\u80fd\uff0c\u672a\u5b9e\u73b0) \u4e0d\u5141\u8bb8\u5220\u9664\u7279\u5b9a\u8bbe\u5907\u7ec4</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a\uff08\u7a7a\uff09</li> </ul> <pre><code>{}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53:</li> </ul> <pre><code>{\n    \"success\": **true**,\n    \"message\": \"\u8bbe\u5907\u7ec4 D502 \u5df2\u6210\u529f\u5220\u9664\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <p></p>"},{"location":"test/api/#_34","title":"\u67e5\u8be2\u8bbe\u5907\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3: <code>GET /device-groups</code></li> <li>\u8f93\u5165\u53c2\u6570: admin_token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1a</li> <li>\u6ce8\u91ca\uff1a\u7531\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u67e5\u8be2\u6240\u6709\u8bbe\u5907\u7ec4\uff0c\u8fd4\u56de\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u9644\u52a0\u5408\u9002\u7684\u8bf4\u660e</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8fd4\u56de\u4f53</li> </ul> <pre><code>\n</code></pre> <p>{ \"count\": 13, \"next\": null, \"previous\": null, \"results\": [ { \"id\": 1, \"name\": \"crazy\", \"description\": \"crrazzy\", \"devices\": [], \"devices_count\": 0 }, // ... ] }</p> <pre><code>- \u6d4b\u8bd5\u6210\u529f\n\n![](\u667a\u80fd\u5bb6\u5c45\u7cfb\u7edf/\u516c\u5f00\u6587\u6863/\u6d4b\u8bd5\u6587\u6863/static/JfE7b15qPoZfFBxE28OcGBWTnag.png)\n\n\n\n\n\n### \u4fee\u6539\u8bbe\u5907\u7ec4\u540d** \u2705**\n\n- \u63a5\u53e3\uff1a`PUT /device-groups/{group_id}`\n\n- \u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001group_ip\u3001new_group_name\n\n- \u8f93\u51fa\u53c2\u6570\uff1asignal\n\n- \u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u8c03\u7528\uff0c\u7528\u4e8e\u4fee\u6539\u7528\u6237\u7ec4\u540d\n\n- \u8bf7\u6c42\u5934\uff1a\u9700\u8981admin_token\n\n- \u8bf7\u6c42\u4f53\uff1a\n\n```json\n{\n  \"name\": \"\u65b0\u8bbe\u5907\u7ec4\u540d\",  // \u5fc5\u586b\n  \"description\": \"\u65b0\u7684\u8bbe\u5907\u7ec4\u63cf\u8ff0\"  // \u9009\u586b\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n  \"id\": \"1\",\n  \"name\": \"\u65b0\u8bbe\u5907\u7ec4\u540d\"\n  \"description\": \"\u65b0\u7684\u8bbe\u5907\u7ec4\u63cf\u8ff0\",\n  \"devices_count\": 0\n}\n</code></pre> <p></p> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <p></p> <p></p>"},{"location":"test/api/#_35","title":"\u52a0\u5165\u8bbe\u5907\u5230\u5176\u4ed6\u7ec4 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /device-groups/{group-id}/devices</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u8bbe\u5907\u52a0\u5165\u5230\u6307\u5b9a\u7ec4\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"device_id\": 1\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907 xxx \u5df2\u52a0\u5165\u8bbe\u5907\u7ec4 xxx\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <p>\u5df2\u7ecf\u52a0\u5165\u7684\u8bbe\u5907\u53cd\u590d\u8fdb\u884c\u52a0\u5165\u64cd\u4f5c\u65e0\u63d0\u793a</p>"},{"location":"test/api/#_36","title":"\u4ece\u7ec4\u4e2d\u79fb\u9664\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /device-groups/{group_id}/devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin_token\u3001device_id\u3001target_group_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u4f20\u5165\u81ea\u5df1\u7684 token\uff0c\u5c06\u8bbe\u5907\u79fb\u51fa\u6307\u5b9a\u7ec4\uff1b\u5982\u679c\u8bbe\u5907\u4ece public \u7ec4\u4e2d\u79fb\u9664\uff0c\u5220\u9664\u8bbe\u5907\uff1b\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u5728\u8bbe\u5907\u7ec4\u4e2d\u627e\u4e0d\u5230\u8bbe\u5907\uff08\u5305\u62ec id \u4e0d\u5b58\u5728\uff09\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u672a\u627e\u5230\u3002\",\n    \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul>"},{"location":"test/api/#_37","title":"\u8bbe\u5907","text":""},{"location":"test/api/#_38","title":"\u53d1\u73b0\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/discover</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist[device]</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u7ba1\u7406\u5458\u5c1d\u8bd5\u53d1\u73b0\u9644\u8fd1\u8bbe\u5907\uff0c\u540e\u7aef\u670d\u52a1\u68c0\u67e5\u5468\u56f4\u662f\u5426\u6709\u8bbe\u5907\uff0c\u8fd4\u56de\u4e00\u4e2a list.</p> </li> <li>list \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u7528\u4e8e\u8bbe\u5907\u4fe1\u606f\u7684 dict\uff0cdict \u81f3\u5c11\u8981\u5305\u542b\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907 ip\u3011\u3001\u3010\u8bbe\u5907\u7c7b\u578b\u3011\u3001\u3010\u8bbe\u5907\u6807\u8bc6\u3011\u7b49\u4fe1\u606f</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin_token</li> <li>\u82e5\u5b58\u5728\u8bbe\u5907\uff0c\u7c7b\u4f3c\u7684\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>\"success\": **true**,\n    \"message\": \"\u901a\u8fc7SSDP\u53d1\u73b0 2 \u4e2a\u8bbe\u5907\",\n    \"data\": [\n        {\n            \"device_identifier\": \"eb370a3c-b9dc-42bf-a0fb-61e311c6d79c\",\n            \"name\": \"refrigerator (eb370a3c-b9dc-42bf-a0fb-61e311c6d79c)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5001,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://0.0.0.0:5001\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:eb370a3c-b9dc-42bf-a0fb-61e311c6d79c::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": **false**,\n            \"database_id\": **null**\n        },\n        {\n            \"device_identifier\": \"e7f4fe33-e201-47f4-943b-16b3fe97bbcf\",\n            \"name\": \"refrigerator (e7f4fe33-e201-47f4-943b-16b3fe97bbcf)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5000,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://0.0.0.0:5000\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:e7f4fe33-e201-47f4-943b-16b3fe97bbcf::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": **true**,\n            \"database_id\": 6\n        }\n    ]\n}\n</code></pre> <ul> <li>\u7ba1\u7406\u5458\u4ee4\u724c\u65e0\u6548\uff0c\u8fd4\u56de\u4e4b\u524d\u540c\u6837\u7684\u8fd4\u56de\u4f53</li> <li>\u82e5\u65e0\u8bbe\u5907\uff0c\u5219\u8fd4\u56de\u4f53\u5982\u4e0b</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u672a\u901a\u8fc7SSDP\u53d1\u73b0\u4efb\u4f55\u517c\u5bb9\u8bbe\u5907\",\n    \"data\": []\n}\n</code></pre>"},{"location":"test/api/#_39","title":"\u540c\u6b65\u8bbe\u5907\u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/sync</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token</li> <li>\u8f93\u51fa\u53c2\u6570\uff1a</li> <li> <p>\u6ce8\u91ca\uff1a</p> </li> <li> <p>\u5c06\u53d1\u73b0\u8bbe\u5907\u8fd4\u56de\u7684\u7ed3\u679c\u4f20\u5165\uff0c\u53ef\u4ee5\u5c06\u8bbe\u5907\u6dfb\u52a0\u5230\u6570\u636e\u5e93\u4e2d</p> </li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_data\": [\n        {\n            \"device_identifier\": \"b067db59-7194-47a1-8a24-ebdfeb9fcb61\",\n            \"name\": \"refrigerator (b067db59-7194-47a1-8a24-ebdfeb9fcb61)\",\n            \"ip\": \"127.0.0.1\",\n            \"port\": 5001,\n            \"device_type\": \"refrigerator\",\n            \"status\": \"off\",\n            \"power\": 100,\n            \"ssdp_location\": \"http://127.0.0.1:5001\",\n            \"ssdp_nt\": \"urn:schemas-example-com:device:refrigerator:1\",\n            \"ssdp_usn\": \"uuid:b067db59-7194-47a1-8a24-ebdfeb9fcb61::urn:schemas-example-com:device:refrigerator:1\",\n            \"already_added\": false,\n            \"database_id\": null\n        }\n    ]\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u6210\u529f\u540c\u6b65 1 \u4e2a\u8bbe\u5907\",\n    \"data\": {\n        \"synced_devices\": [\n            {\n                \"action\": \"created\",\n                \"device_id\": 4,\n                \"device_identifier\": \"b067db59-7194-47a1-8a24-ebdfeb9fcb61\"\n            }\n        ],\n        \"errors\": [],\n        \"total_processed\": 1,\n        \"successful\": 1,\n        \"failed\": 0\n    }\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <p></p> <ul> <li>\u82e5\u7ba1\u7406\u5458\u4ee4\u724c\u65e0\u6548\uff0c\u8fd4\u56de\u4e4b\u524d\u540c\u6837\u7684\u8fd4\u56de\u4f53</li> </ul>"},{"location":"test/api/#_40","title":"\u6dfb\u52a0\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u5728\u53d1\u73b0\u8bbe\u5907\u4e4b\u540e\u6dfb\u52a0\u8bbe\u5907\uff0c\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u8fd4\u56de\u8db3\u591f\u9519\u8bef\u4fe1\u606f\u3002\u8fd9\u91cc\u6211\u4eec\u505a\u4e00\u4e9b\u7b80\u5355\u5047\u8bbe\uff0c\u65b0\u7684\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7 ip \u548c port \u6807\u8bc6</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_ip\": \"10.0.1.1\",\n    \"device_port\": \"2100\"\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907\u6dfb\u52a0\u6210\u529f\",\n    \"data\": {\n        \"id\": 6,\n        \"name\": \"New Device (10.0.1.1:2100)\",\n        \"device_identifier\": \"10.0.1.1:2100\",\n        \"ip_address\": \"10.0.1.1\",\n        \"port\": 2100,\n        \"device_type\": null,\n        \"brand\": null,\n        \"description\": null,\n        \"status\": \"offline\",\n        \"current_power_consumption\": null,\n        \"uptime_seconds\": 0,\n        \"last_heartbeat\": null\n    }\n}\n</code></pre> <ul> <li>\u82e5\u7ba1\u7406\u5458\u4ee4\u724c\u65e0\u6548\uff0c\u8fd4\u56de\u4e4b\u524d\u540c\u6837\u7684\u8fd4\u56de\u4f53</li> <li>~~\u4fe1\u606f\u6709\u70b9\u5c11\u3002   \u66f4\u65b0\uff1a\u642d\u914d\u4fee\u6539\u8bbe\u5907\u4fe1\u606f\u63a5\u53e3\u53ef\u4ee5\u5b8c\u6210\uff0c\u89e3\u51b3~~</li> </ul>"},{"location":"test/api/#_41","title":"\u63a5\u53e3\u6d4b\u8bd5","text":""},{"location":"test/api/#_42","title":"\u79fb\u9664\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>DELETE /devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u79fb\u9664\u8bbe\u5907\uff0c\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u5982\u679c\u5931\u8d25\uff0c\u9700\u8981\u8fd4\u56de\u8db3\u591f\u9519\u8bef\u4fe1\u606f\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n}\n</code></pre> <ul> <li>\u79fb\u9664\u6210\u529f\uff0c\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907\u79fb\u9664\u6210\u529f\"\n}\n</code></pre> <ul> <li>id \u4e0d\u5728\u8303\u56f4\u5185\uff0c\u8fd4\u56de\u4f53:</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"No Device matches the given query.\",\n    \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre>"},{"location":"test/api/#_43","title":"\u4fee\u6539\u8bbe\u5907\u4fe1\u606f \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>PUT /devices/{device_id}</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1aadmin-token\u3001device_id\u3001new_device_info</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u7ba1\u7406\u5458\u5c1d\u8bd5\u4fee\u6539\u8bbe\u5907\u4fe1\u606f\uff0c\u4f20\u5165\u8bbe\u5907 id \u548c\u65b0\u7684\u8bbe\u5907\u4fe1\u606f\uff0c\u8bbe\u5907\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u63cf\u8ff0\u3011\u3001\u3010\u8bbe\u5907\u54c1\u724c\u3011\u7b49</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 admin-token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n    \"device_info\": {\n        \"name\": \"fridge1\",\n    }\n}\n</code></pre> <ul> <li>\u6d4b\u8bd5\u6210\u529f</li> </ul> <ul> <li>\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u5982\u4e0b\u7684\u4fe1\u606f\uff08\u53c2\u6570\uff09\u53ef\u4ee5\u88ab\u6dfb\u52a0</li> </ul> <pre><code>{\n    \"device_info\": {\n        \"name\": \"\",\n        \"ip_address\": \"\",\n        \"port\": 5001,\n        \"device_type\": \"\",\n        \"brand\": \"\",\n        \"description\": \"\"\n    }\n}\n</code></pre> <ul> <li>\u6dfb\u52a0\u5176\u4ed6\u4fe1\u606f\uff0c\u8fd4\u56de\u4f53\u63d0\u793a\u9519\u8bef\uff08\u4f1a\u63d0\u793a\u4e0d\u652f\u6301\u7684\u952e\uff09\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u8bbe\u5907\u4fe1\u606f\u4fee\u6539\u5931\u8d25\",\n    \"error_code\": \"VALIDATION_ERROR\",\n    \"details\": {\n        \"device_info\": [\n            \"\u4e0d\u652f\u6301\u7684\u952e: id in device_info.\"\n        ]\n    }\n}\n</code></pre>"},{"location":"test/api/#_44","title":"\u63a7\u5236\u8bbe\u5907 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/{device_id}/control</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken\u3001device_id\u3001action\u3001param</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u5c1d\u8bd5\u63a7\u5236\u8bbe\u5907\uff0c\u9700\u8981\u4e0a\u4f20\u901a\u884c\u8bc1\uff08token\uff09\u3001\u8bbe\u5907\u552f\u4e00\u6807\u8bc6\uff08device_id\uff09\u3001\u5bf9\u8bbe\u5907\u7684\u64cd\u4f5c\uff08action\uff09\uff08\u4f8b\u5982\u5f00\u673a\u3001\u5173\u673a\u7b49\uff09\u3001\u9644\u5e26\u7684\u53c2\u6570\uff08\u6bd4\u5982\u63a7\u5236\u7a7a\u8c03\u65f6\u4e5f\u8bb8\u9700\u8981\u6e29\u5ea6\u4e4b\u7c7b\u7684\u53c2\u6570\uff09\uff1b\u540e\u7aef\u9700\u8981\u901a\u8fc7 token \u68c0\u67e5\u7528\u6237\u662f\u5426\u5408\u6cd5\uff0c\u7528\u6237\u5bf9\u4e8e\u6307\u5b9a\u8bbe\u5907\u8fdb\u884c\u7684\u64cd\u4f5c\u662f\u5426\u5177\u6709\u8db3\u591f\u6743\u9650\u3002\u8fd4\u56de\u662f\u5426\u6210\u529f\u7684\u6807\u8bc6\uff0c\u6216\u8005\u5176\u4ed6 http \u72b6\u6001\u7801\uff0c\u53e6\u5916\u9700\u8981\u9644\u5e26\u8db3\u591f\u7684\u9519\u8bef\u4fe1\u606f\u3002</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u8bf7\u6c42\u4f53\uff1a</li> </ul> <pre><code>{\n  \"action\": \"set_temperature\",\n  \"parameters\": {\n    \"temperature\": -1\n  }\n}\n</code></pre> <ul> <li>\u6a21\u62df\u4e00\u4e2a\u76d1\u542c <code>5002</code> \u7684\u8bbe\u5907 \u51b0\u7bb1 2 \uff08id : 3\uff09</li> </ul> <pre><code>from http.server import BaseHTTPRequestHandler, HTTPServer\nimport json\n\nclass MockDeviceHandler(BaseHTTPRequestHandler):\n    def do_POST(self):\n        ## \u83b7\u53d6\u8bf7\u6c42\u5934\u4e2d\u7684\u6570\u636e\u957f\u5ea6\n        content_length = int(self.headers['Content-Length'])\n        ## \u8bfb\u53d6\u8bf7\u6c42\u4f53\n        post_data = self.rfile.read(content_length)\n\n        ## \u8bbe\u7f6e\u54cd\u5e94\u5934\n        self.send_response(200)\n        self.send_header('Content-type', 'application/json')\n        self.end_headers()\n\n        ## \u8fd4\u56de\u901a\u7528\u54cd\u5e94\u4f53\uff08success + message\uff09\n        response = {\n            \"success\": True,\n            \"message\": \"\u64cd\u4f5c\u5df2\u63a5\u6536\",\n        }\n        self.wfile.write(json.dumps(response).encode('utf-8'))\n\ndef run(server_class=HTTPServer, handler_class=MockDeviceHandler, port=5002):\n    server_address = ('', port)\n    httpd = server_class(server_address, handler_class)\n    print(f\"\u6a21\u62df\u8bbe\u5907\u670d\u52a1\u6b63\u5728\u8fd0\u884c\u5728\u7aef\u53e3 {port}...\")\n    httpd.serve_forever()\n\nif __name__ == \"__main__\":\n    run()\n</code></pre> <ul> <li>\u8bbe\u5907 id \u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u672a\u627e\u5230\u3002\",\n    \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre> <ul> <li>\u6240\u8bf7\u6c42\u63a7\u5236\u7684\u8bbe\u5907\u6545\u969c\u6216\u8005\u79bb\u7ebf\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u65e0\u6cd5\u4e0e\u8bbe\u5907 \u7a7a\u8c031 \u901a\u4fe1: \u8bbe\u5907\u63a7\u5236\u8d85\u65f6: 1.1.1.11:41\",\n    \"error_code\": \"DEVICE_COMMUNICATION_FAILED\"\n}\n</code></pre> <ul> <li>\u6709\u6743\u9650\u4e14\u8bbe\u5907\u8fd0\u884c\u4e2d\uff0c\u5982\u4e0b\uff1a</li> </ul> <ul> <li>\u4f7f\u7528 \u67e5\u8be2\u8bbe\u5907\u8be6\u60c5 \u63a5\u53e3\uff0c\u67e5\u770b\u6e29\u5ea6\u8bbe\u7f6e\u3002\u6210\u529f\u8bbe\u7f6e\u3002</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907\u8be6\u60c5\u83b7\u53d6\u6210\u529f\",\n    \"data\": {\n        \"id\": 3,\n        \"name\": \"\u51b0\u7bb12\",\n        \"device_identifier\": \"2\",\n        \"ip_address\": \"127.0.0.1\",\n        \"port\": 5002,\n        \"device_type\": \"refrigerator\",\n        \"brand\": null,\n        \"description\": \"\",\n        \"status\": \"online\",\n        \"current_power_consumption\": 1000.0,\n        \"uptime_seconds\": 4294967295,\n        \"last_heartbeat\": null,\n        \"logs\": [],\n        \"usage_records\": [\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T21:30:51.387538+08:00\",\n                \"parameters\": {\n                    \"temperature\": -1\n                }\n            },\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T21:37:40.173701+08:00\",\n                \"parameters\": {\n                    \"temperature\": -5\n                }\n            },\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T22:26:16.373702+08:00\",\n                \"parameters\": {\n                    \"temperature\": -5\n                }\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"test/api/#_45","title":"\u67e5\u8be2\u8bbe\u5907\u6982\u8981 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/overview</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken</li> <li>\u8f93\u51fa\u53c2\u6570\uff1alist <li>\u6ce8\u91ca\uff1a\u8be5\u65b9\u6cd5\u5141\u8bb8\u666e\u901a\u7528\u6237\u548c\u7ba1\u7406\u5458\u7528\u6237\u8c03\u7528\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u666e\u901a\u7528\u6237\u53ea\u80fd\u770b\u5230\u90e8\u5206\u8bbe\u5907\u7684\u6982\u8981\uff08\u90a3\u4e9b\u7528\u6237\u81f3\u5c11\u62e5\u6709\u3010\u53ef\u89c1\u3011\u6743\u9650\u7684\u8bbe\u5907\uff09\u3002\u7ba1\u7406\u5458\u5c06\u4f1a\u5f97\u5230\u6240\u6709\u8bbe\u5907\u7684\u6982\u8981\u3002\u8fd4\u56de\u4e00\u4e2a list\uff0clist \u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a dict\uff0c\u4ee3\u8868\u67d0\u4e2a\u8bbe\u5907\u7684\u6982\u8981\uff0ckey \u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u72b6\u6001\u3011</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u7ecf\u6d4b\u8bd5\uff0c\u7ba1\u7406\u5458\u89c6\u89d2\u8fd4\u56de\u4f53\uff08\u9ed8\u8ba4\u6240\u6709\u8bbe\u5907\u4fe1\u606f\uff09\uff1a</li> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907\u6982\u8981\u83b7\u53d6\u6210\u529f\",\n    \"data\": [\n        {\n            \"id\": 2,\n            \"name\": \"\u51b0\u7bb11\",\n            \"status\": \"online\",\n            \"device_type\": \"\u51b0\u7bb1\",\n            \"ip_address\": \"1.1.1.1\",\n            \"port\": 1,\n            \"device_identifier\": \"1\"\n        },\n    ]\n}\n</code></pre> <ul> <li>\u7ecf\u6d4b\u8bd5\uff0c\u975e\u7ba1\u7406\u5458\u89c6\u89d2\u8fd4\u56de\u4f53\u4e2d\uff0c\u5c55\u793a\u62e5\u6709\u3010\u53ef\u89c1\u3011\u4ee5\u4e0a\u6743\u9650\u7684\u8bbe\u5907</li> </ul>"},{"location":"test/api/#_46","title":"\u67e5\u8be2\u8bbe\u5907\u8be6\u60c5 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>GET /devices/{device_id}/detail</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1atoken\u3001device_id</li> <li>\u8f93\u51fa\u53c2\u6570\uff1adetail_dict</li> <li>\u6ce8\u91ca\uff1a\u7528\u6237\u67e5\u8be2\u67d0\u4e2a\u8bbe\u5907\u7684\u8be6\u60c5\uff0c\u6ce8\u610f\uff0c\u53ea\u6709\u7528\u6237\u5bf9\u4e8e\u8be5\u8bbe\u5907\u7684\u6743\u9650\u8fbe\u5230\u3010\u53ef\u76d1\u89c6\u3011\u7684\u7ea7\u522b\u624d\u80fd\u5f97\u5230\u8be6\u7ec6\u4fe1\u606f\u3002detail_dict \u4e2d\u81f3\u5c11\u8981\u5305\u62ec\u3010\u8bbe\u5907\u540d\u3011\u3001\u3010\u8bbe\u5907\u72b6\u6001\u3011\u3001\u3010\u8bbe\u5907\u5f53\u524d\u529f\u8017\u3011\u3001\u3010\u8bbe\u5907\u8fd0\u884c\u65f6\u95f4\u3011\u3001\u3010\u8bbe\u5907\u8fd0\u884c\u65e5\u5fd7\u3011\u3001\u3010\u8bbe\u5907\u4f7f\u7528\u8bb0\u5f55\u3011\uff0c\u5176\u4f59\u53c2\u6570\u6839\u636e\u8bbe\u5907\u7c7b\u522b\u8865\u5145</li> <li>\u8bf7\u6c42\u5934\uff1a\u9700\u8981 user_token</li> <li>\u65e0\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n  \"success\": false,\n  \"message\": \"\u60a8\u6ca1\u6709\u6267\u884c\u8be5\u64cd\u4f5c\u7684\u6743\u9650\u3002\",\n  \"error_code\": \"permission_denied\"\n}\n</code></pre> <ul> <li>\u6709\u6743\u9650\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907\u8be6\u60c5\u83b7\u53d6\u6210\u529f\",\n    \"data\": {\n        \"id\": 3,\n        \"name\": \"\u51b0\u7bb12\",\n        \"device_identifier\": \"2\",\n        \"ip_address\": \"127.0.0.1\",\n        \"port\": 5002,\n        \"device_type\": \"refrigerator\",\n        \"brand\": null,\n        \"description\": \"\",\n        \"status\": \"online\",\n        \"current_power_consumption\": 1000.0,\n        \"uptime_seconds\": 4294967295,\n        \"last_heartbeat\": null,\n        \"logs\": [],\n        \"usage_records\": [\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T21:30:51.387538+08:00\",\n                \"parameters\": {\n                    \"temperature\": -1\n                }\n            },\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T21:37:40.173701+08:00\",\n                \"parameters\": {\n                    \"temperature\": -5\n                }\n            },\n            {\n                \"user_email\": \"wweibq@qq.com\",\n                \"action\": \"set_temperature\",\n                \"timestamp\": \"2025-06-14T22:26:16.373702+08:00\",\n                \"parameters\": {\n                    \"temperature\": -5\n                }\n            }\n        ]\n    }\n}\n</code></pre> <ul> <li>\u8bbe\u5907 id \u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n  \"success\": false,\n  \"message\": \"No Device matches the given query.\",\n  \"error_code\": \"GENERIC_ERROR\"\n}\n</code></pre>"},{"location":"test/api/#_47","title":"\u63a5\u53d7\u8bbe\u5907\u5fc3\u8df3 \u2705","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/heartbeat</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u63a5\u53d7\u8bbe\u5907\u53d1\u9001\u7684\u5468\u671f\u6027\u5fc3\u8df3\u5305\uff0c\u8bb0\u5f55\u8bbe\u5907\u4fe1\u606f</li> <li>\u8bf7\u6c42\u4f53\uff08\u53c2\u8003\uff09\uff1a</li> </ul> <pre><code>{\n  \"device_identifier\": \"xiaomi_ac_001\",\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"status\": \"online\",\n  \"data\": {\n    \"current_power_consumption\": 1200.5,\n    \"current_temperature\": 26,\n    \"target_temperature\": 24,\n    \"error_codes\": []\n  }\n}\n</code></pre> <ul> <li>\u8fd4\u56de\u4f53\uff1a</li> </ul> <pre><code>{\n    \"success\": true,\n    \"message\": \"\u8bbe\u5907 xiaomi_ac_001 \u5fc3\u8df3\u5df2\u63a5\u6536\u5e76\u66f4\u65b0\"\n}\n</code></pre> <ul> <li>\u8bbe\u5907\u6807\u8bc6\u7b26\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u8bbe\u5907\u6807\u8bc6\u7b26 b067db59-7194-47a4-ebdfeb9fcb61 \u672a\u627e\u5230\",\n    \"error_code\": \"DEVICE_NOT_FOUND\"\n}\n</code></pre> <ul> <li>\u6210\u529f\u6d4b\u8bd5\u5982\u4e0b\uff1a</li> </ul>"},{"location":"test/api/#_48","title":"\u63a5\u53d7\u8bbe\u5907\u4e8b\u4ef6\uff08\u5f03\u7528\uff09","text":"<ul> <li>\u63a5\u53e3\uff1a<code>POST /devices/event</code></li> <li>\u8f93\u5165\u53c2\u6570\uff1ainfo</li> <li>\u8f93\u51fa\u53c2\u6570\uff1asignal</li> <li>\u6ce8\u91ca\uff1a\u63a5\u53d7\u8bbe\u5907\u53d1\u9001\u7684\u4e8b\u4ef6\u901a\u77e5</li> <li>\u8bf7\u6c42\u4f53\uff08\u53c2\u8003\uff09\uff1a</li> </ul> <pre><code>{\n  \"device_identifier\": \"xiaomi_ac_001\",\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"event_type\": \"state_change\",\n  \"event_data\": {\"status\": \"on\",\"brightness\": 100}\n\n}\n</code></pre> <ul> <li>~~\u274c \u8fd4\u56de\u4f53\uff08\u63a5\u53e3\u5df2\u7ecf\u5f03\u7528\uff09\uff1a~~</li> </ul> <pre><code>~~{~~\n~~    \"success\": false,~~\n~~    \"message\": \"\u65b9\u6cd5 \u201cPOST\u201d \u4e0d\u88ab\u5141\u8bb8\u3002\",~~\n~~    \"error_code\": \"method_not_allowed\"~~\n~~}~~\n</code></pre>"},{"location":"test/performance/","title":"\u6027\u80fd\u6d4b\u8bd5","text":"<p>\u7528\u5faa\u73af\u538b\u6d4b\u7684\u65b9\u6cd5\uff0c\u9488\u5bf9\u7279\u5b9a\u63a5\u53e3\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u3002\u53ef\u4ee5\u4f7f\u7528\u5982 Apifox\u3001postman \u7b49\u8f6f\u4ef6\u7684\u81ea\u52a8\u6d4b\u8bd5\u6a21\u5757\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8f7b\u91cf\u7ea7\u7684 Locust \u7b49\u8f6f\u4ef6\u5305\uff0c\u8fd9\u91cc\u4e3b\u8981\u4f7f\u7528 Locust\u3002</p>"},{"location":"test/performance/#_1","title":"\u7528\u6237\u884c\u4e3a\u6d4b\u8bd5\u2014\u2014\u2014\u4ee5\u6ce8\u518c\u7528\u6237\u4e3a\u4f8b","text":"<p>\u5f53\u8f6f\u4ef6\u77e5\u540d\u5ea6\u5f97\u5230\u63d0\u5347\u7684\u65f6\u5019\uff0c\u6ce8\u518c\u7528\u6237\u6570\u91cf\u5c06\u8fce\u6765\u589e\u957f\uff0c\u73b0\u5728\u6d4b\u8bd5\u77ed\u65f6\u95f4\u5927\u91cf\u7684\u8bbf\u95ee\u8fd9\u4e2a\u63a5\u53e3\u7684\u60c5\u51b5</p>"},{"location":"test/performance/#_2","title":"\u6d4b\u8bd5\u51c6\u5907","text":"<ul> <li>\u4f7f\u7528 Apifox \u7684\u81ea\u52a8\u6d4b\u8bd5</li> </ul>"},{"location":"test/performance/#_3","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u4ee5\u4e0b\u662f\u91cd\u8981\u6570\u636e\u5206\u6790</p>"},{"location":"test/performance/#90","title":"90% \u54cd\u5e94\u65f6\u95f4","text":"<ul> <li>\u6570\u503c: 469 ms</li> <li>90% \u7684\u8bf7\u6c42\u80fd\u591f\u5728 469 \u6beb\u79d2\u5185\u5f97\u5230\u54cd\u5e94\u3002\u8fd9\u662f\u8861\u91cf\u7cfb\u7edf\u6027\u80fd\u7684\u91cd\u8981\u6307\u6807\u4e4b\u4e00\uff0c\u53cd\u6620\u4e86\u5927\u591a\u6570\u7528\u6237\u7684\u5b9e\u9645\u4f53\u9a8c</li> </ul>"},{"location":"test/performance/#_4","title":"\u5e73\u5747\u54cd\u5e94\u65f6\u95f4","text":"<ul> <li>\u6570\u503c: 418 ms</li> <li>\u7cfb\u7edf\u5904\u7406\u4e00\u4e2a\u6ce8\u518c\u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u4e3a 418 \u6beb\u79d2\u3002\u5bf9\u4e8e\u6ce8\u518c\u63a5\u53e3\u6765\u8bf4\uff0c\u8fd9\u4e2a\u54cd\u5e94\u65f6\u95f4\u5728\u53ef\u63a5\u53d7\u8303\u56f4\u5185</li> </ul>"},{"location":"test/performance/#_5","title":"\u8bf7\u6c42\u5931\u8d25\u7387","text":"<ul> <li>\u6570\u503c: 1.62%</li> <li>\u5728\u6240\u6709\u8bf7\u6c42\u4e2d\uff0c\u6709 1.62% \u7684\u8bf7\u6c42\u5931\u8d25\u3002\u662f\u4e00\u4e2a\u4f4e\u7684\u5931\u8d25\u7387\u3002\u8fdb\u4e00\u6b65\u5206\u6790\u53d1\u73b0\uff0c\u8bbe\u5907\u6027\u80fd\u8fbe\u5230\u5cf0\u503c\u624d\u4f1a\u5bfc\u81f4\u5931\u8d25\uff0c\u8bf4\u660e\u63a5\u53e3\u5f88\u7a33\u5b9a</li> </ul>"},{"location":"test/performance/#_6","title":"\u7ba1\u7406\u5458\u67e5\u8be2\u884c\u4e3a\u6d4b\u8bd5\u2014\u2014\u2014\u2014\u4ee5\u67e5\u770b\u7528\u6237\u5bf9\u8bbe\u5907\u7684\u6743\u9650\u4e3a\u4f8b","text":""},{"location":"test/performance/#_7","title":"\u6d4b\u8bd5\u51c6\u5907","text":"<p>\u56e0\u4e3a\u53c2\u6570\u4f4d\u4e8e URL\uff0c\u4f7f\u7528 Locust \u811a\u672c\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5</p> <pre><code>from locust import HttpUser, task, between\nimport random\nimport json\n\n## \u7ba1\u7406\u5458 token\nADMIN_TOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzUwMDcwNzMyLCJpYXQiOjE3NTAwNjcxMzIsImp0aSI6IjU5MGUwOTNmNjY5YzRmZWNhNTkxNWRkNmVkZWZlOGE1IiwidXNlcl9pZCI6MX0.C-zVLZn5PIXF4Ju_JRDioAwgkSIjv1tNXx37e3rGn6o\"\n\n## \u7528\u6237ID\u8303\u56f4\nUSER_ID_RANGE = range(1, 3000)\n\nclass DevicePermissionTest(HttpUser):\n    wait_time = between(1, 3)  ## \u6bcf\u6b21\u8bf7\u6c42\u4e4b\u95f4\u7b49\u5f85\u65f6\u95f4\uff08\u79d2\uff09\n\n    @task\n    def check_user_permissions(self):\n        user_id = random.choice(list(USER_ID_RANGE))\n        url = f\"/api/v1/permissions/user/{user_id}/\"\n\n        headers = {\n            \"Authorization\": f\"Bearer {ADMIN_TOKEN}\",\n            \"Content-Type\": \"application/json\"\n        }\n\n        with self.client.get(url, headers=headers, catch_response=True) as response:\n            try:\n                data = response.json()\n\n                ## \u5224\u65ad success \u5b57\u6bb5\u662f\u5426\u5b58\u5728\u4e14\u4e3a True\n                if isinstance(data, dict) and data.get(\"success\") is True:\n                    print(f\"[{user_id}] \u6210\u529f\u83b7\u53d6\u6743\u9650\u4fe1\u606f\uff0cdata: {data['data']}\")\n                    ## \u6807\u8bb0\u4e3a\u6210\u529f\n                else:\n                    ## \u63a5\u53e3\u8fd4\u56de\u4e86\u9519\u8bef\u6216\u7ed3\u6784\u5f02\u5e38\n                    msg = data.get(\"message\", \"\u672a\u77e5\u9519\u8bef\")\n                    response.failure(f\"\u63a5\u53e3\u8fd4\u56de\u5931\u8d25\uff1a{msg} - \u54cd\u5e94\u5185\u5bb9: {data}\")\n                    print(f\"[{user_id}] \u8bf7\u6c42\u5931\u8d25: {data}\")\n\n            except json.JSONDecodeError:\n                ## JSON \u89e3\u6790\u5931\u8d25\n                response.failure(\"\u54cd\u5e94\u5185\u5bb9\u4e0d\u662f\u6709\u6548\u7684 JSON\")\n                print(f\"[{user_id}] \u54cd\u5e94\u5185\u5bb9\u4e0d\u662f\u6709\u6548\u7684 JSON\uff0c\u539f\u59cb\u5185\u5bb9\uff1a{response.text}\")\n</code></pre> <p></p>"},{"location":"test/performance/#_8","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u8fdb\u5165 http://localhost:8089/ \u6d4b\u8bd5</p> <p></p> <ul> <li>\u56fe\u50cf\u4e2d\u51fa\u73b0\u7684\u66f2\u7ebf\u5c16\u5cf0\uff0c\u6765\u81ea\u4e8e\u8bbe\u5907\u6027\u80fd\u7684\u53d8\u5316\uff0c\u603b\u4f53\u4e0a\u770b\uff0c\u63a5\u53e3\u7684\u6027\u80fd\u5f88\u597d\uff0c\u6ca1\u6709\u5931\u8d25\u6848\u4f8b</li> </ul>"},{"location":"test/permission/","title":"\u6743\u9650\u6d4b\u8bd5","text":"<p>\u5728\u6700\u7ec8\u7684 smart_home \u8f6f\u4ef6\u8fdb\u884c\u7528\u6237\u6743\u9650\u6d4b\u8bd5</p>"},{"location":"test/permission/#_1","title":"\u89c6\u9891","text":"Your browser does not support the video tag."},{"location":"test/permission/#_2","title":"\u65b0\u7528\u6237\u6ce8\u518c","text":"<ul> <li>\u6ce8\u518c\u4e00\u4e2a\u7528\u6237 test@test.com</li> <li>\u65b0\u7528\u6237\u9ed8\u8ba4\u6743\u9650\u5bf9\u6240\u6709\u8bbe\u5907\u4e3a\u4e0d\u53ef\u89c1\uff0c\u9700\u8981\u7b49\u5f85\u7ba1\u7406\u5458\u6388\u6743</li> </ul>"},{"location":"test/permission/#_3","title":"\u8fdb\u5165\u7ba1\u7406\u5458\u754c\u9762\uff0c\u5728\u7ba1\u7406\u7528\u6237\u7684\u754c\u9762\u627e\u5230\u521a\u521a\u6ce8\u518c\u7684\u65b0\u7528\u6237","text":""},{"location":"test/permission/#_4","title":"\u6743\u9650\u6d4b\u8bd5","text":""},{"location":"test/permission/#ta-0","title":"\u5bf9\u8fd9\u4e2a\u65b0\u7528\u6237\uff0c\u7ba1\u7406\u5458\u8d4b\u4e88 ta \u5bf9\u5ba2\u5385\u7a7a\u8c03\u53ef\u89c1\u3001\u5bf9\u95e8\u9501\u53ef\u7528\u3001\u5bf9\u667a\u80fd\u51b0\u7bb1\u53ef\u914d\u7f6e\u3001\u5bf9\u5367\u5ba4\u53f0\u706f\u53ef\u76d1\u63a7\u3001\u5bf9\u76d1\u63a7\u6444\u50cf\u5934\u53ef\u7ba1\u7406\u3001\u5bf9\u683c\u529b 0 \u5ea6\u51b0\u7bb1\u7684\u53ef\u89c1\u6743\u9650","text":""},{"location":"test/permission/#_5","title":"\u56de\u5230\u7528\u6237\u89c6\u89d2\uff0c\u5728\u8bbe\u5907\u754c\u9762","text":""},{"location":"test/permission/#_6","title":"\u6743\u9650\u6d4b\u8bd5","text":""},{"location":"test/permission/#_7","title":"\u7528\u6237\u67e5\u770b\u5ba2\u5385\u7a7a\u8c03\u7684\u4fe1\u606f\uff0c\u7531\u4e8e\u5176\u5bf9\u5ba2\u5385\u7a7a\u8c03\u7684\u6743\u9650\u662f\u53ef\u89c1\uff0c\u65e0\u6cd5\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f","text":""},{"location":"test/permission/#0","title":"\u540c\u7406\u7528\u6237\u5bf9\u667a\u80fd\u51b0\u7bb1\u548c\u683c\u529b 0 \u5ea6\u51b0\u7bb1\u6743\u9650\u662f\u53ef\u7528\uff0c\u65e0\u6cd5\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f","text":""},{"location":"test/permission/#_8","title":"\u7531\u4e8e\u8bbe\u5907\u79bb\u7ebf\uff0c\u65e0\u6cd5\u5bf9\u79bb\u7ebf\u7684\u8bbe\u5907\u8fdb\u884c\u5f00\u542f\u548c\u5173\u95ed\u64cd\u4f5c\uff0c\u5f00\u5173\u6309\u94ae\u6309\u4e0b\u65e0\u53cd\u5e94","text":""},{"location":"test/permission/#gemini-chat-0","title":"\u4f7f\u7528 Gemini Chat\uff0c\u5bf9\u4e8e\u5728\u7ebf\u8bbe\u5907 \u683c\u529b 0 \u5ea6\u51b0\u7bb1\uff0c\u53ea\u6709\u53ef\u89c1\u6743\u9650\u7684\u7528\u6237\u65e0\u6cd5\u67e5\u770b\u4fe1\u606f\u548c\u6253\u5f00","text":""},{"location":"test/permission/#gemini-chat","title":"\u4f7f\u7528 Gemini Chat\uff0c\u5bf9\u4e8e\u53ef\u76d1\u63a7\u7684\u5367\u5ba4\u53f0\u706f","text":""},{"location":"test/permission/#gemini-chat_1","title":"\u4f7f\u7528 Gemini Chat\uff0c\u8bc6\u522b\u7528\u6237\u5bf9\u5404\u4e2a\u8bbe\u5907\u7684\u6743\u9650\uff0c\u5e76\u9075\u5b88\u6743\u9650\u89c4\u5219\u5217\u51fa\u4fe1\u606f","text":"<p>\u90e8\u5206\u8bbe\u5907\u4fe1\u606f\u672a\u80fd\u6210\u529f\u83b7\u53d6\u662f\u6b63\u786e\u7684\uff0c\u7b26\u5408\u6743\u9650\u89c4\u5219</p>"},{"location":"test/permission/#_9","title":"\u6743\u9650\u6d4b\u8bd5","text":""},{"location":"test/permission/#_10","title":"\u7ba1\u7406\u5458\u89c6\u89d2","text":"<ul> <li>Gemini Chat \u9650\u5b9a\u53ea\u80fd\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1</li> </ul>"},{"location":"test/permission/#_11","title":"\u521b\u5efa\u548c\u7ba1\u7406\u7528\u6237\u7ec4\u754c\u9762","text":""},{"location":"test/permission/#_12","title":"\u521b\u5efa\u548c\u7ba1\u7406\u8bbe\u5907\u7ec4\u754c\u9762","text":""},{"location":"test/permission/#_13","title":"\u67e5\u8be2\u4e0d\u540c\u8bbe\u5907\u7c7b\u578b\u652f\u6301\u7684\u64cd\u4f5c\u548c\u53c2\u6570","text":""},{"location":"test/security/","title":"\u5b89\u5168\u6d4b\u8bd5","text":"<p>\u8fdb\u884c\u5e38\u89c1\u7684 http \u6f0f\u6d1e\u68c0\u6d4b\uff0c\u5982\u53ef\u80fd\u5b58\u5728\u7684 SQL \u6ce8\u5165\u548c XSS</p>"},{"location":"test/security/#_2","title":"\u6ce8\u518c","text":"<ul> <li>\u63a5\u53e3\u8def\u5f84: <code>POST /auth/register</code></li> <li>\u8bf7\u6c42\u4f53\u683c\u5f0f\uff08\u5176\u4e2d\u540d\u79f0\u4e0d\u662f\u5fc5\u9700\u9879\uff09:</li> </ul> <pre><code>{\n    \"email\": \"test_user_001@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#sql","title":"SQL \u6ce8\u5165\u6d4b\u8bd5","text":""},{"location":"test/security/#or-11","title":"\u7b80\u5355\u7684 OR '1'='1 \u6ce8\u5165","text":"<pre><code>{\n    \"email\": \"' OR '1'='1\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#_3","title":"\u5c1d\u8bd5\u5220\u9664\u7528\u6237\u8868","text":"<pre><code>{\n    \"email\": \"test_user_001@example.com'; DROP TABLE users;--\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#_4","title":"\u4f7f\u7528\u6ce8\u91ca\u7b26\u53f7\u7ed5\u8fc7\u9a8c\u8bc1","text":"<pre><code>{\n    \"email\": \"test_user_001@example.com' --\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#xss","title":"XSS \u6d4b\u8bd5","text":""},{"location":"test/security/#script","title":"\u57fa\u672c\u7684 <code>&lt;script&gt;</code> \u6807\u7b7e\u6ce8\u5165","text":"<pre><code>{\n    \"email\": \"&lt;script&gt;alert('xss')&lt;/script&gt;@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#xss_1","title":"\u66f4\u9690\u853d\u7684 XSS \u653b\u51fb\u5c1d\u8bd5","text":"<pre><code>{\n    \"email\": \"test&lt;script&gt;alert(1)&lt;/script&gt;_user_001@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"testuser001\"\n}\n</code></pre>"},{"location":"test/security/#xss_2","title":"\u5728\u7528\u6237\u540d\u5b57\u6bb5\u4e2d\u6ce8\u5165 XSS \u8f7d\u8377","text":"<pre><code>{\n    \"email\": \"test_user_001@example.com\",\n    \"password\": \"Test@123456\",\n    \"username\": \"&lt;script&gt;alert('xss_in_username')&lt;/script&gt;\"\n}\n</code></pre>"},{"location":"test/security/#_5","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"<ul> <li>\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u6ce8\u518c\u63a5\u53e3\u5b89\u5168\uff0c\u65e0 SQL \u6ce8\u5165\u98ce\u9669\u548c XSS \u811a\u672c\u6f0f\u6d1e</li> <li>\u8fd4\u56de\u4f53\u5747\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u6ce8\u518c\u5931\u8d25: \u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7528\u6237\u540d\u3002\u53ea\u80fd\u5305\u542b\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26\u201c@\u201d\u3001\u201c.\u201d\u3001\u201c-\u201d\u548c\u201c_\u201d\u3002\",\n    \"error_code\": \"VALIDATION_ERROR\",\n    \"details\": {\n        \"username\": [\n            \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7528\u6237\u540d\u3002\u53ea\u80fd\u5305\u542b\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26\u201c@\u201d\u3001\u201c.\u201d\u3001\u201c-\u201d\u548c\u201c_\u201d\u3002\"\n        ]\n    }\n}\n</code></pre> <ul> <li>\u540c\u65f6\u540e\u7aef\u67e5\u770b\u6570\u636e\u5e93\u5b8c\u6574\u5b89\u5168</li> </ul> <p>\u8fd9\u8868\u660e\u7cfb\u7edf\u5bf9\u4e8e\u63d0\u4f9b\u7684\u6076\u610f\u8f93\u5165\u6ca1\u6709\u627e\u5230\u5339\u914d\u7684\u7528\u6237\u8d26\u6237\uff0c\u5e76\u4e14\u59cb\u7ec8\u8fd4\u56de\u76f8\u540c\u7684\u9519\u8bef\u6d88\u606f\u3002\u8fd9\u662f\u4e00\u4e2a\u597d\u7684\u8ff9\u8c61</p>"},{"location":"test/security/#_6","title":"\u767b\u5f55","text":"<ul> <li>\u8bf7\u6c42\u4f53\u53ef\u4ee5\u76f4\u63a5\u5957\u7528\u4e0a\u8ff0\u6ce8\u518c\u7684\u5b89\u5168\u68c0\u6d4b\u7684 Json</li> <li>\u7ecf\u8fc7\u81ea\u52a8\u6d4b\u8bd5\uff0c\u7ed3\u679c\u5747\u4e3a\u8fd4\u56de\u4f53\u63d0\u793a\u62a5\u9519\uff0c\u4e14\u6570\u636e\u5e93\u5b8c\u597d\uff0c\u7f51\u7edc\u72b6\u6001\u7a33\u5b9a\uff0c\u6240\u4ee5\u8be5\u63a5\u53e3\u8ba4\u4e3a\u5b89\u5168</li> <li>\u8fd4\u56de\u4f53\u5982\u4e0b\uff1a</li> </ul> <pre><code>{\n    \"success\": false,\n    \"message\": \"\u627e\u4e0d\u5230\u6307\u5b9a\u51ed\u636e\u5bf9\u5e94\u7684\u6709\u6548\u7528\u6237\",\n    \"error_code\": \"no_active_account\"\n}\n</code></pre>"}]}